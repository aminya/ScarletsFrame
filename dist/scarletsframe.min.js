/*
  ScarletsFrame
  A frontend library for Scarlets Framework that support
  lazy page load and element binding that can help
  simplify your code

  https://github.com/ScarletsFiction/ScarletsFrame
*/
function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0!==Element.prototype.remove&&void 0!==CharacterData.prototype.remove&&void 0!==DocumentType.prototype.remove||function(){for(var e=[Element.prototype,CharacterData.prototype,DocumentType.prototype],t=0;t<e.length;t++){if(e[t].hasOwnProperty("remove"))return;e[t].remove=function(){null!==this.parentNode&&this.parentNode.removeChild(this)}}}(),void 0===Element.prototype.matches&&(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),void 0===Element.prototype.closest&&(Element.prototype.closest=function(e){var t=this;do{if(t===document)return null;if(!0===t.matches(e))return t;t=t.parentNode}while(null!==t);return null}),function(global,factory){function routerEval(code){eval(code)}void 0!==HTMLElement.prototype.remove&&void 0!==window.customElements&&void 0!==window.Reflect||(console.error("This browser was not supported"),void 0===window.customElements&&console.warn("This can be fixed by adding 'https://unpkg.com/@webcomponents/webcomponentsjs@2.3.0/webcomponents-loader.js' before loading 'scarletsframe.js'"),void 0===window.Reflect&&console.warn("This can be fixed by adding 'https://unpkg.com/core-js-bundle@3.4.0/minified.js' before loading 'scarletsframe.js'"),alert("This browser was not supported")),"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(global,routerEval):global.sf=factory(global,routerEval)}("undefined"!=typeof window?window:this,(function(window,routerEval){"use strict";void 0===("undefined"==typeof document?"undefined":_typeof(document))&&(document=window.document);var HTMLTemplates=window.templates||{},TemplatePending=[];Object.defineProperty(window,"templates",{set:function(e){if(HTMLTemplates=e,hotReload&&internal.hotTemplate(e),0!==TemplatePending.length){var t=TemplatePending;TemplatePending=[];for(var n=0;n<t.length;n++)t[n]()}},get:function(){return HTMLTemplates}});var internal={},privateRoot={},forProxying={},sf=function(e,t){if(void 0!==e.tagName)return 1===e.nodeType&&void 0!==e.sf$controlled||(e=$.parentHasProperty(e,"sf$controlled")),null===e||t?e:e.model},hotReload=!1,sfRegex={getQuotes:/(['"])(?:\1|[\s\S]*?[^\\]\1)/g,scopeVar:"(^|[^.\\]\\w])",uniqueDataParser:/{{((@|#[\w])[\s\S]*?)}}/g,dataParser:/{{([^@%][\s\S]*?)}}/g,repeatedList:/(.*?) in (.*?)$/,itemsObserve:/\b(_model_|_modelScope)\.([\w\[\].]+)/g,parsePropertyPath:/(?:\[([\w]+)\]|\.([\w]+))/g,getSingleMask:["([^\\w.]|^)","([^\\w:]|$)"],inputAttributeType:/checkbox|radio|hidden/,anyCurlyBracket:/{{.*?}}/,allTemplateBracket:/{\[([\s\S]*?)\]}/g,anyOperation:/[ =(+-]/};function parsePropertyPath(e){var t=[];return t.unshift(e.replace(sfRegex.parsePropertyPath,(function(e,n,r){return void 0!==n?(!1===isNaN(n)?n=Number(n):'"'!==n[0]&&"'"!==n[0]||(n=n.slice(1,-1)),t.push(n),""):(t.push(r),"")}))),t}function stringifyPropertyPath(e){for(var t=e[0],n=1;n<e.length;n++)e[n].constructor===Number?t+="["+e[n]+"]":t+="."+e[n];return t}sf.link=function(e,t,n){var r,i=!1;function o(e){if(void 0!==e)if(void 0===e.set)!1===i&&void 0===n&&(n=e.value);else{if(!1!==i&&e.set!==i.set)throw new Error("There are more than one object that have different set descriptor");i=e}}if(e.constructor===Array)for(var s=0;s<e.length;s++)o(Object.getOwnPropertyDescriptor(e[s],t));else for(var t in e)o(Object.getOwnPropertyDescriptor(e[t],t));if(!1===i&&(r=n,i={configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e}}),e.constructor===Array)for(s=0;s<e.length;s++)Object.defineProperty(e[s],t,i);else for(var t in e)Object.defineProperty(e[t],t,i)};var _es="%@~";function avoidQuotes(e,t,n){e=e.split(_es).join("-");var r=[];if(e=e.replace(sfRegex.getQuotes,(function(e){return r.push(e),_es+(r.length-1)+_es})),0===r.length)return t(e);if(e=t(e),void 0!==n)for(var i=0;i<r.length;i++)e=e.replace(_es+i+_es,n(r[i]));else for(i=0;i<r.length;i++)e=e.replace(_es+i+_es,r[i]);return e}function isEmptyObject(e){for(var t in e)return!1;return!0}function compareObject(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.constructor===Array){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;var o=r.length<i.length?i:r;for(n=0;n<o.length;n++)if(e[o[n]]!==t[o[n]])return!1;return!0}function hiddenProperty(e,t,n,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:r,value:n})}function deepProperty(e,t){for(var n=0;n<t.length;n++)if(void 0===(e=e[t[n]]))return;return e}function capitalizeLetters(e){for(var t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].slice(1);return e.join("")}function getStaticMethods(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++)"function"==typeof t[n[r]]&&e.add(n[r])}function getPrototypeMethods(e,t){if(void 0!==t.prototype){for(var n=Object.getOwnPropertyNames(t.prototype),r=n.length-1;r>=0;r--)"constructor"!==n[r]&&e.add(n[r]);var i=Object.getPrototypeOf(t);void 0!==i.prototype&&getPrototypeMethods(e,i)}}function proxyClass(e){var t=e.constructor,n=t.prototype,r=new Set;getPrototypeMethods(r,t);var i,o,s=_createForOfIteratorHelper(r);try{for(s.s();!(i=s.n()).done;){var a=i.value;e[a]!==n[a]&&void 0===e[a].ref&&(o=void 0,(o=function t(){return e.super=t.protoFunc,t.ref.apply(e,arguments)}).ref=e[a],o.protoFunc=n[a],e[a]=o)}}catch(e){s.e(e)}finally{s.f()}}function toArray(e){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=e[n];return t}sf.loader=new function(){var e=this;e.loadedContent=0,e.totalContent=0,e.DOMWasLoaded=!1,e.DOMReady=!1,e.turnedOff=!0;var t=[],n=[],r=[];e.onFinish=function(t){if(e.DOMWasLoaded)return t();n.includes(t)||n.push(t)},e.domReady=function(n){if(e.DOMReady)return n();t.includes(n)||t.push(n)},e.onProgress=function(t){if(e.DOMWasLoaded)return t(e.loadedContent,e.totalContent);r.includes(t)||r.push(t)},e.f=function(t){e.loadedContent++,t.target.removeEventListener("load",e.f,{once:!0}),t.target.removeEventListener("error",e.f,{once:!0});for(var n=0;n<r.length;n++)r[n](e.loadedContent,e.totalContent)},e.css=function(t){if(e.DOMWasLoaded){for(var n=t.length-1;n>=0;n--)0!==document.querySelectorAll('link[href*="'.concat(t[n],'"]')).length&&t.splice(n,1);if(0===t.length)return}e.turnedOff=!1,e.totalContent=e.totalContent+t.length;for(n=0;n<t.length;n++){var r=document.createElement("link");r.rel="stylesheet",r.href=t[n],r.addEventListener("load",e.f,{once:!0}),r.addEventListener("error",e.f,{once:!0}),document.head.appendChild(r)}},e.js=function(t,n){if(e.DOMWasLoaded){for(var r=t.length-1;r>=0;r--)0!==document.querySelectorAll('script[src*="'.concat(t[r],'"]')).length&&t.splice(r,1);if(0===t.length)return}e.turnedOff=!1,e.totalContent=e.totalContent+t.length;for(r=0;r<t.length;r++){var i=document.createElement("script");i.type="text/javascript",n&&(i.async=!0),i.src=t[r],i.addEventListener("load",e.f,{once:!0}),i.addEventListener("error",e.f,{once:!0}),document.head.appendChild(i)}};var i="";function o(t){if(document.body&&(document.removeEventListener("load",o,!0),"loading"===i))for(var n=document.body.querySelectorAll("img:not(onload)[src]"),r=0;r<n.length;r++)e.totalContent++,n[r].addEventListener("load",e.f,{once:!0}),n[r].addEventListener("error",e.f,{once:!0})}function s(){if("interactive"===document.readyState||"complete"===document.readyState){if(!1===e.DOMReady){e.DOMReady=!0;for(var n=0;n<t.length;n++)try{t[n]()}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}}!1===e.turnedOff?a=setInterval(l,100):l(),document.removeEventListener("readystatechange",s,!0)}}e.waitImages=function(){i="loading"},document.addEventListener("load",o,!0),"interactive"===document.readyState||"complete"===document.readyState?(document.removeEventListener("load",o,!0),setTimeout(s,1)):document.addEventListener("readystatechange",s,!0);var a=-1;function l(){if(!(!1===e.turnedOff&&e.loadedContent<e.totalContent)){clearInterval(a);for(var i=document.querySelectorAll("script, link, img"),o=0;o<i.length;o++)i[o].removeEventListener("error",e.f),i[o].removeEventListener("load",e.f);e.DOMWasLoaded=!0,e.turnedOff=!0;for(o=0;o<n.length;o++)try{n[o]()}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}r=t=n=null}}window.sf$proxy&&(window.sf$proxy.sfLoaderTrigger=l)};var IE11=!1===Object.getOwnPropertyDescriptor(Function.prototype,"length").configurable;sf.dom=function(e,t){if(!e){if(void 0===e){var n=function e(t){return e.find(t)};return IE11&&Object.defineProperty(n,"_",{value:!0}),Object.setPrototypeOf(n,DOMList.prototype)}return _DOMList([])}return e.constructor===Function?sf.loader.onFinish(e):"<"===e[0]||">"===e[e.length-1]?_DOMList($.parseElement(e,!0)):t?void 0===t.classList?t.animateKey===$.fn.animateKey?t.find(e):$(queryElements(t,e)):_DOMList(t.querySelectorAll(e)):e.constructor===String?_DOMList(document.querySelectorAll(e)):_DOMList(e)};var $=sf.dom,css_str=/\-([a-z0-9])/,css_strRep=function(e,t){return t.toUpperCase()},DOMList=function(){function e(t){if(_classCallCheck(this,e),null===t)return this.length=0,this;if(void 0===t.length)return this[0]=t,this.length=1,this;for(var n=0;n<t.length;n++)this[n]=t[n];return this.length=t.length,this}return _createClass(e,[{key:"push",value:function(e){if(this._){var t=recreateDOMList(this,this.length+1);return t[this.length]=e,t}return void 0===this._s?(Object.defineProperties(this,{length:{writable:!0,enumerable:!1,value:1},_s:{enumerable:!1,value:!0}}),this[0]=e,this):(this[this.length++]=e,this)}},{key:"splice",value:function(e,t){e<0&&(e=this.length+e),void 0===t&&(t=this.length-e);for(var n=this.length-t;e<n;e++)this[e]=this[e+t];if(!0===this._)return recreateDOMList(this,this.length-t);void 0===this._s&&Object.defineProperties(this,{length:{writable:!0,enumerable:!1,value:this.length},_s:{enumerable:!1,value:!0}}),this.length-=t;for(e=this.length,n=this.length+t;e<n;e++)delete this[e];return this}},{key:"find",value:function(e){if(1===this.length)return _DOMList(this[0].querySelectorAll(e));for(var t=[],n=0;n<this.length;n++)t.push.apply(t,this[n].querySelectorAll(e));return _DOMList(t)}},{key:"parent",value:function(e){if(1===this.length)return _DOMList(e?this[0].closest(e):this[0].parentNode);for(var t=[],n=0;n<this.length;n++)t.push.apply(t,this[n].closest(e));return _DOMList(t)}},{key:"prev",value:function(e){var t;return 0!==this.length&&(t=$.prevAll(this[0],e,!1,!0)),_DOMList(t||[])}},{key:"prevAll",value:function(e){for(var t=[],n=0;n<this.length;n++)t.push.apply(t,$.prevAll(this[n],e));return _DOMList(t)}},{key:"next",value:function(e){var t;return 0!==this.length&&(t=$.prevAll(this[0],e,!0,!0)),_DOMList(t||[])}},{key:"nextAll",value:function(e){for(var t=[],n=0;n<this.length;n++)t.push.apply(t,$.prevAll(this[n],e,!0));return _DOMList(t)}},{key:"children",value:function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n].children,i=0;i<r.length;i++)r[i].matches(e)&&t.push(r[i]);return _DOMList(t)}},{key:"remove",value:function(){for(var e=0;e<this.length;e++)this[e].remove();return this}},{key:"empty",value:function(){for(var e=0;e<this.length;e++)this[e].textContent="";return this}},{key:"addClass",value:function(e){for(var t=0;t<this.length;t++)DOMTokenList.prototype.add.apply(this[t].classList,e.split(" "));return this}},{key:"removeClass",value:function(e){for(var t=0;t<this.length;t++)DOMTokenList.prototype.remove.apply(this[t].classList,e.split(" "));return this}},{key:"toggleClass",value:function(e){for(var t=0;t<this.length;t++)DOMTokenList.prototype.toggle.apply(this[t].classList,e.split(" "));return this}},{key:"hasClass",value:function(e){for(var t=0;t<this.length;t++)if(this[t].classList.contains(e))return!0;return!1}},{key:"prop",value:function(e,t){if(void 0===t)return 0!==this.length?this[0][e]:"";for(var n=0;n<this.length;n++)this[n][e]=t;return this}},{key:"attr",value:function(e,t){if(void 0===t)return 0!==this.length?this[0].getAttribute(e):"";for(var n=0;n<this.length;n++)this[n].setAttribute(e,t);return this}},{key:"removeAttr",value:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this}},{key:"css",value:function(e,t){if(void 0===t&&e.constructor===String)return 0!==this.length?this[0].style[e]:"";if(e.constructor===Object){for(var n in e)!1!==n.includes("-")&&(e[n.replace(css_str,css_strRep)]=e[n],delete e[n]);for(var r=0;r<this.length;r++)Object.assign(this[r].style,e);return this}e=e.replace(css_str,css_strRep);for(r=0;r<this.length;r++)this[r].style[e]=t;return this}},{key:"on",value:function(e,t,n,r){for(var i=0;i<this.length;i++)void 0===internal.model.specialEvent[e]?$.on(this[i],e,t,n,r):internal.model.specialEvent[e](this[i],null,n);return this}},{key:"off",value:function(e,t,n,r){for(var i=0;i<this.length;i++)void 0!==e?void 0===internal.model.specialEvent[e]?$.off(this[i],e,t,n,r):void 0!==this[i]["sf$eventDestroy_".concat(e)]&&this[i]["sf$eventDestroy_".concat(e)]():$.off(this[i]);return this}},{key:"once",value:function(e,t,n){for(var r=0;r<this.length;r++)$.once(this[r],e,t,n);return this}},{key:"trigger",value:function(e,t,n){e=e.split(" ");for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.length;o++)if(!0!==n){var s=void 0;try{s=new window.CustomEvent(i,{detail:t,bubbles:!0,cancelable:!0})}catch(e){(s=document.createEvent("Event")).initEvent(i,!0,!0),s.detail=t}this[o].dispatchEvent(s)}else this[o][i](t);return this}},{key:"animateKey",value:function(e,t,n){for(var r=0;r<this.length;r++)$.animateKey(this[r],e,t,n);return this}},{key:"each",value:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this);return this}},{key:"data",value:function(e,t){if(void 0===t)return 0!==this.length&&this[0].$data?this[0].$data[e]:void 0;for(var n=0;n<this.length;n++)void 0===this[n].$data&&(this[n].$data={}),this[n].$data[e]=t;return this}},{key:"removeData",value:function(e){for(var t=0;t<this.length;t++)void 0!==this[t].$data&&delete this[t].$data[e];return this}},{key:"append",value:function(e){if(e.constructor===Array)for(var t=0;t<e.length;t++)this[0].append(e[t]);else e.constructor===String?this[0].insertAdjacentHTML("beforeEnd",e):this[0].append(e);return this}},{key:"prepend",value:function(e){if(e.constructor===Array)for(var t=0;t<e.length;t++)this[0].prepend(e[t]);else e.constructor===String?this[0].insertAdjacentHTML("afterBegin",e):this[0].prepend(e);return this}},{key:"eq",value:function(e,t){return e<0&&(e=this.length+e),_DOMList(void 0===t?this[e]:this.slice(e,t>0?t:void 0))}},{key:"insertAfter",value:function(e){var t=e.parentNode,n=e.nextSibling;if(t.insertBefore(this[0],n),void 0===this[0]){var r=toArray(this);r[0]=e.previousSibling;for(var i=1;i<r.length;i++)t.insertBefore(r[i],n);return $(r)}if(this.length>1)for(i=1;i<this.length;i++)t.insertBefore(this[i],this[i-1]);return this}},{key:"insertBefore",value:function(e){var t=e.parentNode;if(t.insertBefore(this[0],e),void 0===this[0]){var n=toArray(this);n[0]=e.nextSibling;for(var r=1;r<n.length;r++)t.insertBefore(n[r],e);return $(n)}if(this.length>1)for(r=1;r<this.length;r++)t.insertBefore(this[r],e);return this}},{key:"text",value:function(e){if(void 0===e)return 0!==this.length?this[0].textContent:"";for(var t=0;t<this.length;t++)this[t].textContent=e;return this}},{key:"html",value:function(e){if(void 0===e)return 0!==this.length?this[0].innerHTML:"";for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this}},{key:"val",value:function(e){if(void 0===e)return 0!==this.length?this[0].value:"";for(var t=0;t<this.length;t++)this[t].text=e;return this}},{key:"click",value:function(e){return this.trigger("click",e,!0)}},{key:"blur",value:function(e){return this.trigger("blur",e,!0)}},{key:"focus",value:function(e){return this.trigger("focus",e,!0)}},{key:"focusin",value:function(e){return this.trigger("focusin",e)}},{key:"focusout",value:function(e){return this.trigger("focusout",e)}},{key:"keyup",value:function(e){return this.trigger("keyup",e)}},{key:"keydown",value:function(e){return this.trigger("keydown",e)}},{key:"keypress",value:function(e){return this.trigger("keypress",e)}},{key:"submit",value:function(e){return this.trigger("submit",e)}},{key:"change",value:function(e){return this.trigger("change",e)}},{key:"mousedown",value:function(e){return this.trigger("mousedown",e)}},{key:"mousemove",value:function(e){return this.trigger("mousemove",e)}},{key:"mouseup",value:function(e){return this.trigger("mouseup",e)}},{key:"mouseenter",value:function(e){return this.trigger("mouseenter",e)}},{key:"mouseleave",value:function(e){return this.trigger("mouseleave",e)}},{key:"mouseout",value:function(e){return this.trigger("mouseout",e)}},{key:"mouseover",value:function(e){return this.trigger("mouseover",e)}},{key:"touchstart",value:function(e){return this.trigger("touchstart",e)}},{key:"touchend",value:function(e){return this.trigger("touchend",e)}},{key:"touchmove",value:function(e){return this.trigger("touchmove",e)}},{key:"resize",value:function(e){return this.trigger("resize",e,!0)}},{key:"scroll",value:function(e){return this.trigger("scroll",e,!0)}}]),e}();function _DOMList(e){if(!e||void 0===e.forEach||e.constructor!==NodeList)return new DOMList(e);var t=e.length;return Object.setPrototypeOf(e,DOMList.prototype),e.length=t,e}function queryElements(e,t){for(var n=[],r=0;r<e.length;r++)n.push.apply(n,e[r].querySelectorAll(t));return n}function recreateDOMList(e,t){for(var n=["sel"],r=1;r<t;r++)n.push("a".concat(r));var i={},o=Function("o","return function(".concat(n.join(","),"){return o.find(sel)}"))(i);for(r=0;r<t;r++)o[r]=e[r];return i.find=function(e){return o.find(e)},Object.defineProperty(o,"_",{value:!0}),Object.setPrototypeOf(o,DOMList.prototype)}function getNamespace(e,t){var n=sf.space.list[e];if(void 0===n&&(n=sf.space.list[e]={}),void 0===n[t]){var r=n.default;if(void 0===r&&(r=n.default=createRoot_({},{}),"default"===t))return r;n[t]=createRoot_(r.modelFunc,r.registered)}return n[t]}function createRoot_(e,t){var n=function t(n){var r=t.registered[n];return r?r[2]:(void 0===(r=t.root)[n]&&(r[n]={},e[n].constructor!==Function?console.warn(n,"haven't been registered. Please check your compiler settings or the compiled file"):e[n](r[n],t)),r[n])};n.root={},n.modelFunc=e,n.registered=t;n.domList=[];return n}!function(){var e=sf.dom;function t(e,t,n){void 0===e.sf$eventListener&&(e.sf$eventListener={}),void 0===e.sf$eventListener[t]&&(e.sf$eventListener[t]=[]),e.sf$eventListener[t].push(n)}function n(e,t,n,r,i){if(void 0!==e.sf$eventListener)if(r){if(e.removeEventListener(t,r,i),void 0===(o=e.sf$eventListener[t]))return;-1!==(a=o.indexOf(r))&&o.splice(a,1),0===o.length&&delete e.sf$eventListener[t]}else{var o;if(void 0!==(o=e.sf$eventListener)&&void 0!==o[t]){for(var s=o[t],a=s.length-1;a>=0;a--)if(!n||s[a].selector===n){i=s[a].options;e.removeEventListener(t,s.splice(a,1)[0],i)}delete e.sf$eventListener[t]}}else void 0!==r&&e.removeEventListener(t,r,i)}e.fn=DOMList.prototype,e.fn.add=e.fn.push,e.fn.indexOf=Array.prototype.indexOf,e.fn.forEach=Array.prototype.forEach,e.fn.concat=Array.prototype.concat,e.fn.reverse=Array.prototype.reverse,e.fn.slice=Array.prototype.slice,e.fn.filter=Array.prototype.filter,e.fn.includes=Array.prototype.includes,e.findOne=function(e,t){return void 0!==t?t.querySelector(e):document.querySelector(e)},e.isChildOf=function(e,t){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},e.parentHasProperty=function(e,t){do{if(void 0!==e[t])return e;e=e.parentNode}while(null!==e);return null},e.prevAll=function(e,t,n,r){var i=[],o=!t||t.constructor!==String;for(e=n?e.nextSibling:e.previousSibling;null!==e;){if(!1===o){if(!0===e.matches(t)){if(r)return e;i.push(e)}}else{if(e===t){if(r)return!0;break}i.push(e)}e=n?e.nextSibling:e.previousSibling}if(!r)return i},e.nextAll=function(t,n,r){return e.prevAll(t,n,!0,r)},e.on=function(n,r,i,o,s){if(r.includes(" ")){r=r.split(" ");for(var a=0;a<r.length;a++)e.on(n,r[a],i,o,s)}else{if(void 0!==o&&o.constructor===Object){var l=s;s=o,o=l}if(i.constructor===Function?(o=i,i=null):i.constructor===Object&&(s=i,i=null),i){var c=o;(o=function(e){var t=e.target.closest(i);null!==t&&c.call(t,e)}).callback=c}if(o.selector=i,o.options=s,n!==sf.window)n.addEventListener(r,o,o.options),"object"===_typeof(s)&&s.once||t(n,r,o);else{void 0===windowEv[r]&&(windowEv[r]=[]),window.addEventListener(r,o,o.options),t(window,r,o),windowEv[r].push(o);var d=sf.window.list;for(var u in d)d[u].addEventListener(r,o,o.options),t(d[u],r,o)}}},e.once=function(t,n,r,i){e.on(t,n,r,i,{once:!0})},e.off=function(t,r,i,o,s){if(void 0!==r){if(1===(u=r.split(" ")).length)if(void 0!==i&&i.constructor===Function&&(o=i,i=void 0),t!==sf.window)n(t,r,i,o,s);else{if(void 0===windowEv[r]||0===windowEv[r].length)return;var a=windowEv[r];o?-1!==(d=a.indexOf(o))&&a.splice(d,1):a.length=0,n(window,r,i,o,s);var l=sf.window.list;for(var c in l)n(l[c],r,i,o,s)}else for(var d=0;d<u.length;d++)e.off(t,u[d])}else{if(void 0===t.sf$eventListener)return;for(var u in t.sf$eventListener)e.off(t,u)}},e.animateKey=function(t,n,r,i){if(void 0!==t&&(r&&r.constructor===Function&&(i=r,r=void 0),void 0!==r&&r.constructor!==Number||(r={duration:r&&r.constructor===Number?r:.6,ease:"ease",fill:"both"}),!r.skipOnHidden||null!==t.offsetParent&&"hidden"!==window.getComputedStyle(t).visibility)){var o=null;void 0!==t.style.animation&&(o="animationend"),void 0!==t.style.WebkitAnimation&&(o="webkitAnimationEnd");var s=t.style,a=n;if(void 0!==r.duration&&(a+=" ".concat(r.duration,"s")),void 0!==r.ease&&(a+=" ".concat(r.ease)),void 0!==r.delay){if(a+=" ".concat(r.delay,"s"),"animationend"===o)var l="animationstart";else l="webkitAnimationStart";!1===r.visible&&(t.classList.add("anim-pending"),s.visibility="hidden"),e.once(t,l,(function(){!1!==t.isConnected&&(r.whenBegin&&r.whenBegin.call(t),t.classList.remove("anim-pending"),s.visibility="visible")}))}else s.visibility="visible";void 0!==r.iteration&&(a+=" ".concat(r.iteration)),void 0!==r.direction&&(a+=" ".concat(r.direction)),void 0!==r.fill&&(a+=" ".concat(r.fill)),s.webkitAnimation=s.animation=a,setTimeout((function(){if(void 0!==t.isConnected){if(t.classList.add("anim-element"),null!==t.parentNode){var n=t.offsetLeft+t.offsetWidth/2+"px"+(t.offsetTop+t.offsetHeight/2)+"px",r=t.parentNode.style;t.parentNode.classList.add("anim-parent"),r.webkitPerspectiveOrigin=r.perspectiveOrigin=n}e.once(t,o,(function(){setTimeout((function(){if(null!==t.parentNode){s.visibility="",t.classList.remove("anim-element"),s.webkitAnimation=s.animation="";var e=t.parentNode.style;e.webkitPerspectiveOrigin=e.perspectiveOrigin="",void 0!==i&&i.call(t)}}))}))}else void 0!==i&&i.call(t)}))}};var r=document.createElement("div");e.parseElement=function(e,t){return r.innerHTML="<template>".concat(e,"</template>"),t?r.firstElementChild.content.children||[]:r.firstElementChild.content.childNodes||[]},e.escapeText=function(e){var t=r;return t.textContent=e,t.innerHTML},e.remove=function(e){if(void 0!==e.remove)return e.remove();for(var t=0;t<e.length;t++)e[t].remove()};var i=null;sf.loader.domReady((function(){i=document.body.parentNode}));var o=/[~`!@#$%^&*()+={}|[\]\\:";'<>?,./ ]/;e.getSelector=function(e,t,n){if(void 0===n)n=i;else if(e===n)return t?[]:"";for(var r=t?"previousSibling":"previousElementSibling",s=[];null!==e.parentElement;){if(!t&&e.id&&!o.test(e.id)){s.unshift("#".concat(e.id));break}if(e===n)break;for(var a=e,l=t?0:1;a[r];)a=a[r],l++;if(t?s.unshift(l):s.unshift(":nth-child(".concat(l,")")),null===(e=e.parentElement))break}return t?s:s.join(" > ")},e.childIndexes=function(e,t){if(0===e.length)return t;var n=t||i;e[0].constructor===String&&n.id!==e[0].substr(1)&&(n=n.querySelector(e[0]));for(var r=0;r<e.length;r++)if(null===(n=0===e[r]?n.firstChild:n.childNodes.item(e[r])))return null;return n}}(),sf.space=function(e,t){return new Space(e,t)},sf.space.list={},window.sf$proxy?internal.space=window.sf$proxy.internalSpace:internal.space={empty:!0,initComponent:function(e,t,n,r,i){sf.component.new(t,n,r,e.constructor===Function?e:e.sf$space,i)},initModel:function(e,t){var n=t.getAttribute("name");return void 0===e.sf$space.modelFunc[n]?e.sf$space.modelFunc[n]=[[t,n,e.sf$space]]:e.sf$space.modelFunc[n].constructor===Array?e.sf$space.modelFunc[n].push([t,n,e.sf$space]):void sf.model.init(t,n,e.sf$space)}},void 0===window.sf$proxy&&(forProxying.internalSpace=internal.space);var Space=function(){function e(t,n){if(_classCallCheck(this,e),void 0===t)throw new Error("`namespace` parameter need to be specified");if(t!==t.toLowerCase())throw new Error("`namespace` must be lowercase");this.namespace=t,this.default=getNamespace(t,"default"),this.list=sf.space.list[t],n&&(this.templatePath=n.templatePath)}return _createClass(e,[{key:"getScope",value:function(e){return getNamespace(this.namespace,e||"default")}},{key:"createHTML",value:function(e){var t=this;return $(window.templates[this.templatePath].replace(/<sf-space(.*?)(?:|="(.*?)")>/,(function(n,r,i){return i&&!1===isNaN(i)&&(i=Number(i)+1),(e=e||i||!1)&&(e='="'.concat(e,'"')),"<sf-space ".concat(t.namespace,">")})))[0]}},{key:"destroy",value:function(){}}]),e}();!function(){var e=Space.prototype;e.model=function(e,t,n){if(void 0===t)sf.model(e,t,n,this.default);else{t.constructor===Function?n=t:internal.modelInherit[e]=t.extend;var r=this.default.modelFunc[e];if(this.default.modelFunc[e]=n,void 0!==r&&r.constructor===Array)for(var i=0;i<r.length;i++){var o=r[i];sf.model.init(o[0],o[1],o[2])}}},e.component=function(e,t,n){return sf.component(e,t,n,this.default)},e.destroy=function(){for(var e in this.root)0===e.indexOf(namespace)&&(this.root[e].$el.remove(),delete this.root[e]);for(var e in this.components.registered)0===e.indexOf(namespace)&&delete this.components.registered[e];for(var e in internal.component)0===e.indexOf(namespace)&&delete internal.component[e]}}();var SFSpace=function(e){_inherits(n,_wrapNativeSuper(HTMLElement));var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).sf$firstInit=!0,e}return _createClass(n,[{key:"connectedCallback",value:function(){if(void 0!==this.sf$destroying&&(delete this.sf$destroying,clearTimeout(this.sf$destroying)),void 0!==this.sf$firstInit){delete this.sf$firstInit,forProxying.internalSpaceEmpty=internal.space.empty=!1;for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e].name;if("class"!==n&&"style"!==n&&"id"!==n){this.sf$spaceName=n,this.sf$spaceID=this.attributes[e].value||"default";break}}if(void 0===this.sf$spaceName)throw new Error("<sf-space>: space name was undefined");this.sf$space=getNamespace(n,this.sf$spaceID),this.sf$space.domList.push(this)}}},{key:"disconnectedCallback",value:function(){var e=this,t=function(){var t=e.sf$space.domList.indexOf(e);-1!==t&&e.sf$space.domList.splice(t,1)};if(window.destroying)return t();this.sf$destroying=setTimeout(t,1e3)}}]),n}();function findBindListElement(e){for(e=e.parentNode;null!==e;){if(e.sf$elementReferences&&e.sf$elementReferences.template.bindList)return e;e=e.parentNode}return null}customElements.define("sf-space",SFSpace),sf.model=function(e,t,n,r){if(void 0!==t)return sf.model.for(e,t,n);if(void 0!==(r||sf.component).registered[e])return(r||root_)(e);var i=r||sf.model;return void 0===i.root[e]&&(void 0!==internal.modelInherit[e]?i.root[e]=new internal.modelInherit[e]:i.root[e]={}),i.root[e]},function(){var e=sf.model;e.root={},internal.modelPending={},internal.modelInherit={},e.index=function(e){if(e.sf$elementReferences&&e.sf$elementReferences.template.bindList||(e=findBindListElement(e)),null===e)return-1;for(var t=-1,n=e.tagName,r=e;null!==e;){if(e.tagName===n)t++;else if(8!==e.nodeType)break;e=e.previousSibling}r.sf$elementReferences&&r.sf$elementReferences.template.bindList;var i=r.parentNode.$VSM;return void 0!==i?t+i.firstCursor:t},e.for=function(t,n,r,i){n.constructor===Function?void 0!==(r=n).prototype.init&&(internal.modelInherit[t]=r,r={class:r}):internal.modelInherit[t]=n.extend;var o,s=i||e;if(hotReload?hotModel(s,t,r):(o=s(t),r.constructor===Function&&r(o,s)),sf.loader.DOMWasLoaded&&void 0!==internal.modelPending[t]){for(var a=internal.modelPending[t],l=0;l<a.length;l++)sf.model.init(a[l],a[l].getAttribute("name"));delete internal.modelPending[t]}return o||s(t)},e.modelKeys=function(e,t){if(e.constructor!==Object&&e.constructor!==Array){var n=new Set;for(var r in e)r.includes("$")||n.add(r);if(getStaticMethods(n,e.constructor),getPrototypeMethods(n,e.constructor),t){var i,o="",s=_createForOfIteratorHelper(n);try{for(s.s();!(i=s.n()).done;){r=i.value;0!==o.length?o+="|".concat(r):o+=r}}catch(e){s.e(e)}finally{s.f()}return o}return Array.from(n)}n=[];for(var r in e)r.includes("$")||n.push(r);return t?n.join("|"):n}}();var SFModel=function(e){_inherits(n,_wrapNativeSuper(HTMLElement));var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).sf$firstInit=!0,e}return _createClass(n,[{key:"connectedCallback",value:function(){if(void 0!==this.sf$destroying&&(delete this.sf$destroying,clearTimeout(this.sf$destroying)),void 0!==this.sf$firstInit){if(delete this.sf$firstInit,!1===internal.space.empty){var e=this.closest("sf-space");if(null!==e)return void internal.space.initModel(e,this)}var t=this.getAttribute("name");if(void 0===sf.model.root[t]||void 0!==internal.modelPending[t])void 0===internal.modelPending[t]&&(internal.modelPending[t]=[]),internal.modelPending[t].push(this);else{if(sf.loader.DOMWasLoaded)return internal.language.refreshLang(this),sf.model.init(this,t);var n=this;sf.loader.onFinish((function(){internal.language.refreshLang(n),sf.model.init(n,t)}))}}}},{key:"disconnectedCallback",value:function(){var e=this,t=function(){if(void 0!==e.model){if(e.model.$el){var t=e.model.$el.indexOf(e);if(-1!==t){var n=e.model,r=n.$el[t];n.$el=n.$el.splice(t,1),n.destroy&&n.destroy(r,0===n.$el.length)}}internal.model.removeModelBinding(e.model)}};if(window.destroying)return t();this.sf$destroying=setTimeout(t,1e3)}}]),n}();customElements.define("sf-m",SFModel);var root_=function(e){if(sf.component.registered[e])return sf.component(e);if(void 0===sf.model.root[e]){sf.model.root[e]={}}return sf.model.root[e]};function prepareComponentTemplate(e,t,n,r,i){t=e.tempDOM||e.tagName.toLowerCase()===n;var o=internal.model.templateInjector(e,r,!0);return e=sf.model.extractPreprocess(e,null,r,void 0,i[4]),!1===o?i[3]=e:(o.tempDOM=t,i[3]=o),e.tempDOM=t,e}sf.component=function(e,t,n,r){if(void 0!==t&&(t.constructor===Function&&(n=t),n!==t&&sf.component.html(e,t,r),void 0!==n&&n.constructor===Function))return sf.component.for(e,t,n,r);var i=sf.component.registered[e];return i?i[2]:[]},function(){var e=sf.component;internal.component={},internal.componentInherit={};var t={};function n(n,r){for(var i=t[n],o=i.length-1;o>=0;o--)if(i[o].namespace===r){var s=i[o].el;if(void 0===(s=e.new(n,s,i[o].item,r,!1,!0)))return;s.connectedCallback("init"),i.pop()}0===i.length&&delete t[n]}e.registered={},e.for=function(r,o,s,a){o.constructor===Function?void 0!==(s=o).prototype.init&&(internal.componentInherit[r]=s,s={class:s}):void 0!==o.extend&&(internal.componentInherit[r]=o.extend);var l=a||e,c=l.registered[r];void 0===c&&((c=l.registered[r]=new Array(5))[2]=[]),c[0]=s;var d=i(r);return c[1]=d,window["$".concat(capitalizeLetters(r.split("-")))]=d,void 0!==t[r]?n(r,a):hotReload&&hotComponentRefresh(l,r,s),c[2]},e.html=function(r,i,o){var s=o||e,a=!1;if(i.constructor===Object){var l;if(i.template){if(a=i.template,window.templates){if(void 0===window.templates[i.template])return TemplatePending.push((function(){e.html(r,i,o,!0)})),console.warn("Waiting template path '".concat(i.template,"' to be loaded"));l=window.templates[i.template],hotReload&&void 0===proxyTemplate[i.template]&&(proxyTemplate[i.template]=[s,r]),i.keepTemplate||!1!==hotReload||delete window.templates[i.template]}}else{if(!i.html)return;l=i.html}if(void 0===l)return TemplatePending.push((function(){e.html(r,i,o,!0)})),console.warn("Waiting template for '".concat(r,"' to be loaded"));i=l}var c,d=s.registered[r];if(void 0===d&&((d=s.registered[r]=new Array(5))[2]=[]),1===(c=i.constructor===String?$.parseElement(i):i).length)d[3]=c[0];else{var u=document.createElement("div");u.tempDOM=!0;for(var f=c.length-1;f>=0;f--)u.insertBefore(c[f],u.firstChild);d[3]=u}!1!==a&&((a=a.split("/")).pop(),""!==(a=a.join("/"))&&(a+="/"),d[3].templatePath=a),void 0!==t[r]&&n(r,o),hotReload&&(!1===a?hotComponentTemplate(s,r):!1===backupCompTempl.has(d)&&backupCompTempl.set(d,d[3]))};document.createElement("div");e.new=function(n,r,i,o,s,a){if(!internal.component.skip&&!0!==r.sf$componentIgnore){if(!r.hasAttribute("sf-repeat-this")){var l=o||e;void 0!==o&&(r.sf$space=o);var c=l.registered[n];if(void 0===c||0===r.childNodes.length&&void 0===c[3]){if(!0===a)return;return void 0===t[n]&&(t[n]=[]),void t[n].push({el:r,item:i,namespace:o})}var d=/(^|:)(sf-|class|style)/,u=r.attributes,f=internal.componentInherit[n];0!==u.length&&void 0===i&&(i={});for(var p=0;p<u.length;p++)d.test(u[p].nodeName)||(i[u[p].nodeName]=u[p].value);var h=s?i:void 0!==f?new f:{},v=0;if(void 0===h.$el?h.$el=$():v=h.$el.length,0===v){var m=c[0];m.constructor===Function&&(void 0!==f&&s&&Object.setPrototypeOf(h,f.prototype),m(h,o||sf.model,i)),h.constructor!==Object&&(proxyClass(h),h.constructor.construct&&h.constructor.construct.call(h,o||sf.model,i)),hotReload&&(h.$el.$item=i,hotComponentAdd(l,n,h))}void 0===c[4]&&(c[4]=internal.model.createModelKeysRegex(r,h,null));var g=!1;if(0===r.childNodes.length){var y=c[3],b=y.tempDOM;if(y.constructor!==Object)b=(y=prepareComponentTemplate(y,b,n,h,c)).tempDOM;var w=Object.create(y);if(0!==w.parse.length){w.parse=w.parse.slice(0);for(p=0;p<w.parse.length;p++)w.parse[p]=Object.create(w.parse[p]),w.parse[p].data=[null,h]}if(!0===b)var E=internal.model.templateParser(w,h,void 0,void 0,void 0,r);else{E=internal.model.templateParser(w,h);r.appendChild(E)}r.sf$elementReferences=E.sf$elementReferences,sf.model.bindElement(r,h,w)}else{var _={repeat:[],input:[]};internal.model.templateInjector(r,h,!1),sf.model.parsePreprocess(sf.model.queuePreprocess(r,!0,_),h,c[4]),internal.model.bindInput(_.input,h),internal.model.repeatedListBinding(_.repeat,h,o,c[4]),!0===r.sf$componentIgnore&&(r=h.$el[0],void 0!==o&&(r.sf$space=o),delete r.sf$componentIgnore,r.isConnected&&(g=!0))}return h.$el=h.$el.push(r),c[2].push(h),r.sf$collection=c[2],r.model=h,r.sf$controlled=n,r.sf$initTriggered=!0,g&&r.connectedCallback(),r}r.sf$componentIgnore=!0}};var r=function(t){_inherits(r,_wrapNativeSuper(HTMLElement));var n=_createSuper(r);function r(t,i,o){var s;_classCallCheck(this,r);var a=(s=n.call(this)).tagName.toLowerCase();if(!1===internal.space.empty){var l=i||s.closest("sf-space");if(null!==l)return l.constructor===Space&&(l=l.default),internal.space.initComponent(l,a,_assertThisInitialized(s),t,o),_possibleConstructorReturn(s)}return e.new(a,_assertThisInitialized(s),t,void 0,o),s}return _createClass(r,[{key:"connectedCallback",value:function(e){if(void 0!==this.model&&!0!==this.sf$componentIgnore){if(void 0!==this.sf$detaching)return clearTimeout(this.sf$detaching),void(this.sf$detaching=void 0);if(this.sf$initTriggered){if(delete this.sf$initTriggered,this.model.init){if(1!==this.model.$el.length)return void(this.model.initClone&&this.model.initClone(this.model.$el[this.model.$el.length-1]));this.model.constructor!==Object&&this.model.constructor.init&&this.model.constructor.init.call(this.model,this.sf$space||sf.model),this.model.init()}}else"init"!==e&&this.model.reinit&&this.model.reinit(this)}}},{key:"disconnectedCallback",value:function(){if(!this.sf$componentIgnore&&void 0!==this.model){var e=this,t=function(){if(void 0!==e.model)if(1===e.model.$el.length)e.model.destroy&&e.model.destroy(),void 0!==e.sf$collection&&e.sf$collection.splice(e.sf$collection.indexOf(e.model),1),hotReload&&hotComponentRemove(e);else{var t=e.model.$el.indexOf(e);if(-1!==t){var n=e.model.$el[t];e.model.$el=e.model.$el.splice(t,1),e.model.destroyClone&&e.model.destroyClone(n)}internal.model.removeModelBinding(e.model)}};if(window.destroying)return t();this.sf$detaching=setTimeout(t,500)}}}]),r}();function i(e){var t=customElements.get(e);if(t)return t;if(e.toLowerCase()!==e)return console.error("Please use lower case when defining component name");var n=e.length;if(e.replace(/[^\w-]+/g,"").length!==n)return console.error("Please use '-' and latin character when defining component tags");var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(r);return i.prototype.constructor=r.prototype.constructor,window.sf$proxy&&(i.constructor=window.opener.Function),customElements.define(e,i),i}window.sf$proxy&&(window.sf$defineComponent=i)}(),function(){var self=sf.model;self.init=function(e,t,n){if(void 0===e.model){if(void 0===t)return console.error("Parameter 2 should be model name");if(e.sf$controlled=t,void 0!==n){e.sf$namespace=n;var r=e.model=n.root[t]||n(t)}else r=e.model=sf.model.root[t]||sf.model(t);var i=!1;void 0===r.$el&&(r.$el=$(),i=!0),r.$el=r.$el.push(e),void 0===r.sf$internal&&Object.defineProperty(r,"sf$internal",{enumerabe:!1,configurable:!0,value:{modelKeysRegex:createModelKeysRegex(e,r,null),deepBinding:{}}}),r.constructor!==Object&&(void 0===r.sf$internal.proxied&&(proxyClass(r),r.sf$internal.proxied=!0),r.constructor.construct&&r.constructor.construct.call(r,n||sf.model,e));var o={repeat:[],input:[]};sf.model.parsePreprocess(sf.model.queuePreprocess(e,void 0,o),r,r.sf$internal.modelKeysRegex),bindInput(o.input,r),repeatedListBinding(o.repeat,r,n,r.sf$internal.modelKeysRegex),r.init&&r.init(e,i),r.constructor!==Object&&r.constructor.init&&r.constructor.init.call(r,n||sf.model,e)}};var processingElement=null,scope=internal.model={};function trimIndentation(e){var t=e.split("\n",3);return void 0===(t=" "!==t[0][0]||"\t"!==t[0][0]?t[1]:t[0])||0===(t=t.length-t.trim().length)?e:e.replace(RegExp("^([\\t ]{"+t+"})","gm"),"")}function _escapeParse(e,t){return avoidQuotes(e,(function(e){return e.replace(templateParser_regex,(function(e,n){return sf.dom.escapeText(t[n])}))}),(function(e){return e.replace(templateParser_regex,(function(e,n){return t[n]&&t[n].constructor===String?t[n].split('"').join("&quot;").split("'").join("&#39;"):t[n]}))}))}var modelScript_=/_result_|return/;function modelScript(e,t,n){var r=t.match(modelScript_);t=null===r?"return "+t:"_result_"===r[0]?'var _result_="";'+t.split("@return").join("_result_+=")+";return _result_":t.split("@return").join("return"),e&&t.includes("_model_")&&(t=t.split("_model_").join(e));var i=e||"_model_";!1===t.includes("_escapeParse")?i+=",_modelScope,_eP":i+=",_modelScope,_escapeParse";try{return void 0===n?new Function(i,t):new Function(i,n,t)}catch(e){console.log(t),console.error(e),sf.onerror&&sf.onerror(e)}}var applyParseIndex=internal.model.applyParseIndex=function(e,t,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],l=n[a];if(void 0!==l)e[2*s+1]=l;else{var c=r[a];i!==(l=c.data)[1]?(l[0]=i,l=c.get(i,l[1],_escapeParse,o)):l=c.get(void 0,l[1],_escapeParse,o),e[2*s+1]=l.constructor===Object?JSON.stringify(l):l}}return e.join("")},parseIndexAllocate=internal.model.parseIndexAllocate=function(e){for(var t=e.length-1;t>0;t--)e.splice(t,0,void 0);""===e[e.length-1]&&e.pop()};function repeatedRemoveDeepBinding(e,t){if(0!==t.length)for(var n=0;n<t.length;n++)if(1!==t[n].length){var r=t[n].slice(0,-1);if(e.constructor!==RepeatedList)for(var i in e){void 0!==(s=deepProperty(e[i],r))&&internal.model.removeModelBinding(s)}else for(var o=0;o<e.length;o++){var s;void 0!==(s=deepProperty(e[o],r))&&internal.model.removeModelBinding(s)}}}function modelToViewBinding(e,t,n,r,i){var o=e,s=t;if(t.constructor===Array)if(1===t.length)t=t[0];else{if(void 0===deepProperty(e,t.slice(0,-1)))return;for(var a=function(n,r){var i=e[t[n]];if("object"!==_typeof(i))return{v:void 0};void 0===Object.getOwnPropertyDescriptor(e,t[n]).set&&Object.defineProperty(e,t[n],{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){return Object.assign(i,e),e}}),e=i},l=0,c=t.length-1;l<c;l++){var d=a(l);if("object"===_typeof(d))return d.v}t=t[t.length-1]}if(e.constructor!==Array||"length"!==t){void 0===e.sf$bindedKey&&initBindingInformation(e);var u,f=e.sf$bindedKey;if(void 0!==f[t])return!1===(u=f[t]).includes(n)&&u.push(n),void(void 0!==r&&(void 0===u.input?(u.input=[r],u.input.type=i):u.input.push(r)));if(f=f[t]=[n],void 0!==r)(u=f).input=[r],u.input.type=i;var p=Object.getOwnPropertyDescriptor(e,t);if(void 0!==p&&void 0===p.set){s.constructor===Array&&(void 0!==o.sf$internal&&1!==s.length&&(o.sf$internal.deepBinding[s.slice(0,-1).join("%$")]=!0),s=stringifyPropertyPath(s));var h=e[t];null==h&&(h="");var v=e["on$".concat(t)],m=e["m2v$".concat(t)];v&&Object.defineProperty(e,"on$".concat(t),{set:function(e){v=e},get:function(){return v}}),m&&Object.defineProperty(e,"m2v$".concat(t),{set:function(e){m=e},get:function(){return v}}),Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return h},set:function(t){if(h!==t){var n,r,i;!1===inputBoundRunning&&(void 0!==m&&void 0!==(n=m.call(e,t))&&(r=!0),void 0!==v&&(n=v.call(e,t,!0))),h=void 0!==n?n:t;for(var a=0;a<f.length;a++)(i=f[a]).inputBoundRun?i(h,f.input):syntheticTemplate(i.element,i.template,s,o);r&&(h=t)}inputBoundRunning=!1}})}}}internal.model.removeModelBinding=function(e,t){if(void 0!==e){if(void 0!==window.sf$proxy)return window.sf$proxy.removeModelBinding(e,t);var n=e.sf$bindedKey;for(var r in n)if(void 0===e[r]||e[r].constructor!==RepeatedProperty&&e[r].constructor!==RepeatedList){var i=n[r];for(s=i.length-1;s>=0;s--)i[s].constructor!==Function&&!1===i[s].element.isConnected&&i.splice(s,1);if(void 0!==i.input){for(s=i.input.length-1;s>=0;s--)!1===i.input[s].isConnected&&i.input.splice(s,1);if(0===i.input.length)for(s=i.length-1;s>=0;s--)i[s].inputBoundRun&&i.splice(s,1)}if(0===i.length){if(delete n[r],void 0===e[r]||void 0===Object.getOwnPropertyDescriptor(e,r).set)continue;d=e[r];delete e[r],e[r]=d}}else{var o=e[r];if(o.constructor===RepeatedList)for(var s=0;s<o.length&&"object"===_typeof(o[s]);s++)internal.model.removeModelBinding(o[s]);else for(var a in o){if("object"!==_typeof(o[a]))break;internal.model.removeModelBinding(o[a])}if(o.$EM.constructor===ElementManipulatorProxy){for(var l=o.$EM.list,s=l.length-1;s>=0;s--)!1===l[s].parentNode.isConnected&&(l[s].isComponent||repeatedRemoveDeepBinding(o,l[s].template.modelRef_path),l.splice(s,1));if(0!==l.length)continue}else{if(!1!==o.$EM.parentNode.isConnected)continue;o.$EM.isComponent||repeatedRemoveDeepBinding(o,o.$EM.template.modelRef_path)}if(o.$virtual&&(o.$virtual.destroy(),delete o.$virtual),delete o.$EM,delete n[r],delete e[r],e[r]=o,o.constructor===RepeatedList){Object.setPrototypeOf(o,Array.prototype);continue}for(var c in Object.setPrototypeOf(o,Object.prototype),o){var d=o[c];delete o[c],o[c]=d}}if(void 0===t&&void 0!==e.sf$internal){var u=e.sf$internal.deepBinding;for(var f in u){var p=deepProperty(e,f.split("%$"));void 0!==p&&internal.model.removeModelBinding(p,!0)}}}},void 0===window.sf$proxy&&(forProxying.removeModelBinding=internal.model.removeModelBinding),self.bindElement=function(e,t,n,r,i){if(void 0===n){if(void 0!==e.model)return void console.error("Unexpected rebinding",e,"Try wrap the level one {{ mustache }} with an <element/>");if(null!==e.parentNode&&e.parentNode.hasAttribute("sf-lang"))return;if(n=self.extractPreprocess(e,null,t,void 0,i),templateParser(n,t,!0),delete n.addresses,null!==e.parentNode){var o=n.html;e.tagName.includes("-")&&(o.sf$componentIgnore=!0,e.sf$componentIgnore=!0,t.$el[0]=o),e.parentNode.replaceChild(o,e)}e=n.html,delete n.html}for(var s=n.modelRefRoot_path,a=0;a<s.length;a++)modelToViewBinding(t,s[a],{element:e,template:n});if(void 0!==n.modelRef_path){n.modelRef_path.revalidate&&(delete n.modelRef_path.revalidate,revalidateBindingPath(n.modelRef,n.modelRef_path,r)),s=n.modelRef_path;for(a=0;a<s.length;a++)modelToViewBinding(r,s[a],{element:e,template:n})}};var rejectUntrusted=!1;function eventHandler(that,data,_modelScope,rootHandler,template){var modelKeys=sf.model.modelKeys(_modelScope,!0),direct=!1,script=data.value;script=avoidQuotes(script,(function(e){return!1===sfRegex.anyOperation.test(e)&&(direct=!0),e.replace(template.modelRefRoot_regex,(function(e,t,n){return t+"_modelScope."+n}))}));var name_=data.name.slice(1);if(rootHandler){var elementIndex=$.getSelector(that,!0,rootHandler);void 0===rootHandler.sf$listListener&&(rootHandler.sf$listListener={});var withKey=!1;if(void 0!==template.uniqPattern&&(withKey=!0),direct)var func=eval(script);else if(withKey)var func=new Function("event","_model_","_modelScope",template.uniqPattern,script);else var func=new Function("event","_model_","_modelScope",script);var listener=rootHandler.sf$listListener[name_];if(void 0!==listener)return void(!1===listener.set.has(elementIndex.join(""))&&(listener.push([elementIndex,func]),listener.set.add(elementIndex.join(""))));listener=rootHandler.sf$listListener[name_]=[[elementIndex,func]],listener.set=new Set([elementIndex.join("")]);var found=null,findEventFromList=function(e){e:for(var t=0;t<listener.length;t++){var n=listener[t];if(void 0===e){if(0!==n[0].length)continue;return found=n[0],n[1]}for(var r=n[0],i=0;i<r.length;i++)if(r[i]!==e[i])continue e;return found=n[0],n[1]}};script=function(e){var t=e.target;if(t!==rootHandler)if(t.sf$elementReferences&&t.sf$elementReferences.template.bindList){void 0!==(n=findEventFromList(void 0))&&n.call(e.target,e,e.target.model,_modelScope,withKey&&e.target.sf$repeatListIndex)}else{var n,r=findBindListElement(t);if(null===r)return;void 0!==(n=findEventFromList($.getSelector(t,!0,r)))&&n.call($.childIndexes(found,r),e,r.model,_modelScope,withKey&&r.sf$repeatListIndex)}}}else script=direct?eval(script):new Function("_modelScope","event",script).bind(that,_modelScope);var containSingleChar=!1,keys=name_.split("."),eventName=keys.shift();"unfocus"===eventName&&(eventName="blur");for(var i=keys.length-1;i>=0;i--)if(1===keys[i].length){containSingleChar=!0;break}keys=new Set(keys),rejectUntrusted&&keys.add("trusted");var options={};if(keys.has("once")&&(options.once=!0,keys.delete("once")),keys.has("passive")&&(keys.has("prevent")&&console.error("Can't preventDefault when using passive listener",that),options.passive=!0,keys.delete("passive")),keys.has("capture")&&(options.capture=!0,keys.delete("capture")),keys.has("right")&&(eventName.includes("mouse")||eventName.includes("pointer"))&&(rootHandler||that).addEventListener("contextmenu",(function(e){e.preventDefault()}),options),specialEvent[eventName])specialEvent[eventName](that,keys,script,_modelScope,rootHandler);else{var pointerCode=0;keys.has("left")&&(pointerCode|=1,keys.delete("left")),keys.has("middle")&&(pointerCode|=2,keys.delete("middle")),keys.has("right")&&(pointerCode|=4,keys.delete("right")),keys.has("4th")&&(pointerCode|=8,keys.delete("4th")),keys.has("5th")&&(pointerCode|=16,keys.delete("5th"));var modsCode=0;if(keys.has("ctrl")&&(modsCode|=1,keys.delete("ctrl")),keys.has("alt")&&(modsCode|=2,keys.delete("alt")),keys.has("shift")&&(modsCode|=4,keys.delete("shift")),keys.has("meta")&&(modsCode|=8,keys.delete("meta")),direct&&0===keys.size&&0===pointerCode&&0===modsCode)var callback=script;else var callback=function(e){if(!1===e.isTrusted&&keys.has("trusted"))rejectUntrusted&&sf.security.report&&sf.security.report(e);else if(keys.has("stop")?e.stopPropagation():keys.has("stopAll")&&(e.stopImmediatePropagation(),e.stopPropagation()),void 0===e.ctrlKey||0===modsCode||!(1&modsCode&&!0!==e.ctrlKey||2&modsCode&&!0!==e.altKey||4&modsCode&&!0!==e.shiftKey||8&modsCode&&!0!==e.metaKey)){if(e.constructor===KeyboardEvent){if(containSingleChar&&!keys.has(e.key))return;e.preventDefault()}else if(e.constructor===MouseEvent||e.constructor===PointerEvent){if(0!==pointerCode&&!(0===e.buttons?pointerCode&1<<e.which-1:e.buttons===pointerCode))return;e.preventDefault()}else if(e.constructor===TouchEvent){if(containSingleChar&&!keys.has(e.touches.length))return;e.preventDefault()}else keys.has("prevent")&&e.preventDefault();script.call(this,e)}};(rootHandler||that).addEventListener(eventName,callback,options),void 0===options.once&&((rootHandler||that)["sf$eventDestroy_".concat(eventName)]=function(){(rootHandler||that).removeEventListener(eventName,callback,options)}),rootHandler&&(that=null)}}sf.security=function(e){1&e&&(rejectUntrusted=!0)};var toDegree=180/Math.PI,specialEvent=internal.model.specialEvent={taphold:function(e,t,n,r){var i=new Set,o=null;function s(){e.removeEventListener("pointerup",u,{once:!0}),e.removeEventListener("pointercancel",u,{once:!0}),c.removeEventListener("pointermove",a),i.delete(o.pointerId),n.call(e,o)}function a(t){(Math.abs(o.clientX-t.clientX)>1||Math.abs(o.clientY-t.clientY)>1)&&(clearTimeout(l),i.delete(t.pointerId),e.removeEventListener("pointerup",u,{once:!0}),e.removeEventListener("pointercancel",u,{once:!0}),c.removeEventListener("pointermove",a),o=null)}var l=0,c=document;function d(t){if(clearTimeout(l),c=t.view.document,i.add(t.pointerId),i.size>1)return t.preventDefault(),t.stopPropagation(),e.removeEventListener("pointerup",u,{once:!0}),e.removeEventListener("pointercancel",u,{once:!0}),void c.removeEventListener("pointermove",a);o=t,l=setTimeout(s,700),e.addEventListener("pointerup",u,{once:!0}),e.addEventListener("pointercancel",u,{once:!0}),c.addEventListener("pointermove",a)}function u(e){c.removeEventListener("pointermove",a),o=null,i.delete(e.pointerId),clearTimeout(l)}e.addEventListener("pointerdown",d),e.sf$eventDestroy_taphold=function(){e.removeEventListener("pointerdown",d)}},gesture:function(e,t,n,r){touchGesture(e,(function(t){n.call(e,t)}))},dragmove:function(e,t,n,r){function i(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),n.call(e,t)}function o(e){e.preventDefault()}e.style.touchAction="none";var s=document,a=function(t){t.preventDefault(),t.stopPropagation(),n.call(e,t),(s=t.view.document).addEventListener("pointermove",i),s.addEventListener("touchmove",o,{passive:!1}),s.addEventListener("pointerup",l,{once:!0}),s.addEventListener("pointercancel",l,{once:!0})},l=function t(r){r.preventDefault(),r.stopPropagation(),n.call(e,r),(s=r.view.document).removeEventListener("pointermove",i),s.removeEventListener("touchmove",o,{passive:!1}),s.removeEventListener("pointercancel",t,{once:!0}),e.addEventListener("pointerdown",a,{once:!0})};e.addEventListener("pointerdown",a),e.sf$eventDestroy_dragmove=function(){e.removeEventListener("pointerdown",a,{once:!0}),document.removeEventListener("pointermove",i),document.removeEventListener("pointercancel",l,{once:!0}),document.removeEventListener("pointerup",l,{once:!0})}},filedrop:function(e,t,n,r){e.addEventListener("dragover",(function(e){e.preventDefault()})),e.addEventListener("drop",(function(t){if(t.preventDefault(),t.dataTransfer.items){for(var r=[],i=0;i<t.dataTransfer.items.length;i++)"file"===t.dataTransfer.items[i].kind&&r.push(t.dataTransfer.items[i].getAsFile());n.call(e,r)}else n.call(e,t.dataTransfer.files)})),e.sf$eventDestroy_filedrop=function(){e.removeEventListener("dragover",dragover),e.removeEventListener("drop",drop)}}};function touchGesture(e,t){var n=0,r=0,i=0,o=0,s="",a=!1,l=[];function c(e,t){for(var n=l.length-1;n>=0;n--)if(l[n].pointerId===t.pointerId)return void(2===e?l.splice(n,1):1===e&&(l[n]=t));0===e&&l.push(t)}var d=document,u=function(u){if(u.preventDefault(),c(0,u),d=u.view.document,1===l.length&&(a&&l.unshift({pointerId:"custom",clientX:e.offsetLeft+e.offsetWidth/2,clientY:e.offsetTop+e.offsetHeight/2}),s=e.style.touchAction,e.style.touchAction="none",d.addEventListener("pointerup",p),d.addEventListener("pointercancel",p)),2===l.length){u.stopPropagation();var h=l[1].clientX-l[0].clientX,v=l[1].clientY-l[0].clientY;i=n=.01*Math.sqrt(Math.pow(h,2)+Math.pow(v,2)),o=r=Math.atan2(v,h)*toDegree,u.scale=u.angle=u.totalScale=u.totalAngle=0,t(u),d.addEventListener("pointermove",f)}else d.removeEventListener("pointermove",f)},f=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),c(1,e);var s=l[0],a=l[1],d=a.clientX-s.clientX,u=a.clientY-s.clientY,f=.01*Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),p=Math.atan2(u,d)*toDegree;e.scale=f-i,e.angle=p-o,e.totalScale=f-n,e.totalAngle=p-r,t(e),i=f,o=p},p=function a(u){u.preventDefault(),c(2,u),l.length<=1?(0===l.length&&(d.removeEventListener("pointerup",a),d.removeEventListener("pointercancel",a)),e.style.touchAction=s,d.removeEventListener("pointermove",f),u.scale=u.angle=0,u.totalScale=i-n,u.totalAngle=o-r,t(u)):(d.addEventListener("pointerup",a),d.addEventListener("pointercancel",a),2===l.length&&(d.removeEventListener("pointermove",f),u.scale=u.angle=0,t(u)))};e.addEventListener("pointerdown",u),e.sf$eventDestroy_gesture=function(){e.removeEventListener("pointerdown",u),$(sf.window).off("keydown",v)};var h=function e(t){a&&!t.ctrlKey&&(a=!1,l.length=0,d.removeEventListener("pointermove",f),d.removeEventListener("keyup",e))},v=function(e){e.ctrlKey&&(d=e.view.document,a=!0,d.addEventListener("keyup",h))};$(sf.window).on("keydown",v)}var inputBoundRunning=!1,callInputListener=function(e,t){var n=e.sfModel["v2m$".concat(e.sfBounded)],r=e.sfModel["on$".concat(e.sfBounded)];if(void 0!==n||void 0!==r){var i,o=e.sfModel[e.sfBounded];null!=o&&o.constructor===Array&&(o=o.slice(0));try{void 0!==n&&(i=n.call(e.sfModel,t)),void 0!==r&&void 0!==(i=r.call(e.sfModel,t,!1))&&(e.sfFeedback=!0)}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}return i}},inputTextBound=function(e){if(!0!==e.fromSFFramework){var t=inputBoundRunning=e.target;t.viewInputted=!0;var n=t.typeData===Number?Number(t.value):t.value,r=callInputListener(t,n);t.sfFeedback&&(t.sfFeedback=!1,t.value=r),t.sfModel[t.sfBounded]=void 0!==r?r:n}},inputFilesBound=function(e){if(!0!==e.fromSFFramework){var t=e.target,n=callInputListener(t,t.files);if(void 0!==n)if(n&&0!==n.length){for(var r=new DataTransfer,i=0;i<n.length;i++)r.items.add(n[i]);t.sfModel[t.sfBounded]=r.files,t.sfFeedback&&(t.sfFeedback=!1,t.files=r.files)}else t.value="";else t.sfModel[t.sfBounded]=t.files}},inputCheckBoxBound=function(e){if(!0!==e.fromSFFramework){var t=inputBoundRunning=e.target;t.viewInputted=!0;var n,r=t.sfModel,i=r[t.sfBounded].constructor;n=i===Boolean||t.typeData===Boolean?t.checked:t.typeData===Number?Number(t.value):t.value;var o=callInputListener(t,n);if(void 0!==o&&(n=o,t.sfFeedback&&(t.sfFeedback=!1,assignElementData.checkbox(n,t))),i===Array){var s=r[t.sfBounded].indexOf(n);-1===s&&!0===t.checked?r[t.sfBounded].push(n):-1!==s&&!1===t.checked&&r[t.sfBounded].splice(s,1)}else r[t.sfBounded]=n}},inputSelectBound=function(e){if(!0!==e.fromSFFramework){var t=inputBoundRunning=e.target;t.viewInputted=!0;var n=t.typeData,r=[];if(!0===t.multiple)for(var i=t.selectedOptions,o=0;o<i.length;o++)r.push(n===Number?Number(i[o].value):i[o].value);else r=n===Number?Number(t.selectedOptions[0].value):t.selectedOptions[0].value;var s=callInputListener(t,r);void 0!==s?(t.sfFeedback&&(t.sfFeedback=!1,assignElementData.select(s,t)),t.sfModel[t.sfBounded]=s):t.sfModel[t.sfBounded]=r}},assignElementData={select:function(e,t){var n=t.options,r=t.typeData;if(e.constructor!==Array)for(var i=0,o=n.length;i<o;i++)n[i].selected=r===String?n[i].value===e:n[i].value==e;else for(i=0,o=n.length;i<o;i++)n[i].selected=e.includes(r===Number?Number(n[i].value):n[i].value)},checkbox:function(e,t){e.constructor===Array?t.checked=e.includes(t.typeData===Number?Number(t.value):t.value):e.constructor===Boolean?t.checked=Boolean(e):t.typeData===String?t.checked=t.value===e:t.checked=t.value==e},file:function(e,t){if(e&&0!==e.length){for(var n=new DataTransfer,r=0;r<e.length;r++)n.items.add(e[r]);t.files=n.files}else t.value=""}},inputBoundRun=function(e,t){if(null!=e)for(var n=0;n<t.length;n++)if(inputBoundRunning!==t[n]){if(1===t.type)t[n].value=e;else if(2===t.type)assignElementData.select(e,t[n]);else if(3===t.type)t[n].checked=e==t[n].value;else if(4===t.type)assignElementData.checkbox(e,t[n]);else if(5===t.type){assignElementData.file(e,t[n]);continue}var r=new Event("change");r.fromSFFramework=!0,t[n].dispatchEvent(r)}};inputBoundRun.inputBoundRun=!0;var triggerInputEvent=function(e){!0!==e.fromSFFramework&&(!0!==e.target.viewInputted?e.target.dispatchEvent(new Event("input")):e.target.viewInputted=!1)},elementBoundChanges=function(e,t,n,r,i,o){void 0===e.sf$bindedKey&&initBindingInformation(e);var s=e[t],a=0,l=null;if(null!=s&&(l=s.constructor),"number"===(n.getAttribute("typedata")||"").toLowerCase()&&(l=Number),n.typeData=l,$.on(n,"change",triggerInputEvent),"TEXTAREA"===n.tagName)$.on(n,"input",inputTextBound),a=1,!1===r&&(n.value=s);else if(void 0!==n.selectedOptions)$.on(n,"input",inputSelectBound),a=2,assignElementData.select(s,n);else{"radio"===(a=n.type.toLowerCase())?($.on(n,"input",inputTextBound),a=3,n.checked=s==n.value):"checkbox"===a?($.on(n,"input",inputCheckBoxBound),a=4,assignElementData.checkbox(s,n)):"file"===a?($.on(n,"input",inputFilesBound),a=5):($.on(n,"input",inputTextBound),a=1,!1===r&&(n.value=s))}!0!==r&&modelToViewBinding(i,o||t,inputBoundRun,n,a)},bindInput=internal.model.bindInput=function(e,t,n,r){for(var i,o,s,a=0;a<e.length;a++)if(void 0===e[a].getAttribute?(i=e[a].el,o=1===e[a].id,s=e[a].rule):(s=(o=(i=e[a]).hasAttribute("sf-into"))?i.getAttribute("sf-into"):i.getAttribute("sf-bind"),!1===o?i.removeAttribute("sf-bind"):i.removeAttribute("sf-into")),""===s&&(s=i.getAttribute("name")),null!==s){var l=t,c=t;void 0!==n&&(0===s.indexOf(n+".")?s=s.replace(/\w+\./,""):c=l=r);var d=null;if(void 0===l[s]){var u=parsePropertyPath(s);if(d=u.slice(),1!==u.length){var f=u.pop();u=deepProperty(l,u)}else u=void 0;if(void 0===u)return void console.error("Can't get property \"".concat(s,'" on model'),l);l=u,s=f}i.sfBounded=s,i.sfModel=l,elementBoundChanges(l,s,i,o,c,d)}else console.error("Property key to be bound wasn't be found",i)},dataParser=function(e,t,n,r,i,o){var s=[],a=i.length;return e.replace(sfRegex.dataParser,(function(e,l){l=(l=avoidQuotes(l,(function(e){return e=e.split("&amp;").join("&").split("&lt;").join("<").split("&gt;").join(">"),void 0!==n.modelRef_regex&&(e=e.replace(n.modelRef_regex,(function(e,t,n){return t+"_model_"+n}))),e.replace(n.modelRefRoot_regex,(function(e,t,n){return t+"_modelScope."+n}))}))).trim();var c=s.indexOf(l);return-1===c?(s.push(l),!0===o?i.push(l):i.push({type:REF_DIRECT,data:[l,t,r]}),"{{%=".concat(s.length+a-1,"%")):"{{%=".concat(c+a,"%")}))},uniqueDataParser=function(e,t,n){e=e.replace(sfRegex.allTemplateBracket,(function(e,r){if(!1===sfRegex.anyCurlyBracket.test(r))return"_result_ += '".concat(r.split("\\").join("\\\\").split("'").join("\\'").split("\n").join("\\\n"),"'");var i=[];return r=dataParser(r,null,t,n,i,!0).split("\\").join("\\\\").split('"').join('\\"').split("\n").join("\\\n"),'_result_ += (function(){return _escapeParse("'.concat(r,'", [').concat(i.join(",")," ])}).apply(null, arguments);")}));var r=[];return[e.replace(sfRegex.uniqueDataParser,(function(e,i){var o=!1;if(1!==(o=(i=avoidQuotes(i,(function(e){return e=e.split("&amp;").join("&").split("&lt;").join("<").split("&gt;").join(">"),void 0!==t.modelRef_regex&&(e=e.replace(t.modelRef_regex,(function(e,t,n){return t+"_model_"+n}))),e.replace(t.modelRefRoot_regex,(function(e,t,n){return t+"_modelScope."+n}))}))).split("@if ")).length){var s=(o=o[1].split(":")).shift(),a=findElse(o);a.type=REF_IF,a.data=[null,n],a.if=[s.trim(),a.if.trim()],null!==a.elseValue&&(a.elseValue=a.elseValue.trim());for(var l=0;l<a.elseIf.length;l++){var c=a.elseIf[l];c[0]=c[0].trim(),c[1]=c[1].trim()}return r.push(a),"{{%%=".concat(r.length-1)}return 1!==(o=i.split("@exec")).length?(r.push({type:REF_EXEC,data:[o[1],null,n]}),"{{%%=".concat(r.length-1)):""})),r]},findElse=function(e){var t=null;2===(t=(e=(e=e.join(":")).split("@elseif "))[e.length-1].split("@else")).length?(e[e.length-1]=t[0],t=(t=t.pop()).substr(t.indexOf(":")+1)):t=null;var n={if:e.shift(),elseValue:t};n.elseIf=new Array(e.length);for(var r=0;r<e.length;r++){var i=e[r].split(":");n.elseIf[r]=[i.shift(),i.join(":")]}return n};function addressAttributes(e,t){for(var n=e.attributes,r=[],i=0,o=n.length-1;o>=0;o--){var s=n[o],a=s.value.includes("{{%=");if("@"===s.name[0]){if(a){console.error("To avoid vulnerability, template can't be used inside event callback",e);continue}t.modelRef_regex&&(s.value=s.value.replace(t.modelRef_regex,(function(e,t,n){return t+"_model_"+n}))),r.push({name:s.name,value:s.value.trim(),event:!0}),e.removeAttribute(s.name)}if(a){if(":"===s.name[0]){var l={name:s.name.slice(1),value:s.value.trim()};e.removeAttribute(s.name),e.setAttribute(l.name,"")}else{l={name:s.name,value:s.value.trim()};s.value=""}i=[],""===(a=l.value.replace(templateParser_regex,(function(e,t){return i.push(Number(t)),""})))&&1===i.length?l.direct=i[0]:(l.parse_index=i,l.value=l.value.replace(/[\t\r\n]/g,"").replace(/ {2,}/g," ").split(templateParser_regex_split),parseIndexAllocate(l.value)),r.push(l)}}return r}function toObserve(e,t,n){var r="_model_"===t?toObserve.template.modelRef:toObserve.template.modelRefRoot;return void 0===r[n]?(r[n]=[toObserve.template.i],r===toObserve.template.modelRef?toObserve.template.modelRef_path.push(parsePropertyPath(n)):toObserve.template.modelRefRoot_path.push(parsePropertyPath(n))):!1===r[n].includes(toObserve.template.i)&&r[n].push(toObserve.template.i),e}internal.model.templateInjector=function(e,t,n){var r=e.getElementsByTagName("sf-reserved"),i=e.getElementsByTagName("sf-template");if(0!==i.length){if(void 0===(l=window.templates))throw new Error("<sf-template> need `window.templates` to be loaded first");for(var o=i.length-1;o>=0;o--){var s=(c=i[o]).getAttribute("path");null===s&&null!==(s=c.getAttribute("get-path"))&&(s=deepProperty(window,parsePropertyPath(s))),null!==s?void 0!==s&&("."===s[0]&&void 0!==e.templatePath&&(s=s.replace("./",e.templatePath)),d=l[s]):(s=c.getAttribute("get-html"),d=deepProperty(window,parsePropertyPath(s))),void 0!==d?(d=toArray($.parseElement(d)),$(d).insertBefore(c.nextSibling||c),c.remove()):(console.log(c,"Template path was not found",s),c.remove())}}var a=0!==r.length;if(!0===n&&!0===a){e.sf$hasReserved=!0,e.sf$componentIgnore=!0;var l=internal.component.skip;internal.component.skip=!0,a=e.cloneNode(!0),internal.component.skip=l}if(0!==r.length)if(void 0===t.sf$reserved)for(o=r.length-1;o>=0;o--)r[o].remove();else for(l=t.sf$reserved,o=r.length-1;o>=0;o--){var c,d;void 0!==(d=l[(c=r[o]).getAttribute("name")])?(d=$.parseElement(d),$(d).insertBefore(c.nextSibling||c),c.remove()):c.remove()}return a};var createModelKeysRegex=internal.model.createModelKeysRegex=function(e,t,n){var r=self.modelKeys(t,!0);if(0===r.length)throw console.error(t,$(e.outerHTML)[0]),new Error("Template model was not found, maybe some script haven't been loaded");var i={};return i.modelRefRoot_regex=RegExp(sfRegex.scopeVar+"("+r+")","g"),null!==n&&(i.modelRef_regex=RegExp(sfRegex.getSingleMask.join(n),"gm")),i.modelRef_regex_mask=n,i};self.extractPreprocess=function(e,t,n,r,i,o,s){if(void 0!==e.model)return console.error("[Violation] element already has a model, template extraction aborted",e,e.model,t,n);for(var a,l=e.querySelectorAll("[sf-repeat-this]"),c=0;c<l.length;c++){var d=l[c];(C=document.createElement("template")).classList.add("sf-repeat-this-prepare"),d.parentNode.replaceChild(C,d)}(a=void 0===i.parse?Object.create(i):{modelRefRoot_regex:i.modelRefRoot_regex,modelRef_regex:i.modelRef_regex,modelRef_regex_mask:i.modelRef_regex_mask}).modelRef_regex_mask!==t&&(a.modelRef_regex=RegExp(sfRegex.getSingleMask.join(t),"gm"),a.modelRef_regex_mask=t),a.modelRefRoot={},a.modelRefRoot_path=[],null!==t&&(a.modelRef={},a.modelRef_path=[]);var u=e.outerHTML.replace(/[ \t]{2,}/g," "),f=(u=uniqueDataParser(u,a,n))[1];u=dataParser(u[0],null,a,n,f);var p=internal.component.skip;internal.component.skip=!0,void 0!==r&&(u="<".concat(r,">").concat(u,"</").concat(r,">")),u=$.parseElement(u,!0)[0],void 0!==r&&(u=u.firstElementChild).remove(),internal.component.skip=p;var h=u.getElementsByClassName("sf-repeat-this-prepare");for(c=0;c<l.length;c++){(d=h[0]).parentNode.replaceChild(l[c],d)}a.specialElement={repeat:[],input:[]};var v=Array.from(self.queuePreprocess(u,!0,a.specialElement)),m=[];for(c=v.length-1;c>=0;c--){var g={nodeType:(M=v[c]).nodeType};if(1===g.nodeType)g.attributes=addressAttributes(M,a),g.address=$.getSelector(M,!0);else if(3===g.nodeType){var y=M.textContent,b=[];if(y.replace(/{{%%=([0-9]+)/gm,(function(e,t){b.push(Number(t))})),0!==b.length){y=y.split(/{{%%=[0-9]+/gm);for(var w=0;w<y.length;w++)y[w]=trimIndentation(y[w]).trim();M.textContent=y.shift();var E=M.parentNode,_=M.nextSibling,k=null;0!==b.length&&0!==M.textContent.length?k=$.getSelector(M,!0):null!==M.previousSibling&&(k=$.getSelector(M.previousSibling,!0));var P=m.length;for(w=0;w<b.length;w++){var C=document.createComment("");if(E.insertBefore(C,_),m.push({nodeType:-1,parse_index:b[w],startFlag:k,address:$.getSelector(C,!0)}),y[w]){var R=document.createTextNode(y[w]);E.insertBefore(R,_),w+1<b.length&&(k=$.getSelector(R,!0))}else null!==k&&w+1<b.length&&(k=k.slice())[k.length-1]++}if(""===M.textContent){M.remove();for(w=P;w<m.length;w++){var M;(M=m[w].address)[M.length-1]--}continue}if(-1===M.textContent.search(/{{%=[0-9]+%/))continue}b=[],""===(y=M.textContent.replace(templateParser_regex,(function(e,t){return b.push(Number(t)),""})))&&1===b.length?g.direct=b[0]:(g.value=M.textContent.replace(/[ \t]{2,}/g," ").split(templateParser_regex_split),parseIndexAllocate(g.value),g.parse_index=b),g.address=$.getSelector(M,!0),M.textContent="-"}m.push(g)}if(toObserve.template=a,function(){for(var e=0;e<f.length;e++){var n=f[e];if(n.type!==REF_DIRECT){if(n.type===REF_IF){var r=n.if.join(";");n.if[0]=modelScript(t,n.if[0],s),n.if[1]=modelScript(t,n.if[1],s),null!==n.elseValue&&(r+=";".concat(n.elseValue),n.elseValue=modelScript(t,n.elseValue,s));for(var i=0;i<n.elseIf.length;i++){var o=n.elseIf[i];r+=o.join(";"),o[0]=modelScript(t,o[0],s),o[1]=modelScript(t,o[1],s)}}else if(n.type===REF_EXEC){r=n.data.shift();n.get=modelScript(t,r,s)}toObserve.template.i=e,r.split('"').join("'").replace(sfRegex.itemsObserve,toObserve)}else toObserve.template.i=e,n.data[0]=n.data[0].replace(sfRegex.itemsObserve,toObserve,a,!0),n.get=modelScript(t,n.data.shift(),s)}}(),delete toObserve.template.i,toObserve.template=void 0,revalidateTemplateRef(a,n),0!==a.specialElement.input.length){var O=a.specialElement.input;for(c=0;c<O.length;c++){var S,x;(T=O[c]).hasAttribute("sf-into")?(S=1,x=T.getAttribute("sf-into"),T.removeAttribute("sf-into")):(S=2,x=T.getAttribute("sf-bind"),T.removeAttribute("sf-bind")),O[c]={addr:$.getSelector(T,!0),rule:x,id:S}}}else delete a.specialElement.input;if(0!==a.specialElement.repeat.length){var L=a.specialElement.repeat;for(c=0;c<L.length;c++){var T=L[c];L[c]={addr:$.getSelector(T,!0),rule:T.getAttribute("sf-repeat-this")},T.removeAttribute("sf-repeat-this")}}else a.specialElement.input?delete a.specialElement.repeat:delete a.specialElement;return a.html=u,a.parse=f,a.addresses=m,void 0===o&&void 0!==i.parse&&(delete a.modelRefRoot_regex,delete a.modelRef_regex,delete a.modelRef_regex_mask),a};var enclosedHTMLParse=!1,excludes={HTML:1,HEAD:1,STYLE:1,LINK:1,META:1,SCRIPT:1,OBJECT:1,IFRAME:1};function initBindingInformation(e){void 0===e.sf$bindedKey&&Object.defineProperty(e,"sf$bindedKey",{configurable:!0,writable:!0,value:{}})}function revalidateTemplateRef(e,t){revalidateBindingPath(e.modelRefRoot,e.modelRefRoot_path,t),void 0!==e.modelRef_path&&0!==e.modelRef_path.length&&(e.modelRef_path.revalidate=!0,revalidateBindingPath(e.modelRef,e.modelRef_path,t))}function revalidateBindingPath(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],o=deepProperty(n,i.slice(0,-1));if(i.includes("constructor")){for(var s in e)s.includes(".constructor")&&delete e[s];for(var a=r+1;a<t.length;a++)t[a].includes("constructor")&&t.splice(a--,1);return void t.splice(r,1)}if(void 0!==o)if(o.constructor===String||o.constructor===Number){i.length>3&&i[i.length-2].constructor===Number?i.splice(i.length-2):i.splice(i.length-1);e:for(a=r+1;a<t.length;a++){for(var l=t[a],c=0;c<i.length;c++)if(l[c]!==i[c])continue e;t.splice(a--,1)}var d=stringifyPropertyPath(i),u=[];for(var s in e)if(0===s.indexOf(d)){var f=e[s];delete e[s];for(a=0;a<f.length;a++)!1===u.includes(f[a])&&u.push(f[a])}e[d]=u}else if(o.constructor===Array&&"length"===i[i.length-1]||o.constructor===Function){d=stringifyPropertyPath(i);for(var s in e)0===s.indexOf(d)&&delete e[s]}}}self.queuePreprocess=function(e,t,n,r){var i=e.childNodes;if(void 0===r){r=new Set;for(var o=e.attributes,s=0;s<o.length;s++)if("@"===o[s].name[0]||o[s].value.includes("{{")){r.add(e),e.sf$onlyAttribute=!0;break}}for(var a=i.length-1;a>=0;a--){var l=i[a];if(void 0===excludes[l.nodeName])if(1===l.nodeType){if(!0===enclosedHTMLParse)continue;if("SF-M"===l.tagName||void 0!==l.model)continue;if(void 0!==(o=l.attributes)["sf-repeat-this"]){n.repeat.push(l);continue}if(void 0===o["sf-into"]&&void 0===o["sf-bind"]||n.input.push(l),!1===l.hasAttribute("sf-parse")&&l.tagName.includes("-")&&("SF-PAGE-VIEW"!==l.tagName||!1===l.parentNode.hasAttribute("sf-parse")))continue;for(s=0;s<o.length;s++)if("@"===o[s].name[0]||o[s].value.includes("{{")){r.add(l),l.sf$onlyAttribute=!0;break}0!==l.childNodes.length&&self.queuePreprocess(l,t,n,r)}else if(3===l.nodeType){if(0===l.textContent.trim().length){0===l.textContent.length?l.remove():l.textContent=l.textContent.slice(0,2);continue}var c=l.textContent.indexOf("{[");if(-1!==c)enclosedHTMLParse=!1;else if(!0===enclosedHTMLParse)continue;var d=l.textContent.indexOf("]}");if(-1!==d&&(-1===c||c>d)){enclosedHTMLParse=!0;continue}if(l.textContent.includes("{{")){if(void 0===t){var u=l.parentNode;l.textContent.includes("{{@")||-1!==c?r.add(u):r.add(l),void 0!==u.sf$onlyAttribute&&delete u.sf$onlyAttribute;continue}r.has(l)||(r.add(l),void 0!==l.parentNode.sf$onlyAttribute&&delete l.parentNode.sf$onlyAttribute)}}}return r},self.parsePreprocess=function(e,t,n){var r,i=new WeakSet,o=_createForOfIteratorHelper(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(processingElement=s,3!==s.nodeType||!1!==i.has(s.parentNode))if(void 0===s.sf$onlyAttribute)3!==s.nodeType&&self.bindElement(s,t,void 0,void 0,n);else{var a=[],l=Object.create(n);l.parse=a,l.modelRefRoot={},l.modelRefRoot_path=[];for(var c=s.attributes,d=0;d<c.length;d++){var u=c[d];u.value.includes("{{")&&(u.value=dataParser(u.value,null,l,t,a))}l.addresses=addressAttributes(s,l),toObserve.template=l;for(d=0;d<a.length;d++){var f=a[d];f.type!==REF_DIRECT||(toObserve.template.i=d,f.data[0]=f.data[0].replace(sfRegex.itemsObserve,toObserve),f.get=modelScript(void 0,f.data.shift()))}delete toObserve.template.i,toObserve.template=void 0,revalidateTemplateRef(l,t);var p=templateExec(a,t),h=[];parserForAttribute(s,l.addresses,null,t,p,h,void 0,l),0!==h.length&&(h.template=l,s.sf$elementReferences=h),self.bindElement(s,t,l),delete s.sf$onlyAttribute}else{if("SF-M"===s.parentNode.tagName){var v=document.createElement("span");s.parentNode.insertBefore(v,s),v.appendChild(s)}self.bindElement(s.parentNode,t,void 0,void 0,n),i.add(s.parentNode)}}}catch(e){o.e(e)}finally{o.f()}};var repeatedListBinding=internal.model.repeatedListBinding=function(e,t,n,r){for(var i,o,s=0;s<e.length;s++){if(void 0===e[s].getAttribute)i=e[s].el,o=e[s].rule;else{if(!(i=e[s]).hasAttribute("sf-repeat-this"))continue;o=i.getAttribute("sf-repeat-this"),i.removeAttribute("sf-repeat-this")}i.sf$componentIgnore=!0;var a=o.match(sfRegex.repeatedList);if(null!==a){(a=a.slice(1))[0].includes(",")&&(a[0]=a[0].split(" ").join("").split(","));var l=t[a[1]];if(void 0===l){var c=parsePropertyPath(a[1]);1!==c.length&&(a[1]=c,l=deepProperty(t,c),t.sf$internal&&(t.sf$internal[c.slice(0,-1).join("%$")]=!0)),void 0===l&&(t[a[1]]=l=[])}else void 0===t.sf$bindedKey&&initBindingInformation(t),t.sf$bindedKey[a[1]]=!0;var d=l.constructor;d!==Array&&d!==RepeatedList?d!==Object&&d!==RepeatedProperty?console.error(a[1],l,"should be an array or object but got",d):RepeatedProperty.construct(t,i,a,i.parentNode,n,r):RepeatedList.construct(t,i,a,i.parentNode,n,r)}else console.error("'",o,"' should match the pattern like `key,val in list`")}};function prepareRepeated(e,t,n,r,i,o){var s,a,l=n[1];l.constructor!==Array?a=e:(a=deepProperty(e,l.slice(0,-1)),l=l[l.length-1]),s=a["on$".concat(l)]||{};var c=(i||sf.component).registered[t.tagName.toLowerCase()];void 0!==c&&!1===c[3]&&0!==t.childNodes.length&&(c[3]=t);var d=void 0!==c&&c[1],u=new ElementManipulator;if(void 0===this.$EM)hiddenProperty(this,"$EM",u,!0),Object.defineProperty(a,"on$".concat(l),{configurable:!0,get:function(){return s},set:function(e){Object.assign(s,e)}});else if(this.$EM.constructor===ElementManipulatorProxy)this.$EM.list.push(u);else{var f=[this.$EM,u];this.$EM=new ElementManipulatorProxy,this.$EM.list=f}var p,h,v,m=n[0];(m.constructor===Array&&(p=m[0],m=m.pop()),u.asScope=void 0,d)?t.hasAttribute("sf-as-scope")&&(u.asScope=!0):(processingElement=t,"http://www.w3.org/2000/svg"===t.namespaceURI&&"SVG"!==t.tagName&&(v="svg"),(h=self.extractPreprocess(t,m,e,v,o,!0,p)).bindList=this);u.template=d||h,u.list=this,u.parentNode=r,u.modelRef=e,u.isComponent=!!d,u.namespace=i,u.template.mask=m,u.elementRef=new WeakMap,u.callback=s,r.$EM=u,void 0!==p&&(u.template.uniqPattern=p);var g=t.nextSibling;if(t.remove(),r.childNodes.length<=1||0===r.textContent.trim().length)return!0;var y=this;return function(){u.bound_end=document.createComment(""),r.insertBefore(u.bound_end,g),void 0!==y.length?u.elements=new Array(y.length):u.elements=[],injectArrayElements(u,r,u.bound_end,y,e,r)}}var RepeatedProperty=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"$el",value:function(e){var t=this.$EM;return t.constructor===ElementManipulatorProxy?t.$el(e):$(queryElements(t.parentChilds||t.elements,e))}},{key:"getElement",value:function(e){var t=this.$EM;return t.constructor===ElementManipulatorProxy&&(t=t.list[0]),"object"===_typeof(this[e])?t.elementRef.get(this[e]):(t.parentChilds||t.elements)[this._list.indexOf(e)]}},{key:"getElements",value:function(e){return this.$EM.constructor===ElementManipulatorProxy?this.$EM.getElement_RP(this,e):[this.getElement(e)]}},{key:"refresh",value:function(){if(this.$EM.constructor===ElementManipulatorProxy)return this.$EM.refresh_RP(this);var e=this.$EM.parentChilds||this.$EM.elements;if(void 0!==e)for(var t=this._list,n=0;n<t.length;n++){var r=e[n];if(this[t[n]]!==r.model){var i=this.$EM.createElement(t[n]);this.$EM.parentNode.replaceChild(i,r),void 0!==this.$EM.elements&&(e[n]=i)}}}}],[{key:"construct",value:function(t,n,r,i,o,s){var a=r[1],l=a.constructor===String?t[a]:deepProperty(t,a);if(l.constructor!==e){for(var c in l)c.includes("$")&&hiddenProperty(l,c,l[c],!0);var d;hiddenProperty(l,"_list",Object.keys(l)),a.constructor!==Array?d=t:(d=deepProperty(t,a.slice(0,-1)),a=a[a.length-1]),Object.setPrototypeOf(l,e.prototype),Object.defineProperty(d,a,{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){for(var t=l._list,n=Object.keys(e),r=0;r<t.length&&t[r]===n[r];r++)l[t[r]]=e[t[r]];if(r!==n.length||void 0!==t[r]){for(var i=r;i<t.length;i++)l.delete(t[i]);for(i=r;i<n.length;i++)l.set(n[i],e[n[i]]);l._list=n}}})}var u=prepareRepeated.apply(l,arguments),f=l.$EM.constructor===ElementManipulatorProxy?l.$EM.list[l.$EM.list.length-1]:l.$EM;for(var p in l)ProxyProperty(l,p,!0);!0===u?(f.parentChilds=i.children,injectArrayElements(f,i,void 0,l,t,i,o)):u()}}]),e}();function ProxyProperty(e,t,n){if(n||void 0===Object.getOwnPropertyDescriptor(e,t).set){var r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return r},set:function(n){r=n,e.refresh(t)}})}}function injectArrayElements(e,t,n,r,i,o,s){var a,l=e.isComponent,c=e.template;r.constructor===RepeatedProperty&&(a=r,r=Object.values(r));for(var d,u=r.length,f=0;f<u;f++)d=l?new c(r[f],s,e.asScope):templateParser(c,r[f],!1,i,o,void 0,void 0===a?c.uniqPattern&&f:c.uniqPattern&&a._list[f]),"object"===_typeof(r[f])&&(!1===l&&self.bindElement(d,i,c,r[f]),e.elementRef.set(r[f],d)),void 0===n?t.appendChild(d):!0===n?e.elements[f]=d:(e.elements[f]=d,t.insertBefore(d,n));if(void 0!==a){f=0;for(var p in a)a[p]=r[f++]}}sf.set=function(e,t,n){e[t]!==n&&(void 0!==e.$EM?void 0===e[t]&&(e[t]=n,ProxyProperty(e,t,!1),e.$EM.append(t),e._list.push(t)):e[t]=n)},sf.delete=function(e,t){if(void 0!==e.$EM){var n=e._list.indexOf(t);-1!==n&&(e.$EM.remove(n),delete e[t],e._list.splice(n,1))}else delete e[t]};var RepeatedList=function(e){_inherits(t,_wrapNativeSuper(Array));_createSuper(t);function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(void 0,new Array(e))}return _createClass(t,[{key:"$el",value:function(e){var t=this.$EM;return t.constructor===ElementManipulatorProxy?t.$el(e):$(queryElements(t.parentChilds||t.elements,e))}},{key:"pop",value:function(){return this.$EM.remove(this.length-1),Array.prototype.pop.apply(this,arguments)}},{key:"push",value:function(){var e=this.length;return Array.prototype.push.apply(this,arguments),1===arguments.length?this.$EM.append(e):this.$EM.hardRefresh(e),this.length}},{key:"splice",value:function(){if(0===arguments[0]&&void 0===arguments[1])return this.$EM.clear(0),Array.prototype.splice.apply(this,arguments);var e=this.length,t=Array.prototype.splice.apply(this,arguments),n=arguments[0];n<0&&(n=e+n);var r=arguments[1];r||0===r||(r=this.length);for(var i=r-1;i>=0;i--)this.$EM.remove(n+i);if(arguments.length>=3){r=arguments.length-2,n>=this.length&&(n=this.length-1);for(i=0;i<r;i++)this.$EM.insertAfter(n+i)}return t}},{key:"shift",value:function(){var e=Array.prototype.shift.apply(this,arguments);return this.$EM.remove(0),e}},{key:"unshift",value:function(){if(Array.prototype.unshift.apply(this,arguments),1===arguments.length)this.$EM.prepend(0);else for(var e=arguments.length-1;e>=0;e--)this.$EM.prepend(e);return this.slice(0,arguments.length)}}],[{key:"construct",value:function(e,n,r,i,o,s){var a,l=r[1],c=l.constructor===String?e[l]:deepProperty(e,l);c.constructor!==t&&(l.constructor!==Array?a=e:(a=deepProperty(e,l.slice(0,-1)),l=l[l.length-1]),Object.setPrototypeOf(c,t.prototype),Object.defineProperty(a,l,{enumerable:!0,configurable:!0,get:function(){return c},set:function(e){0===e.length?c.splice(0):c.remake(e,!0)}}));var d=prepareRepeated.apply(c,arguments),u=c.$EM.constructor===ElementManipulatorProxy?c.$EM.list[c.$EM.list.length-1]:c.$EM,f=u.template;i.classList.contains("sf-virtual-list")?(hiddenProperty(c,"$virtual",new VirtualScroll(u)),!0!==d&&console.warn("Virtual list was initialized when the container has another child that was not sf-repeated element.",i),u.elements=new Array(c.length),i.$VSM=u.$VSM=new VirtualScrollManipulator(i,u,f.html),injectArrayElements(u,i,!0,c,e,i,o),u.$VSM.startInjection()):!0===d?(u.parentChilds=i.children,injectArrayElements(u,i,void 0,c,e,i,o)):d(),setTimeout((function(){var e=internal.findScrollerElement(i);if(null!==e){internal.addScrollerStyle();var t=getComputedStyle(e);"hidden"===t.backfaceVisibility||t.overflow.includes("hidden")||e.classList.add("sf-scroll-element")}}),1e3)}}]),_createClass(t,[{key:"assign",value:function(e,t,n,r){if(e.constructor!==Number&&(void 0!==n&&n.constructor!==Boolean||(r=n),void 0!==t&&t.constructor===Object&&(n=t),t=e,e=0),t.constructor!==Array&&(t=[t]),void 0!==n){if(n.constructor===Object){var i={};for(var o in n){if("]"===o.slice(-1))switch(o.split("[")[1]){case"!]":void 0===i.b&&(i.b=[]),i.b.push({key:o[0],val:n[o]});break;case"<]":void 0===i.c&&(i.c=[]),i.c.push({key:o[0],val:n[o]});break;case"<=]":void 0===i.d&&(i.d=[]),i.d.push({key:o[0],val:n[o]});break;case">]":void 0===i.e&&(i.e=[]),i.e.push({key:o[0],val:n[o]});break;case">=]":void 0===i.f&&(i.f=[]),i.f.push({key:o[0],val:n[o]});break;default:void 0===i.a&&(i.a=[]),i.a.push({key:o[0],val:n[o]})}else void 0===i.a&&(i.a=[]),i.a.push({key:o[0],val:n[o]})}n=i}var s;!0===r&&(s=new WeakSet);e:for(var a=e;a<this.length&&(!0!==r||!s.has(this[a]));a++){if(n.constructor===Object){var l=this[a];if(void 0!==n.a)for(var c=0,d=n.a.length;c<d;c++){if(l[(u=n.a[c]).key]!==u.val)continue e}if(void 0!==n.b)for(c=0,d=n.b.length;c<d;c++){if(l[(u=n.b[c]).key]===u.val)continue e}if(void 0!==n.c)for(c=0,d=n.c.length;c<d;c++){if(l[(u=n.c[c]).key]>=u.val)continue e}if(void 0!==n.d)for(c=0,d=n.d.length;c<d;c++){if(l[(u=n.d[c]).key]>u.val)continue e}if(void 0!==n.e)for(c=0,d=n.e.length;c<d;c++){if(l[(u=n.e[c]).key]<=u.val)continue e}if(void 0!==n.f)for(c=0,d=n.f.length;c<d;c++){var u;if(l[(u=n.f[c]).key]<u.val)continue e}}else if(!n(this[a]))continue;if(0!==t.length){var f=t.shift();this[a]!==f&&Object.assign(this[a],f),!0===r?(s.add(this[a]),this.push(this.splice(a--,1)[0])):!1===r&&this.unshift(this.splice(a,1)[0])}else this.splice(a--,1)}return 0!==t.length&&(!1===r?this.unshift.apply(this,t):this.push.apply(this,t)),this}for(a=0;a<t.length&&a!==this.length;a++)this[a+e]!==t[a]&&Object.assign(this[a+e],t[a]);if(t.length===this.length||0!==e)return this;var p=this.length;return t.length>this.length?(Array.prototype.push.apply(this,t.slice(this.length)),this.$EM.hardRefresh(p),this):t.length<this.length?(Array.prototype.splice.call(this,t.length),this.$EM.removeRange(t.length,p),this):void 0}},{key:"remake",value:function(e,t){var n=this.length;if(e.length>=n&&0!==n){for(var r=n,i=0;i<n&&e[i]===this[i];i++)r--;if(0===r){if(e.length===n)return;return(o=e.slice(n)).unshift(n,0),void this.splice.apply(this,o)}if(r!==n){if(!0===t)(o=e.slice(i)).unshift(i,n-i),Array.prototype.splice.apply(this,o),this.refresh(i,n);return}}if(0===n)return Array.prototype.push.apply(this,arguments[0]),void this.$EM.hardRefresh(0);var o=[0,n];return Array.prototype.push.apply(o,arguments[0]),Array.prototype.splice.apply(this,o),!0!==arguments[1]?(this.$EM.clear(0),this.$EM.hardRefresh(0)):(this.length<n&&this.$EM.removeRange(this.length,n),this.$EM.hardRefresh(0,this.length)),this}},{key:"swap",value:function(e,t){if(e!==t){this.$EM.swap(e,t);var n=this[e];this[e]=this[t],this[t]=n}}},{key:"move",value:function(e,t,n){if(e!==t){void 0===n&&(n=1),this.$EM.move(e,t,n);var r=Array.prototype.splice.call(this,e,n);r.unshift(t,0),Array.prototype.splice.apply(this,r)}}},{key:"getElement",value:function(e){var t=this.$EM;return t.constructor===ElementManipulatorProxy&&(t=t.list[0]),e.constructor===Number?"object"!==_typeof(this[e])?(t.parentChilds||t.elements)[e]:t.elementRef.get(this[e]):t.elementRef.get(e)}},{key:"getElements",value:function(e){return this.$EM.constructor===ElementManipulatorProxy?this.$EM.getElement_RL(this,e):[this.getElement(e)]}},{key:"indexOf",value:function(e){if(void 0!==e.children&&e.children.constructor===HTMLCollection){if(e.sf$elementReferences&&e.sf$elementReferences.template.bindList||(e=findBindListElement(e)),null===e)return-1;arguments[0]=e.model}return Array.prototype.indexOf.apply(this,arguments)}},{key:"reverse",value:function(){this.$EM.reverse(),Array.prototype.reverse.call(this)}},{key:"refresh",value:function(e,t){void 0===e||e.constructor===String?(e=0,t=this.length):void 0===t?t=e+1:t<0?t=this.length+t:t+=e;var n=this.length-t;if(n<0&&(t+=n),this.$EM.constructor===ElementManipulatorProxy)var r=this.$EM.list[0].parentChilds||this.$EM.list[0].elements;else r=this.$EM.parentChilds||this.$EM.elements;for(var i=e;i<t;i++){if(void 0===r[i])return void this.$EM.hardRefresh(i);if(this.$EM.constructor===ElementManipulatorProxy)var o=this.$EM.list[0].elementRef.get(this[i]);else o=this.$EM.elementRef.get(this[i]);void 0!==o&&r[i].model===o.model||this.$EM.update(i,1)}}}]),t}(),ElementManipulator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createElement",value:function(e){var t=this.list[e];if(void 0!==t){var n=this.template,r=this.elementRef&&this.elementRef.get(t);return void 0!==r?(void 0===r.model.$el&&(!1===compareObject(r.model,t)?(r=templateParser(n,t,!1,this.modelRef,this.parentNode,void 0,n.uniqPattern&&e),"object"===_typeof(t)&&(!1===this.isComponent&&self.bindElement(r,this.modelRef,n,t),void 0!==this.elementRef&&this.elementRef.set(t,r))):void 0!==r.sf$bindedBackup&&(RE_restoreBindedList(this.modelRef,r.sf$bindedBackup),r.sf$bindedBackup=void 0)),this.$VSM&&this.$VSM.newElementInit(r,e-1),r):(r=n.constructor===Function?new n(t,this.namespace,this.asScope):templateParser(n,t,!1,this.modelRef,this.parentNode,void 0,n.uniqPattern&&e),"object"===_typeof(t)&&(!1===this.isComponent&&self.bindElement(r,this.modelRef,n,t),void 0!==this.elementRef&&this.elementRef.set(t,r)),this.$VSM&&this.$VSM.newElementInit(r,e-1),r)}}},{key:"hardRefresh",value:function(e){var t=this.list,n=this.parentChilds||this.elements;if(this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(n,e),0===e&&void 0===this.$VSM&&void 0===this.bound_end)this.parentNode.textContent="";else{if(this.parentChilds)for(var r=e,i=n.length;r<i;r++)n[e].remove();else for(r=e;r<n.length;r++)n[r].remove();void 0!==this.elements&&(n.length=e)}void 0!==this.elements&&(n.length=t.length);for(r=e;r<t.length;r++){var o=t[r],s=this.elementRef.get(o);void 0===s?(s=this.isComponent?new this.template(o,this.namespace,this.asScope):templateParser(this.template,o,!1,this.modelRef,this.parentNode,void 0,this.template.uniqPattern&&r),"object"===_typeof(o)&&(!1===this.isComponent&&self.bindElement(s,this.modelRef,this.template,o),this.elementRef.set(o,s),void 0!==this.elements&&(n[r]=s))):void 0===s.model.$el&&(!1===compareObject(s.model,o)?(s=templateParser(this.template,o,!1,this.modelRef,this.parentNode,void 0,this.template.uniqPattern&&r),"object"===_typeof(o)&&(!1===this.isComponent&&self.bindElement(s,this.modelRef,this.template,o),this.elementRef.set(o,s),void 0!==this.elements&&(n[r]=s))):void 0!==s.sf$bindedBackup&&(RE_restoreBindedList(this.modelRef,s.sf$bindedBackup),s.sf$bindedBackup=void 0)),void 0===this.$VSM?this.parentNode.appendChild(s):(n[r]=s,this.$VSM.newElementInit(s,r-1))}this.$VSM&&this.$VSM.hardRefresh(e)}},{key:"update",value:function(e,t){var n=this.parentChilds||this.elements,r=this.list,i=this.template;void 0===e?(e=0,t=r.length):void 0===t?t=e+1:t<0?t=r.length+t:t+=e;var o=r.length-t;o<0&&(t+=o),this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(n,e,t);for(var s=e;s<t;s++){var a=n[s];if(void 0===a||void 0===r[s])break;var l=r[s],c=this.elementRef.get(l);void 0===c?(c=this.isComponent?new i(l,this.namespace,this.asScope):templateParser(i,l,!1,this.modelRef,this.parentNode,void 0,i.uniqPattern&&s),"object"===_typeof(l)&&(!1===this.isComponent&&self.bindElement(c,this.modelRef,i,l),this.elementRef.set(l,c),null!=this.elements&&(n[s]=c))):void 0===c.model.$el&&(!1===compareObject(c.model,l)?(c=templateParser(i,l,!1,this.modelRef,this.parentNode,void 0,i.uniqPattern&&s),"object"===_typeof(l)&&(!1===this.isComponent&&self.bindElement(c,this.modelRef,i,l),this.elementRef.set(l,c),null!=this.elements&&(n[s]=c))):void 0!==c.sf$bindedBackup&&(RE_restoreBindedList(this.modelRef,c.sf$bindedBackup),c.sf$bindedBackup=void 0)),this.$VSM?(this.$VSM.newElementInit(c,s-1),this.$VSM.update(s,c)):(this.parentNode.replaceChild(c,a),null!=this.elements&&(n[s]=c),this.callback.update&&this.callback.update(c,"replace"))}}},{key:"move",value:function(e,t,n){var r=this.parentChilds||this.elements,i=this.list.length-e-n;i<0&&(n+=i);for(var o=new Array(n),s=0;s<n;s++)(o[s]=r[e+s]).remove();if(void 0===this.$VSM){var a=r[t]||null;for(s=0;s<n;s++)this.parentNode.insertBefore(o[s],a),this.callback.update&&this.callback.update(o[s],"move")}else this.$VSM.move(e,t,n,o);void 0!==this.elements&&(r.splice(e,n),o.unshift(e,0),r.splice.apply(r,o))}},{key:"swap",value:function(e,t){var n=this.parentChilds||this.elements,r=e,i=t;if(e>t){var o=n[t];t=n[e],e=o}else e=n[e],t=n[t];if(void 0!==this.elements){n[r];n[r]=n[i],n[i]=n[r]}if(void 0===this.$VSM){var s=t.nextSibling,a=t.parentNode;e.parentNode.insertBefore(t,e.nextSibling),a.insertBefore(e,s)}else this.$VSM.swap(r,i);this.callback.update&&(this.callback.update(n[t],"swap"),this.callback.update(n[e],"swap"))}},{key:"remove",value:function(e){var t=this.parentChilds||this.elements;if(this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(t,e,e+1),t[e]){var n=t[e];if(this.callback.remove){var r=!1,i=function(){r||(r=!0,n.remove())};this.callback.remove(n,i)||i()}else n.remove();this.$VSM&&this.$VSM.remove(e),void 0!==this.elements&&t.splice(e,1)}}},{key:"removeRange",value:function(e,t){for(var n=this.parentChilds||this.elements,r=e;r<t;r++)n[e].remove();this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(n,e,t),this.$VSM?this.$VSM.removeRange(e,t):void 0!==this.elements&&n.splice(e,t-e)}},{key:"clear",value:function(){this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(this.parentChilds||this.elements,0),this.parentNode.textContent="",void 0!==this.$VSM&&this.$VSM.clear(),void 0!==this.elements&&(this.elements.length=0)}},{key:"insertAfter",value:function(e){var t=this.parentChilds||this.elements,n=this.createElement(e);if(void 0===this.$VSM)if(0===t.length)this.parentNode.insertBefore(n,this.parentNode.lastElementChild);else{var r=t[e-1];r.parentNode.insertBefore(n,r.nextSibling)}void 0!==this.elements&&t.splice(e-1,0,n),this.$VSM&&this.$VSM.insertAfter(e),this.callback.create&&this.callback.create(n)}},{key:"prepend",value:function(e){var t=this.parentChilds||this.elements,n=this.createElement(e);if(void 0===this.$VSM){var r=t[0];void 0!==r?(r.parentNode.insertBefore(n,r),this.callback.create&&this.callback.create(n)):this.parentNode.insertBefore(n,this.parentNode.lastElementChild)}void 0!==this.elements&&t.unshift(n),this.$VSM&&this.$VSM.prepend(e)}},{key:"append",value:function(e){var t=this.parentChilds||this.elements,n=this.createElement(e);void 0!==this.elements&&t.push(n),void 0===this.$VSM?void 0!==this.bound_end?this.parentNode.insertBefore(n,this.bound_end):this.parentNode.appendChild(n):this.$VSM.append(e),this.callback.create&&this.callback.create(n)}},{key:"reverse",value:function(){if(void 0!==this.parentChilds){var e=this.parentChilds.length;if(0===e)return;for(var t=this.parentChilds[0],n=1;n<e;n++)this.parentNode.insertBefore(this.parentNode.lastElementChild,t)}else{var r=this.elements;if(r.reverse(),this.$VSM)return this.$VSM.reverse();if(void 0===this.bound_end)for(n=0;n<r.length;n++)this.parentNode.appendChild(r[n]);else for(n=0;n<r.length;n++)this.parentNode.insertBefore(r[n],this.bound_end)}}},{key:"clearBinding",value:function(e,t,n){void 0===n&&(n=this.list.length);var r=this.modelRef,i=this.template.modelRefRoot_path;if(e.constructor===Array)for(a=i.length-1;a>=0;a--){if(void 0!==(l=RE_getBindedList(r,i[a])))for(c=l.length-1;c>=0;c--){if(!(-1===(o=e.indexOf(l[c].element))||o<t||o>=n))void 0===(s=l[c].element).sf$bindedBackup&&(s.sf$bindedBackup=[]),s.sf$bindedBackup.push([i[a],l.splice(c,1)[0]])}}else for(var o=t;o<n;o++)for(var s=e.item(o),a=i.length-1;a>=0;a--){var l;if(void 0!==(l=RE_getBindedList(r,i[a])))for(var c=l.length-1;c>=0;c--)l[c].element===s&&(void 0===s.sf$bindedBackup&&(s.sf$bindedBackup=[]),s.sf$bindedBackup.push([i[a],l.splice(c,1)[0]]))}}}]),e}(),ElementManipulatorProxy=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"refresh_RP",value:function(e){for(var t=this.list,n=e._list,r=0;r<t.length;r++){var i=t[r],o=i.parentChilds||i.elements;if(void 0!==o)for(var s=0;s<n.length;s++){var a=o[s];if(void 0!==a){if(e[n[s]]!==a.model){var l=i.createElement(n[s]);i.parentNode.replaceChild(l,a),void 0!==i.elements&&(o[s]=l)}}else i.append(n[s])}}}},{key:"getElement_RP",value:function(e,t){for(var n=this.list,r=e._list,i=[],o=0;o<n.length;o++){var s=void 0;(s="object"===_typeof(this[t])?n[o].elementRef.get(e[t]):(n[o].parentChilds||n[o].elements)[r.indexOf(t)])&&i.push(s)}return i}},{key:"getElement_RL",value:function(e,t){for(var n=this.list,r=[],i=0;i<n.length;i++){var o=n[i],s=void 0;(s=t.constructor===Number?"object"!==_typeof(e[t])?(o.parentChilds||o.elements)[t]:o.elementRef.get(e[t]):o.elementRef.get(t))&&r.push(s)}return r}},{key:"$el",value:function(e){for(var t=[],n=this.list,r=0;r<n.length;r++){var i=n[r];t.push.apply(t,queryElements(i.parentChilds||i.elements,e))}return $(t)}},{key:"hardRefresh",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].hardRefresh.apply(e[t],arguments)}},{key:"update",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].update.apply(e[t],arguments)}},{key:"move",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].move.apply(e[t],arguments)}},{key:"swap",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].swap.apply(e[t],arguments)}},{key:"remove",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].remove.apply(e[t],arguments)}},{key:"removeRange",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].removeRange.apply(e[t],arguments)}},{key:"clear",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].clear.apply(e[t],arguments)}},{key:"insertAfter",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].insertAfter.apply(e[t],arguments)}},{key:"prepend",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].prepend.apply(e[t],arguments)}},{key:"append",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].append.apply(e[t],arguments)}},{key:"reverse",value:function(){for(var e=this.list,t=0;t<e.length;t++)e[t].reverse.apply(e[t],arguments)}}]),e}();function RE_restoreBindedList(e,t){for(var n=0;n<t.length;n++){var r=RE_getBindedList(e,t[n][0]);void 0!==r&&r.push(t[n][1])}}function RE_getBindedList(e,t){if(1===t.length)return e.sf$bindedKey[t[0]];var n=deepProperty(e,t.slice(0,-1));return void 0!==n&&void 0!==n.sf$bindedKey?n.sf$bindedKey[t[t.length-1]]:void 0}function elseIfHandle(e,t){for(var n=e.elseIf,r=0;r<n.length;r++)if(n[r][0](t[0],t[1],_escapeParse))return n[r][1](t[0],t[1],_escapeParse);return null===e.elseValue?"":e.elseValue(t[0],t[1],_escapeParse)}internal.EM=ElementManipulator,internal.EMP=ElementManipulatorProxy;var templateParser_regex=/{{%=([0-9]+)%/g,templateParser_regex_split=/{{%=[0-9]+%/g,REF_DIRECT=0,REF_IF=1,REF_EXEC=2,templateExec=function(e,t,n,r,i){if(0===e.length)return e;void 0===r&&(r=new Array(e.length));for(var o=0,s=e.length;o<s;o++)if(void 0===n||!1!==n.includes(o)){var a=e[o],l=a.data;l[0]=t;try{if(a.type===REF_DIRECT){void 0===(c=a.get(l[0],l[1],_escapeParse,i))?c="":c.constructor===Object?c=JSON.stringify(c):c.constructor!==String&&(c=String(c)),r[o]=c;continue}if(a.type===REF_EXEC){r[o]=a.get(l[0],l[1],_escapeParse,i);continue}if(a.type===REF_IF){if(!a.if[0](l[0],l[1],_escapeParse,i)){r[o]=elseIfHandle(a,l,i);continue}r[o]=a.if[1](l[0],l[1],_escapeParse,i)}}catch(e){var c;throw c=(c=(c=(c=(a.get||a.if).toString()).split(") {",2)[1].slice(1,-2)).replace(/(_model_|_modelScope)\./g,"")).replace(/var _model_=.*?;/,""),"Can't continue processing the template"===e.message?(console.groupCollapsed("Click here to open more information.."),console.log("%cError in template's script:\n","color:orange",c)):(console.groupCollapsed("%cError message:","color:orange",e.message,"\nClick here to open more information.."),console.log(e.stack),console.log("%cWhen processing template's script:\n","color:orange",c),console.groupEnd()),new Error("Can't continue processing the template")}}return r};function parserForAttribute(e,t,n,r,i,o,s,a){for(var l=0;l<t.length;l++){var c=t[l];if(c.event)void 0!==s&&void 0!==s.sf$listListenerLock||eventHandler(e,c,r||n,s,a);else{var d="value"===c.name&&("TEXTAREA"===e.tagName||"INPUT"===e.tagName&&!1===sfRegex.inputAttributeType.test(e.type)),u={ref:c};if("style"===c.name?u.style=e.style:u.attribute=!0===d?e:"class"===c.name?e.classList:e.attributes[c.name],e.hasAttribute("sf-lang")&&(u.sf_lang=e),o.push(u),void 0===c.direct)if("value"===c.name&&!0===d){u=e.value;e.removeAttribute("value"),e.value=applyParseIndex(c.value,c.parse_index,i)}else e.setAttribute(c.name,applyParseIndex(c.value,c.parse_index,i));else{if("value"===c.name&&!0===d){e.value=i[c.direct],e.removeAttribute("value");continue}e.setAttribute(c.name,i[c.direct])}}}}var templateParser=internal.model.templateParser=function(e,t,n,r,i,o,s){processingElement=e.html;var a=!0===n?e.html:e.html.cloneNode(!0),l=e.addresses;try{var c=templateExec(e.parse,t,void 0,void 0,s)}catch(n){throw"Can't continue processing the template"===n.message?(console.error("Error when processing:",e.html,t,r),console.groupEnd()):sf.onerror&&sf.onerror(n),n}if(void 0!==e.uniqPattern&&(a.sf$repeatListIndex=s),void 0!==o){for(var d=a.childNodes,u=0,f=d.length;u<f;u++)o.appendChild(d[0]);var p=a.attributes;for(u=0;u<p.length;u++)o.setAttribute(p[u].name,p[u].value);a=o}var h=[],v=[];h.parsed=c;for(u=0;u<l.length;u++){var m=l[u],g=$.childIndexes(m.address,a);if(1!==m.nodeType)if(3!==m.nodeType){if(-1===m.nodeType){var y={dynamicFlag:g,direct:m.parse_index,parentNode:g.parentNode,startFlag:m.startFlag&&$.childIndexes(m.startFlag,a)};h.push(y),v.push(y)}}else{var b=g;if(h.push({textContent:b,ref:m}),void 0!==m.direct){b.textContent=c[m.direct];continue}g.textContent=applyParseIndex(m.value,m.parse_index,c)}else parserForAttribute(g,m.attributes,t,r,c,h,i,e)}void 0!==i&&(i.sf$listListenerLock=!0),a.model=t,0!==h.length&&(h.template=e,a.sf$elementReferences=h);for(u=0;u<v.length;u++){var w=c[(m=v[u]).direct];if(1!==w.nodeType){var E=0;for(f=(w=$.parseElement(c[m.direct])).length;E<f;E++)m.parentNode.insertBefore(w[0],m.dynamicFlag)}else m.parentNode.insertBefore(w,m.dynamicFlag)}if(e.specialElement){if(e.specialElement.input){var _=e.specialElement.input,k=new Array(_.length);for(u=0;u<_.length;u++){m=_[u];k[u]={el:$.childIndexes(m.addr,a),rule:m.rule,id:m.id}}bindInput(k,t,e.mask,r)}if(e.specialElement.repeat){var P=e.specialElement.repeat,C=new Array(P.length);for(u=0;u<P.length;u++){m=P[u];C[u]={el:$.childIndexes(m.addr,a),rule:m.rule}}repeatedListBinding(C,t,void 0,e)}}return a};sf.async=function(e){animFrameMode=!e};var animFrameMode=!1,syntheticTemplate=internal.model.syntheticTemplate=function(e,t,n,r,i){if(void 0!==n){if(!(o=t.modelRef&&t.modelRef[n]||t.modelRefRoot[n])||0===o.length)return console.log(e,t,n,r),console.error("Failed to run syntheticTemplate because property '".concat(n,"' is not observed")),!1}else{if(0===t.parse.length)return!1;var o=void 0}var s=e.sf$elementReferences;void 0===s.parsed&&(s.parsed=new Array(t.parse.length));var a=s.parsed,l=e.sf$repeatListIndex;if(i||templateExec(t.parse,r,o,a,l),!i&&!1===animFrameMode){if(!0===s.async)return;return s.async=!0,void requestAnimationFrame((function(){s.async=!1,animFrameMode=!0,syntheticTemplate(e,t,n,r,!0),animFrameMode=!1}))}for(var c,d=!1,u=0;u<s.length;u++){var f=s[u];if(void 0===f.dynamicFlag)if(void 0===f.textContent)if(void 0===f.attribute){if(void 0!==f.style){if(void 0!==f.ref.parse_index)c=applyParseIndex(f.ref.value,f.ref.parse_index,a,t.parse,r,l);else{if(!a[f.ref.direct])continue;c=a[f.ref.direct]}if(f.style.cssText===c)continue;f.style.cssText=c,d=!0}}else{if(void 0!==f.ref.parse_index){if(c=applyParseIndex(f.ref.value,f.ref.parse_index,a,t.parse,r,l),f.attribute.value===c)continue}else{if(!a[f.ref.direct])continue;if(c=a[f.ref.direct],f.attribute.value==c)continue}f.attribute.value=c,d=!0}else{if(void 0!==f.ref.parse_index){if(c=applyParseIndex(f.ref.value,f.ref.parse_index,a,t.parse,r,l),f.textContent.textContent===c)continue;f.textContent.textContent=c,d=!0;continue}if(a[f.ref.direct]){if(c=a[f.ref.direct],f.textContent.textContent===c)continue;var p=f.textContent;if(!0===p.sf$haveChilds)for(;p.previousSibling&&p.previousSibling.sf$childRoot===p;)p.previousSibling.remove();p.textContent=c,d=!0}}else if(void 0!==a[f.direct]){for(var h=Array.from($.parseElement(a[f.direct])),v=$.prevAll(f.dynamicFlag,f.startFlag),m=!1,g=h.length-1;g>=0;g--){if(void 0===v[g]){m=!0;break}!1===v[g].isEqualNode(h[g])&&f.parentNode.replaceChild(h[g],v[g])}if(m)for(g=0;g<h.length;g++)f.parentNode.insertBefore(h[g],f.dynamicFlag);else for(g=h.length;g<v.length;g++)v[g].remove();d=!0}}return d}}(),$((function(){for(var e in internal.modelPending){for(var t=internal.modelPending[e],n=0;n<t.length;n++)sf.model.init(t[n],t[n].getAttribute("name"));delete internal.modelPending[e]}}));var API=function(){function e(t){_classCallCheck(this,e),this.url=t,this.accessToken=!1,this.mask=!0}return _createClass(e,[{key:"get",value:function(e,t){return this.request("GET",this.url+e,t)}},{key:"post",value:function(e,t){return this.request("POST",this.url+e,t)}},{key:"delete",value:function(e,t){return this.request("DELETE",this.url+e,t)}},{key:"put",value:function(e,t){return this.request("PUT",this.url+e,t)}},{key:"upload",value:function(e,t){return t.constructor!==FormData?console.error("Parameter 2 must be a FormData"):this.request("POST",this.url+e,t)}},{key:"request",value:function(e,t,n,r){if(void 0===n&&(n={}),this.mask){var i={receiveType:"JSON"};n.constructor===FormData?n.append("_method",e.toUpperCase()):(i.sendType="JSON",n._method=e.toUpperCase())}else i={};if(this.accessToken){var o=this.accessToken;i.beforeSend=function(e){e.setRequestHeader("X-Authorization","Bearer ".concat(o)),r&&r(e)}}else void 0!==r&&(i.beforeSend=r);return this.mask?sf.request("POST",t,n,i):sf.request(e,t,n,i)}}]),e}();sf.API=API,sf.events=function(){function e(t,n){if(t.constructor!==Array){if(void 0!==n&&n.constructor===Boolean){void 0!==e[t]&&e[t]!==n&&console.warn("Events",t,"already has value:",e[t]);var r=function(){var e=self._statusTrigger[t];if(void 0!==e){for(var n=0;n<e.length;n++)try{e[n]()}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}delete self._statusTrigger[t]}},i=e[t]||n;Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i!==e&&(i=e)&&r()}}),i&&r()}else if(void 0===e[t]){e[t]=function(){for(var e=0;e<o.length;e++)try{o[e].apply(null,arguments),!0===o[e].once&&o.splice(e--,1)}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}},void 0===self._listener[t]&&(self._listener[t]=[]);var o=self._listener[t]}n=null}else for(var s=0;s<t.length;s++)e(t[s],n)}return self._listener={},self._statusTrigger={},e.when=function(t,n){if(!0===e[t])return n();void 0===self._statusTrigger[t]&&(self._statusTrigger[t]=[]),self._statusTrigger[t].push(n)},e.once=function(e,t){t.once=!0,self._listener[e].push(t)},e.on=function(e,t){void 0===self._listener[e]&&(self._listener[e]=[]),self._listener[e].push(t)},e.off=function(e,t){if(void 0===self._listener[e])return self._listener[e].length=0;var n=self._listener[e].indexOf(t);-1!==n&&self._listener[e].splice(n,1)},e}(),window.TouchEvent||(window.TouchEvent=void 0),function(){var e=sf.lang=function(e){sf.lang.init(e)};e.list={},e.default="en_US",e.serverURL=!1,e.interpolate={},internal.language={},e.add=function(t,n){if(void 0===e.list[t]&&(e.list[t]={}),function e(t,n){for(var r in n)void 0===t[r]?t[r]=n[r]:n[r].constructor===Object&&e(t[r],n[r])}(e.list[t],n),a=!1,0!==i.length){for(var r=e.list[e.default],o=0;o<i.length;o++)void 0===i[o].callbackOnly?i[o](d(r,i[o].path)):i[o]();i.length=0}},e.changeDefault=function(t){if(e.default=t,!1!==windowDestroyListener&&0!==sf.window.list.length)for(var n=sf.window.list,r=0;r<n.length;r++)n[r].sf.lang.changeDefault(t);function o(){var e=sf.component.registered;for(var t in e)void 0!==e[t][3]&&m(e[t])}void 0===e.list[t]?(o.callbackOnly=!0,i.push(o)):o(),e.init(document.body);var s=sf.window.list;for(var a in s)e.init(s[a].document.body)};var t=/{(.*?)}/;function n(n,r){var i=!1;return n.replace(t,(function(t,n){return!1!==i||r.constructor!==String&&r.constructor!==Number?void 0!==r[n]?r[n].constructor===Function?r[n]():r[n]:void 0!==e.interpolate[n]?e.interpolate[n].constructor===Function?e.interpolate[n]():e.interpolate[n]:t:(i=!0,r)}))}var r=!1,i=[];function o(){!1!==a&&!1!==e.serverURL&&(clearTimeout(r),r=setTimeout((function(){!1!==c&&c.abort(),c=sf.request("POST",e.serverURL,{lang:e.default,paths:JSON.stringify(a)},{sendType:"JSON",receiveType:"JSON"}).done((function(t){a=!1,e.add(e.default,t)})).fail(e.onError)}),500))}function s(t,r,s){for(var l=e.list[e.default],c={},u=[],f=0;f<t.length;f++){var p=d(l,t[f]);p?c[t[f]]=p:u.push(t[f])}if(0===u.length)return r&&(c=n(c,r)),void 0===s?c:s(c);!1===a&&(a={});for(f=0;f<u.length;f++)d(a,u[f],1);var h=function(){for(var e=0;e<u.length;e++){var t=d(l,u[e]);d(c,u[e],t)}return s(c)};h.callbackOnly=!0,i.push(h),o()}e.get=function(t,r,l){return void 0!==r&&r.constructor===Function&&(l=r,r=void 0),void 0===e.list[e.default]&&(e.list[e.default]={}),t.constructor===String?function(t,r,s){var l=d(e.list[e.default],t);if(void 0!==l)return r&&(l=n(l,r)),void 0===s?l:s(l);!1===a&&(a={});d(a,t,1),s&&(s.path=t,i.push(s));return o(),t}(t,r,l):s(t,r,l)},e.assign=function(t,n,r,i){void 0===e.list[e.default]&&(e.list[e.default]={}),void 0!==r&&r.constructor===Function&&(i=r,r=void 0);var o=Object.keys(n),a=Object.values(n);s(a,r,(function(e){for(var n=0;n<o.length;n++)t[o[n]]=d(e,a[n]);i&&i()}))};var a=!1,l=[],c=!1;function d(e,t,n){for(var r=t.split("."),i=0,o=r.length-1;i<=o;i++){var s=r[i];if(void 0===n){if(void 0===e[s])return;e=e[s]}else{if(i===o)return void(e[s]=n);e=void 0===e[s]?e[s]={}:e[s]}}return e}function u(t,n){var r=e.list[e.default],i=new Set;void 0===r&&(r=e.list[e.default]={});for(var o=new WeakSet,s=t.length-1;s>=0;s--)if(t[s].sf_lang===e.default&&!0===n||t[s].hasAttribute("sf-lang-skip"))t.splice(s,1);else{var c=t[s];if(!o.has(c))if(o.add(c),void 0!==c.sf$elementReferences&&f(c))i.add(c);else{var u=sf(c,!0);if(null!==u){if(i.has(u))continue;if(void 0!==u.sf$elementReferences&&f(u)){i.add(u);continue}if(("INPUT"===c.tagName||"TEXTAREA"===c.tagName)&&!c.hasAttribute("placeholder"))continue}var h=c.getAttribute("sf-lang"),v=d(r,h);void 0!==v?(!0===n&&t.splice(s,1),c.hasAttribute("placeholder")?c.setAttribute("placeholder",v):"INPUT"!==c.tagName&&"TEXTAREA"!==c.tagName&&p(v,c)):!0!==n&&(!1===a&&(a={}),d(a,h,1),l.push(c))}}if(0!==i.size){var m,g=new WeakSet,y=_createForOfIteratorHelper(i);try{for(y.s();!(m=y.n()).done;){(c=m.value).sf_lang=e.default;var b=c.model;void 0===b&&(b=sf(c)),void 0!==b.sf$bindedKey&&(g.has(c)||(g.add(c),!1===internal.model.syntheticTemplate(c,c.sf$elementReferences.template,void 0,b)&&(c.sf_lang=void 0)))}}catch(e){y.e(e)}finally{y.f()}}}e.onError=console.error,e.init=function(t){var n=t.querySelectorAll("[sf-lang]");if(0!==n.length){if(void 0===e.list[e.default]&&(e.list[e.default]={}),u(n),!1!==a&&!1!==e.serverURL){var r=function(){a=!1,u(l,!0)};r.callbackOnly=!0,i.push(r),o()}!1!==a&&!1===e.serverURL&&console.warn("Some language was not found, and the serverURL was set to false",a)}},internal.language.refreshLang=function(e){if(void 0!==e.hasAttribute){if(e.hasAttribute("sf-lang"))return u([e]);0!==(e=e.querySelectorAll("[sf-lang]")).length&&u(e)}};function f(t){var n=t.sf$elementReferences,r=!1,i=n.template;void 0===n.parsed&&(n.parsed=new Array(i.parse));for(var o=n.length-1;o>=0;o--){var s=n[o];if(void 0!==s.textContent){if(null===(u=s.textContent.parentElement)||!1===u.hasAttribute("sf-lang"))continue;var c=u.getAttribute("sf-lang")}else{if(void 0===s.sf_lang)continue;var u=s.sf_lang;c=s.sf_lang.getAttribute("sf-lang")}var f=d(e.list[e.default],c);if(void 0===f)return!1===a&&(a={}),d(a,c,1),void l.push(u);if(void 0===s.attribute)n.splice(o,1),p(f,u,i,n)&&(r=!0);else if(h(f,s.ref,i),"value"===s.ref.name){var v=s.ref;s.attribute.value=internal.model.applyParseIndex(v.value,v.parse_index,n.parsed,i.parse)}}for(o=n.length-1;o>=0;o--)n[o].textContent&&!1===n[o].textContent.isConnected&&n.splice(o,1);return r}function p(e,t,n,r){e=e.replace(/%\*&/g,"-");var i=[];e=e.replace(/\[([a-zA-Z0-9\-]+):(.*?)\]/g,(function(e,t,n){return i.push({tag:t.toUpperCase(),val:n}),"%*&"})).split("%*&");for(var o=t.childNodes,s={},a=0,l=o.length;a<l;a++){var c;if(3===(u=o[a]).nodeType)void 0===(c=s._text)&&(c=s._text=[]);else{if(1!==u.nodeType)continue;void 0===(c=s[u.tagName])&&(c=s[u.tagName]=[])}c.push(u)}var d=n&&!0;t.textContent=e[0],null!==t.firstChild&&(d=d&&v(n,r,t.firstChild,t));for(a=1;a<e.length;a++){var u,f=i[a-1];(u=void 0===(u=s[f.tag])||0===u.length?document.createElement(f.tag):u.pop()).textContent=f.val,t.appendChild(u),d=d&&v(n,r,u.firstChild,t),void 0===(u=s._text)||0===u.length?u=new Text(e[a]):(u=u.pop()).textContent=e[a],t.appendChild(u),d=d&&v(n,r,u,t)}return""===e[a-1]&&u.remove(),!1!==d||!n}function h(e,t,n){var r=[],i=e.replace(/{(.*?)}/g,(function(e,t){if(!1!==isNaN(t))if(void 0!==n.modelRefRoot[t])t=n.modelRefRoot[t][0];else{if(void 0===n.modelRef||void 0===n.modelRef[t])return console.error("Language can't find existing model binding for '".concat(t,"' from"),Object.keys(n.modelRefRoot),n),"";t=n.modelRef[t][0]}return r.push(t),"%*&"}));return 0!==r.length&&(t.parse_index=r,t.value=i.split("%*&"),internal.model.parseIndexAllocate(t.value),!0)}function v(e,t,n,r){var i={textContent:n,ref:{address:$.getSelector(n,!0,r),nodeType:3}};return h(n.textContent,i.ref,e)&&t.push(i),!0}function m(t){t[2];var n=t[3],r=n.addresses;if(void 0!==r){for(var o=!1,s=r.length-1;s>=0;s--)if(!r[s].skipSFLang&&void 0!==r[s].value){var a=$.childIndexes(r[s].address,n.html).parentNode;if(!1!==a.hasAttribute("sf-lang")){o=!0;var l=d(e.list[e.default],a.getAttribute("sf-lang"));if(void 0===l){console.error("Can't found '".concat(a.getAttribute("sf-lang"),"' for ").concat(e.default,", in"),e.list[e.default],", maybe the language wasn't fully loaded");var c=function(){m(t)};return c.callbackOnly=!0,void i.push(c)}r.splice(s,1);var u=[];p(l,a,n,u);for(var f=0;f<u.length;f++){var h=u[f].ref;h.address=$.getSelector($.childIndexes(h.address,a),!0,n.html),r.push(h)}}}!1===o&&(n.skipSFLang=!0)}}}(),$.get=function(e,t,n,r){return custom("GET",e,t,n,r)},$.post=function(e,t,n,r){return custom("POST",e,t,n,r)},$.getJSON=function(e,t,n,r){return custom("getJSON",e,t,n,r)},$.postJSON=function(e,t,n,r){return custom("postJSON",e,t,n,r)},sf.request=custom;var statusCode=sf.request.statusCode={};function custom(e,t,n,r,i){return n&&n.constructor===Function&&(i=n,n=void 0),r&&r.constructor===Function&&(i=r,r=void 0),void 0===r&&(r={}),"getJSON"===e&&(r.receiveType="JSON",e="GET"),"postJSON"===e&&(r.sendType="JSON",e="POST"),request(e,t,n,r,i)}function request(e,t,n,r,i){var o=new XMLHttpRequest;if(r.beforeOpen&&r.beforeOpen(o),"GET"!==e&&"HEAD"!==e&&"OPTIONS"!==e&&"DELETE"!==e||(t+=(!1===t.includes("?")?"?":"")+serializeQuery(n),n=null),o.open(e,t,r.async||!0,r.user,r.password),r.headers)for(var s in r.headers)o.setRequestHeader(s,r.headers[s]);if("object"===_typeof(n)&&null!==n&&n.constructor!==FormData)if("JSON"===r.sendType)o.setRequestHeader("Content-Type","application/json"),n=JSON.stringify(n);else{var a=n;for(var s in n=new FormData,a){var l=a[s];if(l.constructor!==Array)if(l.constructor!==Object)n.append(s,l);else for(var c in l)n.append(s+"["+c+"]",l[c]);else for(var d=0;d<l.length;d++)n.append(s+"[]",l[d])}}return i&&i.constructor===Object||(i={done:i}),o.fail=function(e){return i.fail=e,o},o.done=function(e){return i.done=e,o},o.always=function(e){return i.always=e,o},o.progress=function(e){return o.onprogress=o.onloadstart=e,o},o.uploadProgress=function(e){return o.upload.onprogress=o.upload.onloadstart=e,o},o.onerror=function(){sf.request.onerror&&sf.request.onerror(o),i.fail&&i.fail(o.status),i.always&&i.always("error")},o.onload=function(){if(o.status>=200&&o.status<300||0===o.status)if("JSON"===r.receiveType){var e=void 0;try{e=JSON.parse(o.responseText)}catch(e){i.fail&&i.fail("parseerror",o.responseText)}void 0!==e&&(i.done&&i.done(JSON.parse(o.responseText),o.status),sf.request.onsuccess&&sf.request.onsuccess(o))}else i.done&&i.done(o.responseText||o.response,o.status),sf.request.onsuccess&&sf.request.onsuccess(o);else if(i.fail)if("JSON"===r.receiveType)try{i.fail(o.status,JSON.parse(o.responseText))}catch(e){i.fail(o.status,o.responseText)}else i.fail(o.status,o.responseText);statusCode[o.status]&&statusCode[o.status](o),i.always&&i.always(o.status)},r.beforeSend&&r.beforeSend(o),o.send(n),o}function serializeQuery(e){var t=[];for(var n in e){var r=e[n];if(r.constructor!==Array)if(r.constructor!==Object)t.push(n+"="+encodeURIComponent(r));else for(var i in r)t.push(n+"["+i+"]="+encodeURIComponent(r[i]));else for(var o=0;o<r.length;o++)t.push(n+"[]="+encodeURIComponent(r[o]))}return t.join("&")}sf.request.onerror=null,sf.request.onsuccess=null,function(){var e=sf.url=function(){var n="";for(var r in t)"/"!==t[r]&&(n+="#".concat(r).concat(t[r]));var i="|".concat(e.data.join("|"));return e.paths+n+(1!==i.length?i:"")},t=e.hashes={};e.data=[],e.paths="/",e.push=function(){window.history.pushState((window.history.state||0)+1,"",e())},e.replace=function(){window.history.replaceState(window.history.state,"",e())},e.get=function(n,r){return e.parse(),n.constructor===Number?e.paths.split("/")[n+1]:void 0!==t[n]?t[n].split("/")[r+1]:void 0},e.parse=function(n){if(void 0!==n){var r={hashes:{}};r.data=n.split("|");for(var i=r.data.shift().split("#"),o=1;o<i.length;o++){var s=i[o].split("/");r.hashes[s.shift()]="/".concat(s.join("/"))}return r.paths=n.split("#")[0],r}e.data=window.location.hash.split("|");i=e.data.shift().split("#");t=e.hashes={};for(o=1;o<i.length;o++){s=i[o].split("/");t[s.shift()]="/".concat(s.join("/"))}return e.paths=window.location.pathname,e},e.parse()}(),function(){var e=routerEval;routerEval=void 0;var t=/<html/,n=!1,r=1,i=window.history.state||1,o=!1;window.addEventListener("popstate",(function(e){if(n)return n=!1,void(i-=r);o=!0,r=window.history.state>=i?1:-1,i+=r,a.goto(),o=!1}),!1);var s={};internal.router={},internal.router.parseRoutes=function(e,t){var n=[],r=/\/:([^/]+)/g,i=/^(path|url|template|templateURL|html|on|routes|beforeRoute|defaultData|cache)$/;return e.constructor!==Array&&(e=[e]),function e(o,s,a,l){""!==a&&(a+=" ");for(var c=0;c<o.length;c++){var d=o[c],u=s+d.path;void 0!==d.routes&&e(d.routes,u,a,l),u=u.split("//").join("/");var f=[],p=u.replace(r,(function(e,t){return f.push(t),"/([^/]+)"})),h=RegExp("^".concat(p,"$"));if(void 0!==d.url)h.url=d.url;else if(void 0!==d.templateURL)h.templateURL=d.templateURL;else if(void 0!==d.template)h.template=d.template;else if(void 0!==d.html){var v=h.html=document.createElement("sf-page-view");internal.component.skip=!0,d.html.constructor===String?(h.html=sf.dom.parseElement("<template>".concat(d.html,"</template>"),!0)[0],internal.component.skip=!1):v.appendChild(d.html),internal.component.skip=!1,v.classList.add("page-prepare")}h.keys=f,h.beforeRoute=d.beforeRoute,h.defaultData=d.defaultData||{},""!==a&&(h.selector=t.indexOf(a),-1===h.selector&&(h.selector=t.length,t.push(a.trim()))),void 0!==l&&(h.parent=l),void 0!==d.on&&(h.on=d.on),d.cache&&(h.cache=!0);var m=[];for(var f in d)if(!i.test(f)){m.push(f),e(d[f],u,f,h);break}0!==m.length&&(h.hasChild=m,h.forChild=RegExp(p)),n.push(h)}}(e,"",""),n},internal.router.findRoute=function(e){for(var t=0;t<this.length;t++){var n=e.match(this[t]);if(null!==n){var r=this[t].keys;if(void 0!==r){var i=this[t].data={};n.shift();for(var o=0;o<r.length;o++)i[r[o]]=n[o]}return this[t]}}return!1};var a=sf.views=function(i,a){void 0===a&&(a="/");var l=this;a&&(sf.views.list[a]=l);var c=!1;"/"===a?l.currentPath=sf.url.paths:!1===a?l.currentPath="":(l.currentPath="",c=!0);var d=!1,u=!1;l.lastPath="/",l.lastDOM=null,l.currentDOM=null,l.relatedDOM=[],l.data={},l.maxCache=4;var f=l.rootDOM={};function p(e,t,n){var r=(t||(f.isConnected?f:document.body)).getElementsByTagName(e||i);if(0===r.length)return!1;if((r=r[0]).sf$viewInitialized)return!1;d=!0,null===y&&(y=r.getElementsByTagName("sf-page-view"));var o=null;if(0!==r.childNodes.length)if(1===r.childNodes.length&&"#text"===r.firstChild.nodeName&&""===r.firstChild.textContent.trim())r.firstChild.remove();else{o=document.createElement("sf-page-view"),r.insertBefore(o,r.firstChild);for(var s=1,a=r.childNodes.length;s<a;s++)o.appendChild(r.childNodes[1]);o.routePath=n||l.currentPath,o.routeCached=v.findRoute(o.routePath),o.classList.add("page-current"),r.defaultViewContent=o}return r.sf$viewInitialized=!0,t?r:(l.currentDOM=o,f=l.rootDOM=r,!0)}var h=[i],v=l.routes=[];v.findRoute=internal.router.findRoute,internal.router.enabled=!0;var m={start:[],finish:[],loading:[],loaded:[],error:[]};l.on=function(e,t){if(e.includes(" ")){e=e.split(" ");for(var n=0;n<e.length;n++)l.on(e[n],t);return l}return void 0===m[e]?console.error("Event '".concat(e,"' was not exist")):(!1===m[e].includes(t)&&m[e].push(t),l)},l.off=function(e,t){if(e.includes(" ")){e=e.split(" ");for(var n=0;n<e.length;n++)l.off(e[n],t);return l}return void 0===m[e]?console.error("Event '".concat(e,"' was not exist")):void 0===t?(m[e].length=0,l):(-1===(n=m[e].indexOf(t))||m[e].splice(n,1),l)},l.addRoute=function(e){return v.push.apply(v,internal.router.parseRoutes(e,h)),d||p(),!u&&a&&$((function(){u||("/"!==a||f.childElementCount||(l.currentPath="",u=l.goto(sf.url.paths)),c&&(u=void 0!==sf.url.hashes[a]?l.goto(sf.url.hashes[a]):l.goto("/"))&&(c=!1))})),l};var g=!1,y=null;function b(e,t){var n=m.error;if(0!==n.length)for(var r=0;r<n.length;r++)n[r](e,t);else console.error("Unhandled router error:",e,t)}function w(e,t){e.aborted||(n=!0,g=!1,b(e.status,t),window.history.go(-1*r))}function E(e,t,n,r){for(var i=[e],o=e.parentNode;o!==f&&null!==o;)"SF-PAGE-VIEW"===o.nodeName&&i.unshift(o),o=o.parentNode;for(var s=null,a=null,c=0;c<l.relatedDOM.length;c++)!1===i.includes(l.relatedDOM[c])&&(null===s&&(a=(s=l.relatedDOM[c]).parentNode),l.relatedDOM[c].classList.remove("page-current"));var d=null;for(c=0;c<i.length;c++)null===d&&i[c].parentNode===a&&(d=i[c]),i[c].classList.add("page-current");l.showedSibling=d,l.lastSibling=s,e.classList.add("page-current"),l.relatedDOM=i}l.removeRoute=function(e){var t=v.findRoute(e);if(!1!==t){for(var n=0;n<f.children.length;n++)f.children[n].routePath.match(t)&&f.children[n].remove();-1!==(n=v.indexOf(t))&&v.splice(n,1)}};var _=0;return l.goto=function(r,u,$,k,P){if(l.currentPath!==r){if(!1===d&&(p(),!1===d))return console.error("sf.views haven't finished initializing, and waiting for related parent element");if(void 0===P){for(var C=0;C<m.start.length;C++)if(m.start[C](l.currentPath,r))return;l.lastPath=l.currentPath}void 0!==u&&u.constructor===Function&&(k=u,u=void 0),void 0!==$&&$.constructor===Function&&(k=$,$=void 0);var R=!1;u instanceof HTMLElement&&(R=u,u=void 0),$ instanceof HTMLElement&&(R=$,$=void 0),c=!1;var M=v.findRoute(r);if(!M)return b(404,{path:r,message:"Path was not found"});if(void 0===M.beforeRoute||!M.beforeRoute(M.data)){if("/"===a?sf.url.paths=r:a&&(sf.url.hashes[a]=r),o||void 0!==P||!1===a||sf.url.push(),!1===f.isConnected&&(void 0!==f.nodeType&&(f={}),!1===p()))return console.error(a,"can't route to",r,"because element with selector '".concat(i,"' was not found"));if(g&&g.abort(),!1===R&&function(e){var t=!1;function n(n){if(null===n)return!1;if(t=function(e){for(var t=y.length-1;t>=0;t--)if(e===y[t].routePath)return y[t];return!1}(e))return!0;for(var r=n.children,i=0;i<r.length;i++)if(r[i].routePath===e)return t=r[i],!0;return!1}if(!1===n(f))for(var r=0;r<h.length&&!n(f.querySelector(h[r]));r++);if(!1===t)return!1;l.lastDOM=l.currentDOM,void 0!==l.currentDOM.routeCached.on&&l.currentDOM.routeCached.on.leaving&&l.currentDOM.routeCached.on.leaving();if(l.currentDOM=t,t.routerData)l.data=t.routerData;else if(null!==t.parentElement){var i=t.parentElement.closest("sf-page-view");null!==i&&(l.data=i.routerData)}void 0!==l.currentDOM.routeCached.on&&l.currentDOM.routeCached.on.coming&&l.currentDOM.routeCached.on.coming(l.data);l.currentPath=l.currentDOM.routePath,E(t);for(r=0;r<m.finish.length;r++)m.finish[r](l.lastPath,l.currentPath);void 0!==l.currentDOM.routeCached.on&&l.currentDOM.routeCached.on.showed&&l.currentDOM.routeCached.on.showed(l.data);void 0!==l.lastDOM.routeCached.on&&l.lastDOM.routeCached.on.hidden&&l.lastDOM.routeCached.on.hidden();return!0}(r))return!0;if(void 0===P){_=1;for(var O=M.parent;void 0!==O;)_++,O=O.parent}var S=l.data=M.data,x=function(e){if(M.selector||M.hasChild){var t=e.sf$viewSelector;void 0===t&&(t=e.sf$viewSelector={})}if(hotReload&&void 0!==M.template&&(e.sf$templatePath=M.template),M.hasChild){for(var n=[],i=0;i<M.hasChild.length;i++){t[M.hasChild[i]]=p(M.hasChild[i],e,r);var o=t[M.hasChild[i]].firstElementChild;o&&n.unshift(o)}0===n.length&&(n=void 0)}else n=void 0;if(void 0===M.selector)var s=f;else{var a=h[M.selector],c=(s=null,function(e){for(var t=[],n=0;n<y.length;n++)0===e.indexOf(y[n].routePath)&&t.push(y[n]);return t}(r));for(i=0;i<c.length;i++){var d=c[i].sf$viewSelector;void 0!==d&&void 0!==d[a]&&(s=d[a])}if(!s||!1===s.isConnected){if(void 0===M.parent)return e.remove(),w({status:0},{path:r,target:e,message:"Parent element was not found while adding this element. Maybe it was disconnected from the DOM."});var u=r.match(M.parent.forChild)[0];return l.goto(u,!1,$,(function(t){if(s=t.sf$viewSelector[a],S!==l.data&&(l.data=Object.assign(S,l.data)),j(s,e),k)return k(e);if(e.routerData)l.data=e.routerData;else if(null!==e.parentElement){var n=e.parentElement.closest("sf-page-view");null!==n&&(l.data=n.routerData)}for(var i=0;i<m.finish.length;i++)m.finish[i](l.lastPath,r);var o=e.parentNode.defaultViewContent;void 0!==o&&o.routePath!==r&&o.classList.remove("page-current")}),P+1||2)}}if(j(s,e,n),k)return k(e);if(e.routerData)l.data=e.routerData;else if(null!==e.parentElement){var v=e.parentElement.closest("sf-page-view");null!==v&&(l.data=v.routerData)}for(i=0;i<m.finish.length;i++)m.finish[i](l.lastPath,r)};if(!1!==R)return x(R),!0;if(void 0!==M.templateURL&&void 0!==s[M.templateURL])return x(s[M.templateURL].cloneNode(!0)),!0;if(M.template&&void 0===M.html){if(void 0===window.templates)return console.error("`window.templates` was not found");M.html=sf.dom.parseElement("<template>".concat(window.templates[M.template+".html"],"</template>"),!0)[0],hotReload&&(M.template=M.template+".html")}if(M.html){if("TEMPLATE"===M.html.nodeName){var L=document.createElement("sf-page-view");L.classList.add("page-prepare");for(var T=M.html.cloneNode(!0).content.childNodes,A=0,N=T.length;A<N;A++)L.insertBefore(T[0],null);return x(L),!0}return x(M.html.cloneNode(!0)),!0}var D=M.templateURL||M.url||r;"/"!==D[0]&&(D="/".concat(D));for(C=0;C<m.loading.length;C++)if(m.loading[C](P||1,_))return;return g=sf.request($||"GET",window.location.origin+D,Object.assign(u||M.defaultData,{_sf_view:void 0===M.selector?i:h[M.selector].split(" ").pop()})).done((function(e){if(t.test(e))return w({status:403},{path:r,requestURL:window.location.origin+D,message:"Views request was received <html> while it was disallowed. Please check http response from Network Tab."});var n=document.createElement("sf-page-view");n.classList.add("page-prepare");for(var i=0,o=(l=sf.dom.parseElement(e)).length;i<o;i++)n.insertBefore(l[0],null);if(void 0!==M.templateURL){internal.component.skip=!0;var a=document.createElement("sf-page-view");a.classList.add("page-prepare");var l;for(i=0,o=(l=sf.dom.parseElement(e)).length;i<o;i++)a.insertBefore(l[0],null);s[M.templateURL]=a,internal.component.skip=!1}x(n)})).fail(w),!0}}function j(t,i,o){i.routerData={},"#comment"===i.firstChild.nodeName&&0===i.firstChild.textContent.indexOf(" SF-View-Data")&&(i.routerData=JSON.parse(i.firstChild.textContent.slice(14)),i.firstChild.remove(),Object.assign(l.data,i.routerData));for(var s=_+1-(P||1),a=0;a<m.loaded.length;a++)if(m.loaded[a](s,_,i))return;if(t.insertAdjacentElement("beforeend",i),!1!==l.dynamicScript){var c=i.getElementsByTagName("script");for(a=0;a<c.length;a++)e(c[a].text)}var d=l.currentDOM;l.lastDOM=d,l.currentDOM=i,l.currentPath=r,void 0!==M.on&&M.on.coming&&M.on.coming(l.data),M.cache&&(i.routeNoRemove=!0),E(i),void 0!==o&&l.relatedDOM.push.apply(l.relatedDOM,o),null!==d&&d.routeCached&&void 0!==d.routeCached.on&&d.routeCached.on.leaving&&d.routeCached.on.leaving(r,M),i.routeCached=M,i.routePath=r,i.classList.remove("page-prepare"),n=!1,function(e){var t=e.parentNode;void 0===t.sf$cachedDOM&&(t.sf$cachedDOM=[]);var n=t.sf$cachedDOM.indexOf(e);-1===n?t.sf$cachedDOM.push(e):t.sf$cachedDOM.push(t.sf$cachedDOM.splice(n,1)[0]),l.maxCache<t.sf$cachedDOM.length&&t.sf$cachedDOM.shift().remove()}(i),void 0!==M.on&&M.on.showed&&M.on.showed(l.data),null!==d&&d.routeCached&&void 0!==d.routeCached.on&&d.routeCached.on.hidden&&d.routeCached.on.hidden(r,M)}},l};a.list={},a.goto=function(e){var t=sf.url.parse(e);sf.url.data=t.data;var n=a.list;for(var r in a.list)"/"!==r?t.hashes[r]!==n[r].currentPath&&n[r].goto(t.hashes[r]||"/"):n["/"].currentPath!==t.paths&&n["/"].goto(t.paths)},$((function(){void 0===sf.views.onCrossing&&(sf.views.onCrossing=function(e,t){console.error("Unhandled crossing URL origin",e,t),console.warn("Handle it by make your custom function like `sf.views.onCrossing = func(){}`")}),$.on(document.body,"click","a[href]",(function(e){e.preventDefault();var t=this.getAttribute("href");if("@"!==t[0]){this.href.replace(window.location.origin,"").includes("//")?sf.views.onCrossing(this.href,this.getAttribute("target")):a.goto(t)}else{var n=this.getAttribute("target");n?window.open(t.slice(1),n):window.location=t.slice(1)}}),!0)}))}();var ElementManipulatorProxy=internal.EMP,ElementManipulator=internal.EM,VSM_Threshold=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],VirtualScrollManipulator=function(){function e(t,n,r){_classCallCheck(this,e),_defineProperty(this,"waitMap",new Set),_defineProperty(this,"existMap",new WeakSet),_defineProperty(this,"observeMap",new WeakSet),_defineProperty(this,"waitingMap",!1),_defineProperty(this,"dynamicSize",!1),_defineProperty(this,"firstCursor",0),_defineProperty(this,"lastCursor",0),_defineProperty(this,"bottomHeight",1),_defineProperty(this,"topHeight",1),_defineProperty(this,"prepareSize",6),_defineProperty(this,"totalHeight",0),this.$EM=n,this.elList=n.elements,this.list=n.list,this.iTop=document.createElement(r.tagName),this.iTop.classList.add("virtual-spacer"),this.iRoot=t,this.iBottom=this.iTop.cloneNode(),t.insertBefore(this.iTop,null),t.appendChild(this.iBottom),t.insertBefore(r,this.iBottom);var i=window.getComputedStyle(r);this.elMargin=Number(i.marginBottom.slice(0,-2))+Number(i.marginTop.slice(0,-2)),this.elMaxHeight=this.elHeight=r.offsetHeight+this.elMargin,r.remove();var o=this;requestAnimationFrame((function(){setTimeout((function(){if(t.isConnected){var e=internal.findScrollerElement(t);null===e?(e=t,console.warn("Virtual List need scrollable container",t)):e.classList.add("sf-scroll-element"),o.iScroller=e,o.rootHeight=o.iScroller.offsetHeight,t.classList.contains("sf-list-dynamic")&&(o.dynamicSize=!0),o.init()}}),500)}))}return _createClass(e,[{key:"init",value:function(){this.listSize=this.prepareSize+Math.round(this.rootHeight/this.elMaxHeight);var e=this;function t(){var t=e.lastEntries;e.lastEntries=void 0;for(var n=!1,r=t.length-1;r>=0;r--){var i=t[r];if(!(i.intersectionRect.height<=1))if(i.target===e.iTop||i.target===e.iBottom){if(!1===i.isIntersecting||n)continue;n=!0,e.recalculateScrollPosition()}else e.observeMap.has(i.target)&&e.waitObservedElement(i.target,i.intersectionRatio)}}this.observer=new IntersectionObserver((function(n){void 0===e.lastEntries&&requestAnimationFrame(t),e.lastEntries=n}),{root:e.iScroller,threshold:VSM_Threshold}),this.observer.observe(this.iTop),this.observer.observe(this.iBottom),this.dynamicSize?(this.rObserver=new ResizeObserver((function(t){for(var n=e.elList,r=n.length,i=0;i<t.length;i++){var o=(l=t[i].target).offsetHeight+e.elMargin;if(l.sf$heightPos!==o){e.totalHeight-=l.sf$heightPos,e.totalHeight+=o,l.sf$heightPos=o;var s=n.indexOf(l);-1!==s&&r>s&&(r=s),o>e.elMaxHeight&&(e.elMaxHeight=o)}}e.listSize=e.prepareSize+Math.round(e.rootHeight/e.elMaxHeight),0===r&&(n[r++].sf$scrollPos=1);for(i=r;i<n.length;i++){var a=n[i-1],l=n[i];void 0!==a?l.sf$scrollPos=a.sf$scrollPos+a.sf$heightPos:l.sf$scrollPos=1}if(e.lastCursor!==n.length){l=n[e.lastCursor];e.bottomHeight=e.totalHeight-(l.sf$scrollPos+l.sf$heightPos),e.bottomHeight<0&&(e.bottomHeight=2)}else e.bottomHeight=1;e.iBottom.style.height=e.bottomHeight+"px"})),this.bottomHeight=2):this.bottomHeight=this.elMaxHeight*this.elList.length,this.iTop.style.height=this.topHeight+"px",this.iBottom.style.height=this.bottomHeight+"px"}},{key:"waitObservedElement",value:function(e,t){t<.7?(this.waitMap.delete(e),this.existMap.has(e)&&(this.existMap.delete(e),this.list.visibilityCallback(elList.indexOf(e),!1))):this.existMap.has(e)||this.waitMap.add(e),!1===this.waitingMap&&(setTimeout(this.waitObservedFinish,1e3),this.waitingMap=!0)}},{key:"waitObservedFinish",value:function(){var e,t=this.iScroller.scrollTop,n=t+this.iScroller.offsetHeight,r=_createForOfIteratorHelper(waitMap);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.sf$scrollPos<t||i.sf$scrollPos>n||(this.existMap.add(i),this.list.visibilityCallback(elList.indexOf(el),!0))}}catch(e){r.e(e)}finally{r.f()}this.waitMap.clear(),this.waitingMap=!1}},{key:"recalculateScrollPosition",value:function(){if(void 0!==this.listSize){for(var e=this.iScroller.scrollTop,t=this.elList,n=Math.floor(e/this.elMaxHeight);n<t.length;n++){var r=t[n].sf$scrollPos;if(void 0===r||r>=e)break}(n-=this.prepareSize)<0?n=0:n>t.length&&(n=t.length-this.listSize);var i=n+this.listSize+this.prepareSize;if(i>t.length&&(i=t.length),n>=i)this.iBottom.style.height=this.bottomHeight+"px";else{this.firstCursor=n;for(var o,s=t[n]||null,a=this.iTop.nextElementSibling;a!==s;){if((o=a).sf$removed=!0,(a=o.nextElementSibling)!==this.iBottom){a=this.iTop;break}o.remove(),this.dynamicSize&&this.rObserver.unobserve(o)}for(this.topHeight=s.sf$scrollPos;n<i;n++)o=t[n],a.insertAdjacentElement("afterEnd",o),o.sf$removed&&this.dynamicSize&&this.rObserver.observe(o),o.sf$removed=!1,a=o;for(a=a.nextElementSibling;a!==this.iBottom;)(o=a).sf$removed=!0,a=o.nextElementSibling,o.remove(),this.dynamicSize&&this.rObserver.unobserve(o);o=t[i],this.lastCursor=i,n===t.length?this.bottomHeight=1:this.bottomHeight=this.totalHeight-(o.sf$scrollPos+o.sf$heightPos),this.bottomHeight<0&&(this.bottomHeight=2),this.iTop.style.height=this.topHeight+"px",this.iBottom.style.height=this.bottomHeight+"px"}}}},{key:"observeVisibility",value:function(e){this.observer.observe(this.elList[e]),this.observeMap.add(this.elList[e])}},{key:"unobserveVisibility",value:function(e){this.observer.unobserve(this.elList[e]),this.observeMap.delete(this.elList[e])}},{key:"scrollTo",value:function(e){var t=this.elList[e];t&&(this.iScroller.scrollTop=t.sf$scrollPos)}},{key:"offsetTo",value:function(e){return this.elList[e]?this.elList[e].sf$scrollPos:-1}}]),e}();Object.assign(VirtualScrollManipulator.prototype,{startInjection:function(){var e=this.elList,t=this.listSize;t>e.length&&(t=e.length);for(var n=0;n<t;n++)this.iRoot.insertBefore(e[n],this.iBottom),this.newElementInit(e[n],n-1);this.firstCursor=0,this.lastCursor=t,e.length===t?this.bottomHeight=1:this.bottomHeight=2,this.topHeight=1},newElementInit:function(e,t){void 0===e.sf$heightPos&&(e.sf$heightPos=this.elHeight+this.elMargin),0===t?e.sf$scrollPos=1:(t=this.elList[t],e.sf$scrollPos=void 0!==t?t.sf$scrollPos+t.sf$heightPos:1),this.dynamicSize&&this.rObserver.observe(e),this.totalHeight+=e.sf$heightPos},clear:function(){this.topHeight=this.bottomHeight=1,this.totalHeight=this.lastCursor=this.firstCursor=0,this.dynamicSize&&this.rObserver.disconnect(),this.waitMap.clear(),this.iRoot.appendChild(this.iTop),this.iRoot.appendChild(this.iBottom)},append:function(e){this.recalculateScrollPosition()},prepend:function(e){this.recalculateElementData(e),this.recalculateScrollPosition()},move:function(e,t,n,r){t<e&&(e=t),this.recalculateElementData(e),this.recalculateScrollPosition()},swap:function(e,t){t<e&&(e=t),this.recalculateElementData(e),this.recalculateScrollPosition()},remove:function(e){this.totalHeight-=this.elList[e].sf$heightPos,this.recalculateElementData(e),this.recalculateScrollPosition()},removeRange:function(e,t){for(var n=e;n<t;n++)this.totalHeight-=this.elList[n].sf$heightPos;this.elList.splice(e,t-e),this.recalculateElementData(e),this.recalculateScrollPosition()},insertAfter:function(e){this.totalHeight-=this.elList[e].sf$heightPos,this.recalculateScrollPosition()},update:function(e,t){this.recalculateScrollPosition()},hardRefresh:function(e){this.recalculateElementData(e),this.recalculateScrollPosition()},reverse:function(){this.recalculateElementData(0),this.recalculateScrollPosition()},recalculateElementData:function(e){for(var t=this.elList,n=e+1;n<t.length;n++){var r=t[n-1];t[n].sf$scrollPos=r.sf$scrollPos+r.sf$heightPos}}});var VirtualScroll=function(){function e(t){_classCallCheck(this,e),_defineProperty(this,"visibilityCallback",(function(){console.log('Please set "visibilityCallback" property when using "observeVisibility"')})),this.$EM=t}return _createClass(e,[{key:"_proxying",value:function(e,t){if(this.$EM.constructor===ElementManipulatorProxy){for(var n,r=this.$EM.list,i=0;i<r.length;i++)n=VirtualScrollManipulator.prototype[e].apply(r[i].$VSM,t);return n}return VirtualScrollManipulator.prototype[e].apply(this.$EM.$VSM,t)}},{key:"observeVisibility",value:function(e){this._proxying("observeVisibility",arguments)}},{key:"unobserveVisibility",value:function(e){this._proxying("unobserveVisibility",arguments)}},{key:"scrollTo",value:function(e){this._proxying("scrollTo",arguments)}},{key:"offsetTo",value:function(e){return this._proxying("offsetTo",arguments)}},{key:"destroy",value:function(){}}]),e}();!function(){var e=!1;internal.addScrollerStyle=function(){if(!1===e){var t=document.getElementById("sf-styles");t||((t=document.createElement("style")).id="sf-styles",document.head.appendChild(t)),t.sheet.insertRule(".sf-virtual-list .virtual-spacer{visibility: hidden !important;position: relative !important;transform-origin: 0 0 !important;width: 1px !important;margin: 0 !important;padding: 0 !important;background: none !important;border: none !important;box-shadow: none !important;transition: none !important;}",t.sheet.cssRules.length),t.sheet.insertRule(".sf-scroll-element {backface-visibility: hidden;}",t.sheet.cssRules.length),e=!0}};var t=/auto|scroll|overlay|hidden/;internal.findScrollerElement=function(e){var n=e.ownerDocument,r=n.defaultView;if(!r)return null;for(;null!==e&&!1===t.test(r.getComputedStyle(e).overflow);)if((e=e.parentNode)===n.body)return null;return e}}();var headerTags="",windowDestroyListener=!1;function winDestroy(e){var t=e.winOptions;if(t.onclose&&!1===t.onclose())return ev.preventDefault(),!1;e.destroying=!0,delete sf.window.list[t.id],e.document.body.remove(),e.close(),console.log("%c[".concat(t.title,"]"),"color: #9bff82","Closed!")}var reqAnimFrame=window.requestAnimationFrame;function firstInitSFWindow(){window.addEventListener("focus",(function(){window.requestAnimationFrame=reqAnimFrame}))}sf.window={list:{},destroy:function(e){if(void 0!==e)winDestroy(this.list[e]);else{var t=this.list;for(var n in t)winDestroy(t[n])}window.requestAnimationFrame=reqAnimFrame},create:function(e,t){void 0===e&&(e={}),void 0===e.id&&(e.id=Math.round(1e3*Math.random())+String(Date.now()).slice(3));var n,r=e.id;if(!1===windowDestroyListener&&(windowDestroyListener=!0,window.addEventListener("beforeunload",(function(){sf.window.destroy()}))),e.templateHTML?n=e.templateHTML:e.templatePath?n=window.templates[e.templatePath]:e.templateURL?console.log("Haven't been implemented"):console.error("The options must have a template (templatePath | templateHTML | templateURL)"),void 0===n)return console.error("Template not found")&&!1;var i="width=".concat(e.width||500,",height=").concat(e.height||400),o=window.open(window.location.origin+(e.route||""),"",i);if(null===o)return console.error("It seems the popup was blocked by the browser")&&!1;if(""===headerTags){headerTags=$('script[src*="scarletsframe"]')[0].outerHTML;for(var s=$("link, style"),a=0;a<s.length;a++)headerTags+=s[a].outerHTML}o.winOptions=e;var l=this.list;return o.loaded=function(){l[r]=o,o.sf.space.list=sf.space.list,o.sf.model.root=sf.model.root,o.sf.model.init=sf.model.init,o.sf.component.new=sf.component.new,o.sf.lang.init=sf.lang.init,o.sf.lang.changeDefault=sf.lang.changeDefault,portComponentDefinition(o,sf.component.registered,o.sf.component.registered);var e=sf.space.list;for(var i in e){var s=e[i],a=new o.sf.space(i,{templatePath:s.templatePath});for(var c in s.list)a.list[c].root=s[c].root;portComponentDefinition(o,s.default.registered,a.default.registered)}for(var d in o.document.body.textContent="",$(o.document.body).append(n),o.sf$proxy.sfLoaderTrigger(),firstInitSFWindow&&(firstInitSFWindow(),firstInitSFWindow=void 0),!1===document.hasFocus()&&(window.requestAnimationFrame=o.requestAnimationFrame),o.addEventListener("focus",(function(){window.requestAnimationFrame=o.requestAnimationFrame})),t&&t({views:o.sf.views,url:o.sf.url}),sf.lang.init(o.document.body),windowEv)for(var u=windowEv[d],f=0;f<u.length;f++){var p=u[f];o.addEventListener(d,p,p.options)}},void 0===e.title&&(e.title="Untitled Space"),o.console.log=function(){var t;(t=console).log.apply(t,["%c[".concat(e.title,"]"),"color: #9bff82"].concat(Array.prototype.slice.call(arguments)))},o.console.warn=function(){var t;(t=console).warn.apply(t,["%c[".concat(e.title,"]"),"color: #9bff82"].concat(Array.prototype.slice.call(arguments)))},o.console.error=function(){var t;(t=console).error.apply(t,["%c[".concat(e.title,"]"),"color: #9bff82"].concat(Array.prototype.slice.call(arguments)))},o.sf$proxy=forProxying,o.onerror=o.onmessageerror=o.console.error,o.document.write("<html><head><title>".concat(e.title,"</title>").concat(headerTags,"</head><body><script>setTimeout(loaded,1000)<\/script></body></html>")),o.addEventListener("beforeunload",(function(e){sf.window.destroy(r)})),!0},source:function(e,t){if(void 0===t&&(t=window.event),void 0===t)throw new Error("Can't capture event, please add event data on parameter 2 of sf.window.source");if(void 0===e)return e.view;for(var n=t.view.document,r=0;r<e.length;r++)if(e[r].ownerDocument===n)return e[r];return null}};var windowEv={};function portComponentDefinition(e,t,n){for(var r in t){var i=n[r]=t[r].slice(0);if(void 0!==i[3])if(i[3].constructor===Object){var o=Object.create(i[3]);i[3]=o,o.html=$.parseElement(o.html.outerHTML)[0]}else{var s=i[3].tempDOM;i[3]=$.parseElement(i[3].outerHTML)[0],i[3].tempDOM=s}i[1]=e.sf$defineComponent(r)}}return sf}));
//# sourceMappingURL=scarletsframe.min.js.map
