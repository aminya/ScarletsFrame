/*
  ScarletsFrame
  A frontend library for Scarlets Framework that support
  lazy page load and element binding that can help
  simplify your code

  https://github.com/ScarletsFiction/ScarletsFrame
*/
!function(global,factory){function routerEval(code){eval(code)}void 0!==HTMLElement.prototype.remove&&void 0!==window.customElements&&void 0!==window.Reflect||(console.error("This browser was not supported"),void 0===window.customElements&&console.warn("This can be fixed by adding 'https://unpkg.com/@webcomponents/webcomponentsjs@2.3.0/webcomponents-loader.js' before loading 'scarletsframe.js'"),void 0===window.Reflect&&console.warn("This can be fixed by adding 'https://unpkg.com/core-js-bundle@3.4.0/minified.js' before loading 'scarletsframe.js'"),alert("This browser was not supported")),"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(global,routerEval):global.sf=factory(global,routerEval)}("undefined"!=typeof window?window:this,(function(window,routerEval){"use strict";void 0===typeof document&&(document=window.document);var HTMLTemplates=window.templates||{},TemplatePending=[];Object.defineProperty(window,"templates",{set:function(e){if(HTMLTemplates=e,hotReload&&internal.hotTemplate(e),0!==TemplatePending.length){var t=TemplatePending;TemplatePending=[];for(var n=0;n<t.length;n++)t[n]()}},get:function(){return HTMLTemplates}});var internal={},privateRoot={},forProxying={},sf=function(e,t){if(void 0!==e.tagName)return 1===e.nodeType&&void 0!==e.sf$controlled||(e=$.parentHasProperty(e,"sf$controlled")),null===e||t?e:e.model},hotReload=!1,sfRegex={getQuotes:/(['"])(?:\1|[\s\S]*?[^\\]\1)/g,scopeVar:"(^|[^.\\]\\w])",uniqueDataParser:/{{((@|#[\w])[\s\S]*?)}}/g,dataParser:/{{([^@%][\s\S]*?)}}/g,repeatedList:/(.*?) in (.*?)$/,itemsObserve:/\b(_model_|_modelScope)\.([\w\[\].]+)/g,parsePropertyPath:/(?:\[([\w]+)\]|\.([\w]+))/g,getSingleMask:["([^\\w.]|^)","([^\\w:]|$)"],inputAttributeType:/checkbox|radio|hidden/,anyCurlyBracket:/{{.*?}}/,allTemplateBracket:/{\[([\s\S]*?)\]}/g,anyOperation:/[ =(+-]/};function parsePropertyPath(e){var t=[];return t.unshift(e.replace(sfRegex.parsePropertyPath,(function(e,n,o){return void 0!==n?(!1===isNaN(n)?n=Number(n):'"'!==n[0]&&"'"!==n[0]||(n=n.slice(1,-1)),t.push(n),""):(t.push(o),"")}))),t}function stringifyPropertyPath(e){for(var t=e[0],n=1;n<e.length;n++)e[n].constructor===Number?t+="["+e[n]+"]":t+="."+e[n];return t}sf.link=function(e,t,n){var o,i=!1;function r(e){if(void 0!==e)if(void 0===e.set)!1===i&&void 0===n&&(n=e.value);else{if(!1!==i&&e.set!==i.set)throw new Error("There are more than one object that have different set descriptor");i=e}}if(e.constructor===Array)for(var s=0;s<e.length;s++)r(Object.getOwnPropertyDescriptor(e[s],t));else for(var t in e)r(Object.getOwnPropertyDescriptor(e[t],t));if(!1===i&&(o=n,i={configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e}}),e.constructor===Array)for(s=0;s<e.length;s++)Object.defineProperty(e[s],t,i);else for(var t in e)Object.defineProperty(e[t],t,i)};var _es="%@~";function avoidQuotes(e,t,n){e=e.split(_es).join("-");var o=[];if(e=e.replace(sfRegex.getQuotes,(function(e){return o.push(e),_es+(o.length-1)+_es})),0===o.length)return t(e);if(e=t(e),void 0!==n)for(var i=0;i<o.length;i++)e=e.replace(_es+i+_es,n(o[i]));else for(i=0;i<o.length;i++)e=e.replace(_es+i+_es,o[i]);return e}function isEmptyObject(e){for(var t in e)return!1;return!0}function compareObject(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.constructor===Array){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;var r=o.length<i.length?i:o;for(n=0;n<r.length;n++)if(e[r[n]]!==t[r[n]])return!1;return!0}function hiddenProperty(e,t,n,o){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:o,value:n})}function deepProperty(e,t){for(var n=0;n<t.length;n++)if(void 0===(e=e[t[n]]))return;return e}function capitalizeLetters(e){for(var t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].slice(1);return e.join("")}function getStaticMethods(e,t){for(var n=Object.getOwnPropertyNames(t),o=0;o<n.length;o++)"function"==typeof t[n[o]]&&e.add(n[o])}function getPrototypeMethods(e,t){if(void 0!==t.prototype){for(var n=Object.getOwnPropertyNames(t.prototype),o=n.length-1;o>=0;o--)"constructor"!==n[o]&&e.add(n[o]);var i=Object.getPrototypeOf(t);void 0!==i.prototype&&getPrototypeMethods(e,i)}}function proxyClass(e){var t=e.constructor,n=t.prototype,o=new Set;for(var i of(getPrototypeMethods(o,t),o))if(e[i]!==n[i]&&void 0===e[i].ref){let t=function(){return e.super=t.protoFunc,t.ref.apply(e,arguments)};t.ref=e[i],t.protoFunc=n[i],e[i]=t}}function toArray(e){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=e[n];return t}sf.loader=new function(){const e=this;e.loadedContent=0,e.totalContent=0,e.DOMWasLoaded=!1,e.DOMReady=!1,e.turnedOff=!0;let t=[],n=[],o=[];e.onFinish=function(t){if(e.DOMWasLoaded)return t();n.includes(t)||n.push(t)},e.domReady=function(n){if(e.DOMReady)return n();t.includes(n)||t.push(n)},e.onProgress=function(t){if(e.DOMWasLoaded)return t(e.loadedContent,e.totalContent);o.includes(t)||o.push(t)},e.f=function(t){e.loadedContent++,t.target.removeEventListener("load",e.f,{once:!0}),t.target.removeEventListener("error",e.f,{once:!0});for(let t=0;t<o.length;t++)o[t](e.loadedContent,e.totalContent)},e.css=function(t){if(e.DOMWasLoaded){for(var n=t.length-1;n>=0;n--)0!==document.querySelectorAll(`link[href*="${t[n]}"]`).length&&t.splice(n,1);if(0===t.length)return}e.turnedOff=!1,e.totalContent=e.totalContent+t.length;for(n=0;n<t.length;n++){const o=document.createElement("link");o.rel="stylesheet",o.href=t[n],o.addEventListener("load",e.f,{once:!0}),o.addEventListener("error",e.f,{once:!0}),document.head.appendChild(o)}},e.js=function(t,n){if(e.DOMWasLoaded){for(var o=t.length-1;o>=0;o--)0!==document.querySelectorAll(`script[src*="${t[o]}"]`).length&&t.splice(o,1);if(0===t.length)return}e.turnedOff=!1,e.totalContent=e.totalContent+t.length;for(o=0;o<t.length;o++){const i=document.createElement("script");i.type="text/javascript",n&&(i.async=!0),i.src=t[o],i.addEventListener("load",e.f,{once:!0}),i.addEventListener("error",e.f,{once:!0}),document.head.appendChild(i)}};let i="";function r(t){if(document.body&&(document.removeEventListener("load",r,!0),"loading"===i)){const t=document.body.querySelectorAll("img:not(onload)[src]");for(let n=0;n<t.length;n++)e.totalContent++,t[n].addEventListener("load",e.f,{once:!0}),t[n].addEventListener("error",e.f,{once:!0})}}function s(){if("interactive"===document.readyState||"complete"===document.readyState){if(!1===e.DOMReady){e.DOMReady=!0;for(let e=0;e<t.length;e++)try{t[e]()}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}}!1===e.turnedOff?l=setInterval(a,100):a(),document.removeEventListener("readystatechange",s,!0)}}e.waitImages=function(){i="loading"},document.addEventListener("load",r,!0),"interactive"===document.readyState||"complete"===document.readyState?(document.removeEventListener("load",r,!0),setTimeout(s,1)):document.addEventListener("readystatechange",s,!0);var l=-1;function a(){if(!1===e.turnedOff&&e.loadedContent<e.totalContent)return;clearInterval(l);const i=document.querySelectorAll("script, link, img");for(var r=0;r<i.length;r++)i[r].removeEventListener("error",e.f),i[r].removeEventListener("load",e.f);e.DOMWasLoaded=!0,e.turnedOff=!0;for(r=0;r<n.length;r++)try{n[r]()}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}o=t=n=null}window.sf$proxy&&(window.sf$proxy.sfLoaderTrigger=a)};const IE11=!1===Object.getOwnPropertyDescriptor(Function.prototype,"length").configurable;sf.dom=function(e,t){if(!e){if(void 0===e){const e=t=>e.find(t);return IE11&&Object.defineProperty(e,"_",{value:!0}),Object.setPrototypeOf(e,DOMList.prototype)}return _DOMList([])}return e.constructor===Function?sf.loader.onFinish(e):"<"===e[0]||">"===e[e.length-1]?_DOMList($.parseElement(e,!0)):t?void 0===t.classList?t.animateKey===$.fn.animateKey?t.find(e):$(queryElements(t,e)):_DOMList(t.querySelectorAll(e)):e.constructor===String?_DOMList(document.querySelectorAll(e)):_DOMList(e)};var $=sf.dom;const css_str=/\-([a-z0-9])/,css_strRep=(e,t)=>t.toUpperCase();class DOMList{constructor(e){if(null===e)return this.length=0,this;if(void 0===e.length)return this[0]=e,this.length=1,this;for(let t=0;t<e.length;t++)this[t]=e[t];return this.length=e.length,this}push(e){if(this._){const t=recreateDOMList(this,this.length+1);return t[this.length]=e,t}return void 0===this._s?(Object.defineProperties(this,{length:{writable:!0,enumerable:!1,value:1},_s:{enumerable:!1,value:!0}}),this[0]=e,this):(this[this.length++]=e,this)}splice(e,t){e<0&&(e=this.length+e),void 0===t&&(t=this.length-e);for(var n=this.length-t;e<n;e++)this[e]=this[e+t];if(!0===this._)return recreateDOMList(this,this.length-t);void 0===this._s&&Object.defineProperties(this,{length:{writable:!0,enumerable:!1,value:this.length},_s:{enumerable:!1,value:!0}}),this.length-=t;for(e=this.length,n=this.length+t;e<n;e++)delete this[e];return this}find(e){if(1===this.length)return _DOMList(this[0].querySelectorAll(e));const t=[];for(let n=0;n<this.length;n++)t.push.apply(t,this[n].querySelectorAll(e));return _DOMList(t)}parent(e){if(1===this.length)return _DOMList(e?this[0].closest(e):this[0].parentNode);const t=[];for(let n=0;n<this.length;n++)t.push.apply(t,this[n].closest(e));return _DOMList(t)}prev(e){let t;return 0!==this.length&&(t=$.prevAll(this[0],e,!1,!0)),_DOMList(t||[])}prevAll(e){const t=[];for(let n=0;n<this.length;n++)t.push.apply(t,$.prevAll(this[n],e));return _DOMList(t)}next(e){let t;return 0!==this.length&&(t=$.prevAll(this[0],e,!0,!0)),_DOMList(t||[])}nextAll(e){const t=[];for(let n=0;n<this.length;n++)t.push.apply(t,$.prevAll(this[n],e,!0));return _DOMList(t)}children(e){const t=[];for(let n=0;n<this.length;n++){const o=this[n].children;for(let n=0;n<o.length;n++)o[n].matches(e)&&t.push(o[n])}return _DOMList(t)}remove(){for(let e=0;e<this.length;e++)this[e].remove();return this}empty(){for(let e=0;e<this.length;e++)this[e].textContent="";return this}addClass(e){for(let t=0;t<this.length;t++)DOMTokenList.prototype.add.apply(this[t].classList,e.split(" "));return this}removeClass(e){for(let t=0;t<this.length;t++)DOMTokenList.prototype.remove.apply(this[t].classList,e.split(" "));return this}toggleClass(e){for(let t=0;t<this.length;t++)DOMTokenList.prototype.toggle.apply(this[t].classList,e.split(" "));return this}hasClass(e){for(let t=0;t<this.length;t++)if(this[t].classList.contains(e))return!0;return!1}prop(e,t){if(void 0===t)return 0!==this.length?this[0][e]:"";for(let n=0;n<this.length;n++)this[n][e]=t;return this}attr(e,t){if(void 0===t)return 0!==this.length?this[0].getAttribute(e):"";for(let n=0;n<this.length;n++)this[n].setAttribute(e,t);return this}removeAttr(e){for(let t=0;t<this.length;t++)this[t].removeAttribute(e);return this}css(e,t){if(void 0===t&&e.constructor===String)return 0!==this.length?this[0].style[e]:"";if(e.constructor===Object){for(let t in e)!1!==t.includes("-")&&(e[t.replace(css_str,css_strRep)]=e[t],delete e[t]);for(var n=0;n<this.length;n++)Object.assign(this[n].style,e);return this}e=e.replace(css_str,css_strRep);for(n=0;n<this.length;n++)this[n].style[e]=t;return this}on(e,t,n,o){for(let i=0;i<this.length;i++)void 0===internal.model.specialEvent[e]?$.on(this[i],e,t,n,o):internal.model.specialEvent[e](this[i],null,n);return this}off(e,t,n,o){for(let i=0;i<this.length;i++)void 0!==e?void 0===internal.model.specialEvent[e]?$.off(this[i],e,t,n,o):void 0!==this[i]["sf$eventDestroy_"+e]&&this[i]["sf$eventDestroy_"+e]():$.off(this[i]);return this}once(e,t,n){for(let o=0;o<this.length;o++)$.once(this[o],e,t,n);return this}trigger(e,t,n){e=e.split(" ");for(let o=0;o<e.length;o++){const i=e[o];for(let e=0;e<this.length;e++){if(!0===n){this[e][i](t);continue}let o;try{o=new window.CustomEvent(i,{detail:t,bubbles:!0,cancelable:!0})}catch(e){o=document.createEvent("Event"),o.initEvent(i,!0,!0),o.detail=t}this[e].dispatchEvent(o)}}return this}animateKey(e,t,n){for(let o=0;o<this.length;o++)$.animateKey(this[o],e,t,n);return this}each(e){for(let t=0;t<this.length;t++)e.call(this[t],t,this);return this}data(e,t){if(void 0===t)return 0!==this.length&&this[0].$data?this[0].$data[e]:void 0;for(let n=0;n<this.length;n++)void 0===this[n].$data&&(this[n].$data={}),this[n].$data[e]=t;return this}removeData(e){for(let t=0;t<this.length;t++)void 0!==this[t].$data&&delete this[t].$data[e];return this}append(e){if(e.constructor===Array)for(let t=0;t<e.length;t++)this[0].append(e[t]);else e.constructor===String?this[0].insertAdjacentHTML("beforeEnd",e):this[0].append(e);return this}prepend(e){if(e.constructor===Array)for(let t=0;t<e.length;t++)this[0].prepend(e[t]);else e.constructor===String?this[0].insertAdjacentHTML("afterBegin",e):this[0].prepend(e);return this}eq(e,t){return e<0&&(e=this.length+e),_DOMList(void 0===t?this[e]:this.slice(e,t>0?t:void 0))}insertAfter(e){const t=e.parentNode,n=e.nextSibling;if(t.insertBefore(this[0],n),void 0===this[0]){const i=toArray(this);i[0]=e.previousSibling;for(var o=1;o<i.length;o++)t.insertBefore(i[o],n);return $(i)}if(this.length>1)for(o=1;o<this.length;o++)t.insertBefore(this[o],this[o-1]);return this}insertBefore(e){const t=e.parentNode;if(t.insertBefore(this[0],e),void 0===this[0]){const o=toArray(this);o[0]=e.nextSibling;for(var n=1;n<o.length;n++)t.insertBefore(o[n],e);return $(o)}if(this.length>1)for(n=1;n<this.length;n++)t.insertBefore(this[n],e);return this}text(e){if(void 0===e)return 0!==this.length?this[0].textContent:"";for(let t=0;t<this.length;t++)this[t].textContent=e;return this}html(e){if(void 0===e)return 0!==this.length?this[0].innerHTML:"";for(let t=0;t<this.length;t++)this[t].innerHTML=e;return this}val(e){if(void 0===e)return 0!==this.length?this[0].value:"";for(let t=0;t<this.length;t++)this[t].text=e;return this}click(e){return this.trigger("click",e,!0)}blur(e){return this.trigger("blur",e,!0)}focus(e){return this.trigger("focus",e,!0)}focusin(e){return this.trigger("focusin",e)}focusout(e){return this.trigger("focusout",e)}keyup(e){return this.trigger("keyup",e)}keydown(e){return this.trigger("keydown",e)}keypress(e){return this.trigger("keypress",e)}submit(e){return this.trigger("submit",e)}change(e){return this.trigger("change",e)}mousedown(e){return this.trigger("mousedown",e)}mousemove(e){return this.trigger("mousemove",e)}mouseup(e){return this.trigger("mouseup",e)}mouseenter(e){return this.trigger("mouseenter",e)}mouseleave(e){return this.trigger("mouseleave",e)}mouseout(e){return this.trigger("mouseout",e)}mouseover(e){return this.trigger("mouseover",e)}touchstart(e){return this.trigger("touchstart",e)}touchend(e){return this.trigger("touchend",e)}touchmove(e){return this.trigger("touchmove",e)}resize(e){return this.trigger("resize",e,!0)}scroll(e){return this.trigger("scroll",e,!0)}}function _DOMList(e){if(!e||void 0===e.forEach||e.constructor!==NodeList)return new DOMList(e);const{length:t}=e;return Object.setPrototypeOf(e,DOMList.prototype),e.length=t,e}function queryElements(e,t){const n=[];for(let o=0;o<e.length;o++)n.push.apply(n,e[o].querySelectorAll(t));return n}function recreateDOMList(e,t){const n=["sel"];for(var o=1;o<t;o++)n.push("a"+o);const i={},r=Function("o",`return function(${n.join(",")}){return o.find(sel)}`)(i);for(o=0;o<t;o++)r[o]=e[o];return i.find=e=>r.find(e),Object.defineProperty(r,"_",{value:!0}),Object.setPrototypeOf(r,DOMList.prototype)}function getNamespace(e,t){let n=sf.space.list[e];if(void 0===n&&(n=sf.space.list[e]={}),void 0===n[t]){let e=n.default;if(void 0===e&&(e=n.default=createRoot_({},{}),"default"===t))return e;n[t]=createRoot_(e.modelFunc,e.registered)}return n[t]}function createRoot_(e,t){const n=function(t){let o=n.registered[t];return o?o[2]:(o=n.root,void 0===o[t]&&(o[t]={},e[t].constructor!==Function?console.warn(t,"haven't been registered. Please check your compiler settings or the compiled file"):e[t](o[t],n)),o[t])};n.root={},n.modelFunc=e,n.registered=t;n.domList=[];return n}!function(){const e=sf.dom;function t(e,t,n){void 0===e.sf$eventListener&&(e.sf$eventListener={}),void 0===e.sf$eventListener[t]&&(e.sf$eventListener[t]=[]),e.sf$eventListener[t].push(n)}function n(e,t,n,o,i){if(void 0!==e.sf$eventListener)if(o){if(e.removeEventListener(t,o,i),void 0===(r=e.sf$eventListener[t]))return;-1!==(s=r.indexOf(o))&&r.splice(s,1),0===r.length&&delete e.sf$eventListener[t]}else{var r;if(void 0!==(r=e.sf$eventListener)&&void 0!==r[t]){const o=r[t];for(var s=o.length-1;s>=0;s--)if(!n||o[s].selector===n){var{options:i}=o[s];e.removeEventListener(t,o.splice(s,1)[0],i)}delete e.sf$eventListener[t]}}else void 0!==o&&e.removeEventListener(t,o,i)}e.fn=DOMList.prototype,e.fn.add=e.fn.push,e.fn.indexOf=Array.prototype.indexOf,e.fn.forEach=Array.prototype.forEach,e.fn.concat=Array.prototype.concat,e.fn.reverse=Array.prototype.reverse,e.fn.slice=Array.prototype.slice,e.fn.filter=Array.prototype.filter,e.fn.includes=Array.prototype.includes,e.findOne=function(e,t){return void 0!==t?t.querySelector(e):document.querySelector(e)},e.isChildOf=function(e,t){let n=e.parentNode;for(;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},e.parentHasProperty=function(e,t){do{if(void 0!==e[t])return e;e=e.parentNode}while(null!==e);return null},e.prevAll=function(e,t,n,o){const i=[],r=!t||t.constructor!==String;for(e=n?e.nextSibling:e.previousSibling;null!==e;){if(!1===r){if(!0===e.matches(t)){if(o)return e;i.push(e)}}else{if(e===t){if(o)return!0;break}i.push(e)}e=n?e.nextSibling:e.previousSibling}if(!o)return i},e.nextAll=(t,n,o)=>e.prevAll(t,n,!0,o),e.on=function(n,o,i,r,s){if(o.includes(" ")){o=o.split(" ");for(let t=0;t<o.length;t++)e.on(n,o[t],i,r,s)}else{if(void 0!==r&&r.constructor===Object){const e=s;s=r,r=e}if(i.constructor===Function?(r=i,i=null):i.constructor===Object&&(s=i,i=null),i){const e=r;(r=function(t){const n=t.target.closest(i);null!==n&&e.call(n,t)}).callback=e}if(r.selector=i,r.options=s,n!==sf.window)n.addEventListener(o,r,r.options),"object"==typeof s&&s.once||t(n,o,r);else{void 0===windowEv[o]&&(windowEv[o]=[]),window.addEventListener(o,r,r.options),t(window,o,r),windowEv[o].push(r);const e=sf.window.list;for(let n in e)e[n].addEventListener(o,r,r.options),t(e[n],o,r)}}},e.once=function(t,n,o,i){e.on(t,n,o,i,{once:!0})},e.off=function(t,o,i,r,s){if(void 0!==o){if(1===(a=o.split(" ")).length)if(void 0!==i&&i.constructor===Function&&(r=i,i=void 0),t!==sf.window)n(t,o,i,r,s);else{if(void 0===windowEv[o]||0===windowEv[o].length)return;const e=windowEv[o];r?-1!==(l=e.indexOf(r))&&e.splice(l,1):e.length=0,n(window,o,i,r,s);const t=sf.window.list;for(let e in t)n(t[e],o,i,r,s)}else for(var l=0;l<a.length;l++)e.off(t,a[l])}else{if(void 0===t.sf$eventListener)return;for(var a in t.sf$eventListener)e.off(t,a)}},e.animateKey=function(t,n,o,i){if(void 0===t)return;if(o&&o.constructor===Function&&(i=o,o=void 0),void 0!==o&&o.constructor!==Number||(o={duration:o&&o.constructor===Number?o:.6,ease:"ease",fill:"both"}),o.skipOnHidden&&(null===t.offsetParent||"hidden"===window.getComputedStyle(t).visibility))return;let r=null;void 0!==t.style.animation&&(r="animationend"),void 0!==t.style.WebkitAnimation&&(r="webkitAnimationEnd");const{style:s}=t;let l=n;if(void 0!==o.duration&&(l+=` ${o.duration}s`),void 0!==o.ease&&(l+=" "+o.ease),void 0!==o.delay){if(l+=` ${o.delay}s`,"animationend"===r)var a="animationstart";else a="webkitAnimationStart";!1===o.visible&&(t.classList.add("anim-pending"),s.visibility="hidden"),e.once(t,a,(function(){!1!==t.isConnected&&(o.whenBegin&&o.whenBegin.call(t),t.classList.remove("anim-pending"),s.visibility="visible")}))}else s.visibility="visible";void 0!==o.iteration&&(l+=" "+o.iteration),void 0!==o.direction&&(l+=" "+o.direction),void 0!==o.fill&&(l+=" "+o.fill),s.webkitAnimation=s.animation=l,setTimeout((function(){if(void 0!==t.isConnected){if(t.classList.add("anim-element"),null!==t.parentNode){const e=t.offsetLeft+t.offsetWidth/2+"px"+(t.offsetTop+t.offsetHeight/2)+"px",n=t.parentNode.style;t.parentNode.classList.add("anim-parent"),n.webkitPerspectiveOrigin=n.perspectiveOrigin=e}e.once(t,r,(function(){setTimeout((function(){if(null!==t.parentNode){s.visibility="",t.classList.remove("anim-element"),s.webkitAnimation=s.animation="";const e=t.parentNode.style;e.webkitPerspectiveOrigin=e.perspectiveOrigin="",void 0!==i&&i.call(t)}}))}))}else void 0!==i&&i.call(t)}))};const o=document.createElement("div");e.parseElement=function(e,t){return o.innerHTML=`<template>${e}</template>`,t?o.firstElementChild.content.children||[]:o.firstElementChild.content.childNodes||[]},e.escapeText=function(e){const t=o;return t.textContent=e,t.innerHTML},e.remove=function(e){if(void 0!==e.remove)return e.remove();for(let t=0;t<e.length;t++)e[t].remove()};let i=null;sf.loader.domReady((function(){i=document.body.parentNode}));const r=/[~`!@#$%^&*()+={}|[\]\\:";'<>?,./ ]/;e.getSelector=function(e,t,n){if(void 0===n)n=i;else if(e===n)return t?[]:"";const o=t?"previousSibling":"previousElementSibling",s=[];for(;null!==e.parentElement;){if(!t&&e.id&&!r.test(e.id)){s.unshift("#"+e.id);break}if(e===n)break;{let n=e,i=t?0:1;for(;n[o];)n=n[o],i++;t?s.unshift(i):s.unshift(`:nth-child(${i})`)}if(null===(e=e.parentElement))break}return t?s:s.join(" > ")},e.childIndexes=function(e,t){if(0===e.length)return t;let n=t||i;e[0].constructor===String&&n.id!==e[0].substr(1)&&(n=n.querySelector(e[0]));for(let t=0;t<e.length;t++)if(n=0===e[t]?n.firstChild:n.childNodes.item(e[t]),null===n)return null;return n}}(),sf.space=(e,t)=>new Space(e,t),sf.space.list={},window.sf$proxy?internal.space=window.sf$proxy.internalSpace:internal.space={empty:!0,initComponent(e,t,n,o,i){sf.component.new(t,n,o,e.constructor===Function?e:e.sf$space,i)},initModel(e,t){const n=t.getAttribute("name");return void 0===e.sf$space.modelFunc[n]?e.sf$space.modelFunc[n]=[[t,n,e.sf$space]]:e.sf$space.modelFunc[n].constructor===Array?e.sf$space.modelFunc[n].push([t,n,e.sf$space]):void sf.model.init(t,n,e.sf$space)}},void 0===window.sf$proxy&&(forProxying.internalSpace=internal.space);class Space{constructor(e,t){if(void 0===e)throw new Error("`namespace` parameter need to be specified");if(e!==e.toLowerCase())throw new Error("`namespace` must be lowercase");this.namespace=e,this.default=getNamespace(e,"default"),this.list=sf.space.list[e],t&&(this.templatePath=t.templatePath)}getScope(e){return getNamespace(this.namespace,e||"default")}createHTML(e){const t=this;return $(window.templates[this.templatePath].replace(/<sf-space(.*?)(?:|="(.*?)")>/,(function(n,o,i){return i&&!1===isNaN(i)&&(i=Number(i)+1),(e=e||i||!1)&&(e=`="${e}"`),`<sf-space ${t.namespace}>`})))[0]}destroy(){}}!function(){const e=Space.prototype;e.model=function(e,t,n){if(void 0===t)sf.model(e,t,n,this.default);else{t.constructor===Function?n=t:internal.modelInherit[e]=t.extend;const o=this.default.modelFunc[e];if(this.default.modelFunc[e]=n,void 0!==o&&o.constructor===Array)for(let e=0;e<o.length;e++){const t=o[e];sf.model.init(t[0],t[1],t[2])}}},e.component=function(e,t,n){return sf.component(e,t,n,this.default)},e.destroy=function(){for(var e in this.root)0===e.indexOf(namespace)&&(this.root[e].$el.remove(),delete this.root[e]);for(var e in this.components.registered)0===e.indexOf(namespace)&&delete this.components.registered[e];for(var e in internal.component)0===e.indexOf(namespace)&&delete internal.component[e]}}();class SFSpace extends HTMLElement{constructor(){super(),this.sf$firstInit=!0}connectedCallback(){if(void 0!==this.sf$destroying&&(delete this.sf$destroying,clearTimeout(this.sf$destroying)),void 0!==this.sf$firstInit){delete this.sf$firstInit,forProxying.internalSpaceEmpty=internal.space.empty=!1;for(let t=0,n=this.attributes.length;t<n;t++){var{name:e}=this.attributes[t];if("class"!==e&&"style"!==e&&"id"!==e){this.sf$spaceName=e,this.sf$spaceID=this.attributes[t].value||"default";break}}if(void 0===this.sf$spaceName)throw new Error("<sf-space>: space name was undefined");this.sf$space=getNamespace(e,this.sf$spaceID),this.sf$space.domList.push(this)}}disconnectedCallback(){const e=this,t=function(){const t=e.sf$space.domList.indexOf(e);-1!==t&&e.sf$space.domList.splice(t,1)};if(window.destroying)return t();this.sf$destroying=setTimeout(t,1e3)}}function findBindListElement(e){for(e=e.parentNode;null!==e;){if(e.sf$elementReferences&&e.sf$elementReferences.template.bindList)return e;e=e.parentNode}return null}customElements.define("sf-space",SFSpace),sf.model=function(e,t,n,o){if(void 0!==t)return sf.model.for(e,t,n);if(void 0!==(o||sf.component).registered[e])return(o||root_)(e);const i=o||sf.model;return void 0===i.root[e]&&(void 0!==internal.modelInherit[e]?i.root[e]=new internal.modelInherit[e]:i.root[e]={}),i.root[e]},function(){const e=sf.model;e.root={},internal.modelPending={},internal.modelInherit={},e.index=function(e){if(e.sf$elementReferences&&e.sf$elementReferences.template.bindList||(e=findBindListElement(e)),null===e)return-1;let t=-1;const n=e.tagName,o=e;for(;null!==e;){if(e.tagName===n)t++;else if(8!==e.nodeType)break;e=e.previousSibling}o.sf$elementReferences&&o.sf$elementReferences.template.bindList;const i=o.parentNode.$VSM;return void 0!==i?t+i.firstCursor:t},e.for=function(t,n,o,i){n.constructor===Function?void 0!==(o=n).prototype.init&&(internal.modelInherit[t]=o,o={class:o}):internal.modelInherit[t]=n.extend;const r=i||e;let s;if(hotReload?hotModel(r,t,o):(s=r(t),o.constructor===Function&&o(s,r)),sf.loader.DOMWasLoaded&&void 0!==internal.modelPending[t]){const e=internal.modelPending[t];for(let t=0;t<e.length;t++)sf.model.init(e[t],e[t].getAttribute("name"));delete internal.modelPending[t]}return s||r(t)},e.modelKeys=function(e,t){if(e.constructor!==Object&&e.constructor!==Array){var n=new Set;for(var o in e)o.includes("$")||n.add(o);if(getStaticMethods(n,e.constructor),getPrototypeMethods(n,e.constructor),t){let e="";for(var o of n)0!==e.length?e+="|"+o:e+=o;return e}return Array.from(n)}n=[];for(var o in e)o.includes("$")||n.push(o);return t?n.join("|"):n}}();class SFModel extends HTMLElement{constructor(){super(),this.sf$firstInit=!0}connectedCallback(){if(void 0!==this.sf$destroying&&(delete this.sf$destroying,clearTimeout(this.sf$destroying)),void 0===this.sf$firstInit)return;if(delete this.sf$firstInit,!1===internal.space.empty){const e=this.closest("sf-space");if(null!==e)return void internal.space.initModel(e,this)}const e=this.getAttribute("name");if(void 0===sf.model.root[e]||void 0!==internal.modelPending[e])void 0===internal.modelPending[e]&&(internal.modelPending[e]=[]),internal.modelPending[e].push(this);else{if(sf.loader.DOMWasLoaded)return internal.language.refreshLang(this),sf.model.init(this,e);const t=this;sf.loader.onFinish((function(){internal.language.refreshLang(t),sf.model.init(t,e)}))}}disconnectedCallback(){const e=this,t=function(){if(void 0!==e.model){if(e.model.$el){const n=e.model.$el.indexOf(e);if(-1!==n){var t=e.model;const o=t.$el[n];t.$el=t.$el.splice(n,1),t.destroy&&t.destroy(o,0===t.$el.length)}}internal.model.removeModelBinding(e.model)}};if(window.destroying)return t();this.sf$destroying=setTimeout(t,1e3)}}customElements.define("sf-m",SFModel);var root_=function(e){if(sf.component.registered[e])return sf.component(e);if(void 0===sf.model.root[e]){sf.model.root[e]={}}return sf.model.root[e]};function prepareComponentTemplate(e,t,n,o,i){t=e.tempDOM||e.tagName.toLowerCase()===n;const r=internal.model.templateInjector(e,o,!0);return e=sf.model.extractPreprocess(e,null,o,void 0,i[4]),!1===r?i[3]=e:(r.tempDOM=t,i[3]=r),e.tempDOM=t,e}sf.component=function(e,t,n,o){if(void 0!==t&&(t.constructor===Function&&(n=t),n!==t&&sf.component.html(e,t,o),void 0!==n&&n.constructor===Function))return sf.component.for(e,t,n,o);const i=sf.component.registered[e];return i?i[2]:[]},function(){const e=sf.component;internal.component={},internal.componentInherit={};const t={};function n(n,o){const i=t[n];for(let t=i.length-1;t>=0;t--){if(i[t].namespace!==o)continue;let{el:r}=i[t];if(r=e.new(n,r,i[t].item,o,!1,!0),void 0===r)return;r.connectedCallback("init"),i.pop()}0===i.length&&delete t[n]}e.registered={},e.for=function(o,r,s,l){r.constructor===Function?void 0!==(s=r).prototype.init&&(internal.componentInherit[o]=s,s={class:s}):void 0!==r.extend&&(internal.componentInherit[o]=r.extend);const a=l||e;let c=a.registered[o];void 0===c&&(c=a.registered[o]=new Array(5),c[2]=[]),c[0]=s;const d=i(o);return c[1]=d,window["$"+capitalizeLetters(o.split("-"))]=d,void 0!==t[o]?n(o,l):hotReload&&hotComponentRefresh(a,o,s),c[2]},e.html=function(o,i,r){const s=r||e;let l=!1;if(i.constructor===Object){let t;if(i.template){if(l=i.template,window.templates){if(void 0===window.templates[i.template])return TemplatePending.push((function(){e.html(o,i,r,!0)})),console.warn(`Waiting template path '${i.template}' to be loaded`);t=window.templates[i.template],hotReload&&void 0===proxyTemplate[i.template]&&(proxyTemplate[i.template]=[s,o]),i.keepTemplate||!1!==hotReload||delete window.templates[i.template]}}else{if(!i.html)return;t=i.html}if(void 0===t)return TemplatePending.push((function(){e.html(o,i,r,!0)})),console.warn(`Waiting template for '${o}' to be loaded`);i=t}let a,c=s.registered[o];if(void 0===c&&(c=s.registered[o]=new Array(5),c[2]=[]),a=i.constructor===String?$.parseElement(i):i,1===a.length)c[3]=a[0];else{const e=document.createElement("div");e.tempDOM=!0;for(let t=a.length-1;t>=0;t--)e.insertBefore(a[t],e.firstChild);c[3]=e}!1!==l&&(l=l.split("/"),l.pop(),l=l.join("/"),""!==l&&(l+="/"),c[3].templatePath=l),void 0!==t[o]&&n(o,r),hotReload&&(!1===l?hotComponentTemplate(s,o):!1===backupCompTempl.has(c)&&backupCompTempl.set(c,c[3]))};document.createElement("div");e.new=function(n,o,i,r,s,l){if(internal.component.skip)return;if(!0===o.sf$componentIgnore)return;if(o.hasAttribute("sf-repeat-this"))return void(o.sf$componentIgnore=!0);const a=r||e;void 0!==r&&(o.sf$space=r);const c=a.registered[n];if(void 0===c||0===o.childNodes.length&&void 0===c[3]){if(!0===l)return;return void 0===t[n]&&(t[n]=[]),void t[n].push({el:o,item:i,namespace:r})}const d=/(^|:)(sf-|class|style)/,f=o.attributes,u=internal.componentInherit[n];0!==f.length&&void 0===i&&(i={});for(var p=0;p<f.length;p++)d.test(f[p].nodeName)||(i[f[p].nodeName]=f[p].value);const h=s?i:void 0!==u?new u:{};let m=0;if(void 0===h.$el?h.$el=$():m=h.$el.length,0===m){const e=c[0];e.constructor===Function&&(void 0!==u&&s&&Object.setPrototypeOf(h,u.prototype),e(h,r||sf.model,i)),h.constructor!==Object&&(proxyClass(h),h.constructor.construct&&h.constructor.construct.call(h,r||sf.model,i)),hotReload&&(h.$el.$item=i,hotComponentAdd(a,n,h))}void 0===c[4]&&(c[4]=internal.model.createModelKeysRegex(o,h,null));let v=!1;if(0===o.childNodes.length){let e=c[3],{tempDOM:t}=e;e.constructor!==Object&&(e=prepareComponentTemplate(e,t,n,h,c),({tempDOM:t}=e));const i=Object.create(e);if(0!==i.parse.length){i.parse=i.parse.slice(0);for(p=0;p<i.parse.length;p++)i.parse[p]=Object.create(i.parse[p]),i.parse[p].data=[null,h]}if(!0===t)var g=internal.model.templateParser(i,h,void 0,void 0,void 0,o);else{g=internal.model.templateParser(i,h);o.appendChild(g)}o.sf$elementReferences=g.sf$elementReferences,sf.model.bindElement(o,h,i)}else{const e={repeat:[],input:[]};internal.model.templateInjector(o,h,!1),sf.model.parsePreprocess(sf.model.queuePreprocess(o,!0,e),h,c[4]),internal.model.bindInput(e.input,h),internal.model.repeatedListBinding(e.repeat,h,r,c[4]),!0===o.sf$componentIgnore&&(o=h.$el[0],void 0!==r&&(o.sf$space=r),delete o.sf$componentIgnore,o.isConnected&&(v=!0))}return h.$el=h.$el.push(o),c[2].push(h),o.sf$collection=c[2],o.model=h,o.sf$controlled=n,o.sf$initTriggered=!0,v&&o.connectedCallback(),o};class o extends HTMLElement{constructor(t,n,o){super();const i=this.tagName.toLowerCase();if(!1===internal.space.empty){let e=n||this.closest("sf-space");if(null!==e)return e.constructor===Space&&(e=e.default),void internal.space.initComponent(e,i,this,t,o)}e.new(i,this,t,void 0,o)}connectedCallback(e){if(void 0!==this.model&&!0!==this.sf$componentIgnore){if(void 0!==this.sf$detaching)return clearTimeout(this.sf$detaching),void(this.sf$detaching=void 0);if(this.sf$initTriggered){if(delete this.sf$initTriggered,this.model.init){if(1!==this.model.$el.length)return void(this.model.initClone&&this.model.initClone(this.model.$el[this.model.$el.length-1]));this.model.constructor!==Object&&this.model.constructor.init&&this.model.constructor.init.call(this.model,this.sf$space||sf.model),this.model.init()}}else"init"!==e&&this.model.reinit&&this.model.reinit(this)}}disconnectedCallback(){if(this.sf$componentIgnore)return;if(void 0===this.model)return;const e=this,t=function(){if(void 0!==e.model)if(1===e.model.$el.length)e.model.destroy&&e.model.destroy(),void 0!==e.sf$collection&&e.sf$collection.splice(e.sf$collection.indexOf(e.model),1),hotReload&&hotComponentRemove(e);else{const t=e.model.$el.indexOf(e);if(-1!==t){const n=e.model.$el[t];e.model.$el=e.model.$el.splice(t,1),e.model.destroyClone&&e.model.destroyClone(n)}internal.model.removeModelBinding(e.model)}};if(window.destroying)return t();this.sf$detaching=setTimeout(t,500)}}function i(e){const t=customElements.get(e);if(t)return t;if(e.toLowerCase()!==e)return console.error("Please use lower case when defining component name");const n=e.length;if(e.replace(/[^\w-]+/g,"").length!==n)return console.error("Please use '-' and latin character when defining component tags");class i extends o{}return i.prototype.constructor=o.prototype.constructor,window.sf$proxy&&(i.constructor=window.opener.Function),customElements.define(e,i),i}window.sf$proxy&&(window.sf$defineComponent=i)}(),function(){var self=sf.model;self.init=function(e,t,n){if(void 0===e.model){if(void 0===t)return console.error("Parameter 2 should be model name");if(e.sf$controlled=t,void 0!==n){e.sf$namespace=n;var o=e.model=n.root[t]||n(t)}else o=e.model=sf.model.root[t]||sf.model(t);var i=!1;void 0===o.$el&&(o.$el=$(),i=!0),o.$el=o.$el.push(e),void 0===o.sf$internal&&Object.defineProperty(o,"sf$internal",{enumerabe:!1,configurable:!0,value:{modelKeysRegex:createModelKeysRegex(e,o,null),deepBinding:{}}}),o.constructor!==Object&&(void 0===o.sf$internal.proxied&&(proxyClass(o),o.sf$internal.proxied=!0),o.constructor.construct&&o.constructor.construct.call(o,n||sf.model,e));var r={repeat:[],input:[]};sf.model.parsePreprocess(sf.model.queuePreprocess(e,void 0,r),o,o.sf$internal.modelKeysRegex),bindInput(r.input,o),repeatedListBinding(r.repeat,o,n,o.sf$internal.modelKeysRegex),o.init&&o.init(e,i),o.constructor!==Object&&o.constructor.init&&o.constructor.init.call(o,n||sf.model,e)}};var processingElement=null,scope=internal.model={};function trimIndentation(e){var t=e.split("\n",3);return void 0===(t=" "!==t[0][0]||"\t"!==t[0][0]?t[1]:t[0])||0===(t=t.length-t.trim().length)?e:e.replace(RegExp("^([\\t ]{"+t+"})","gm"),"")}function _escapeParse(e,t){return avoidQuotes(e,(function(e){return e.replace(templateParser_regex,(function(e,n){return sf.dom.escapeText(t[n])}))}),(function(e){return e.replace(templateParser_regex,(function(e,n){return t[n]&&t[n].constructor===String?t[n].split('"').join("&quot;").split("'").join("&#39;"):t[n]}))}))}var modelScript_=/_result_|return/;function modelScript(e,t,n){var o=t.match(modelScript_);t=null===o?"return "+t:"_result_"===o[0]?'var _result_="";'+t.split("@return").join("_result_+=")+";return _result_":t.split("@return").join("return"),e&&t.includes("_model_")&&(t=t.split("_model_").join(e));var i=e||"_model_";!1===t.includes("_escapeParse")?i+=",_modelScope,_eP":i+=",_modelScope,_escapeParse";try{return void 0===n?new Function(i,t):new Function(i,n,t)}catch(e){console.log(t),console.error(e),sf.onerror&&sf.onerror(e)}}var applyParseIndex=internal.model.applyParseIndex=function(e,t,n,o,i,r){for(var s=0;s<t.length;s++){var l=t[s],a=n[l];if(void 0!==a)e[2*s+1]=a;else{var c=o[l];i!==(a=c.data)[1]?(a[0]=i,a=c.get(i,a[1],_escapeParse,r)):a=c.get(void 0,a[1],_escapeParse,r),e[2*s+1]=a.constructor===Object?JSON.stringify(a):a}}return e.join("")},parseIndexAllocate=internal.model.parseIndexAllocate=function(e){for(var t=e.length-1;t>0;t--)e.splice(t,0,void 0);""===e[e.length-1]&&e.pop()};function repeatedRemoveDeepBinding(e,t){if(0!==t.length)for(let o=0;o<t.length;o++){if(1===t[o].length)continue;const i=t[o].slice(0,-1);if(e.constructor!==RepeatedList)for(let t in e){void 0!==(n=deepProperty(e[t],i))&&internal.model.removeModelBinding(n)}else for(let t=0;t<e.length;t++){var n;void 0!==(n=deepProperty(e[t],i))&&internal.model.removeModelBinding(n)}}}function modelToViewBinding(e,t,n,o,i){const r=e;let s=t;if(t.constructor===Array)if(1===t.length)t=t[0];else{if(void 0===deepProperty(e,t.slice(0,-1)))return;for(let n=0,o=t.length-1;n<o;n++){let o=e[t[n]];if("object"!=typeof o)return;void 0===Object.getOwnPropertyDescriptor(e,t[n]).set&&Object.defineProperty(e,t[n],{enumerable:!0,configurable:!0,get:()=>o,set:e=>(Object.assign(o,e),e)}),e=o}t=t[t.length-1]}if(e.constructor===Array&&"length"===t)return;void 0===e.sf$bindedKey&&initBindingInformation(e);let l=e.sf$bindedKey;var a;if(void 0!==l[t])return!1===(a=l[t]).includes(n)&&a.push(n),void(void 0!==o&&(void 0===a.input?(a.input=[o],a.input.type=i):a.input.push(o)));(l=l[t]=[n],void 0!==o)&&((a=l).input=[o],a.input.type=i);const c=Object.getOwnPropertyDescriptor(e,t);if(void 0===c||void 0!==c.set)return;s.constructor===Array&&(void 0!==r.sf$internal&&1!==s.length&&(r.sf$internal.deepBinding[s.slice(0,-1).join("%$")]=!0),s=stringifyPropertyPath(s));let d=e[t];null==d&&(d="");let f=e["on$"+t],u=e["m2v$"+t];f&&Object.defineProperty(e,"on$"+t,{set(e){f=e},get:()=>f}),u&&Object.defineProperty(e,"m2v$"+t,{set(e){u=e},get:()=>f}),Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>d,set(t){if(d!==t){let n,o,i;!1===inputBoundRunning&&(void 0!==u&&(n=u.call(e,t),void 0!==n&&(o=!0)),void 0!==f&&(n=f.call(e,t,!0))),d=void 0!==n?n:t;for(let e=0;e<l.length;e++)i=l[e],i.inputBoundRun?i(d,l.input):syntheticTemplate(i.element,i.template,s,r);o&&(d=t)}inputBoundRunning=!1}})}internal.model.removeModelBinding=function(e,t){if(void 0===e)return;if(void 0!==window.sf$proxy)return window.sf$proxy.removeModelBinding(e,t);const n=e.sf$bindedKey;for(let t in n){if(void 0!==e[t]&&(e[t].constructor===RepeatedProperty||e[t].constructor===RepeatedList)){const r=e[t];if(r.constructor===RepeatedList)for(var o=0;o<r.length&&"object"==typeof r[o];o++)internal.model.removeModelBinding(r[o]);else for(let e in r){if("object"!=typeof r[e])break;internal.model.removeModelBinding(r[e])}if(r.$EM.constructor===ElementManipulatorProxy){const{list:e}=r.$EM;for(o=e.length-1;o>=0;o--)!1===e[o].parentNode.isConnected&&(e[o].isComponent||repeatedRemoveDeepBinding(r,e[o].template.modelRef_path),e.splice(o,1));if(0!==e.length)continue}else{if(!1!==r.$EM.parentNode.isConnected)continue;r.$EM.isComponent||repeatedRemoveDeepBinding(r,r.$EM.template.modelRef_path)}if(r.$virtual&&(r.$virtual.destroy(),delete r.$virtual),delete r.$EM,delete n[t],delete e[t],e[t]=r,r.constructor===RepeatedList){Object.setPrototypeOf(r,Array.prototype);continue}Object.setPrototypeOf(r,Object.prototype);for(let e in r){var i=r[e];delete r[e],r[e]=i}continue}const r=n[t];for(o=r.length-1;o>=0;o--)r[o].constructor!==Function&&!1===r[o].element.isConnected&&r.splice(o,1);if(void 0!==r.input){for(o=r.input.length-1;o>=0;o--)!1===r.input[o].isConnected&&r.input.splice(o,1);if(0===r.input.length)for(o=r.length-1;o>=0;o--)r[o].inputBoundRun&&r.splice(o,1)}if(0===r.length){if(delete n[t],void 0===e[t]||void 0===Object.getOwnPropertyDescriptor(e,t).set)continue;i=e[t];delete e[t],e[t]=i}}if(void 0!==t||void 0===e.sf$internal)return;const r=e.sf$internal.deepBinding;for(let t in r){const n=deepProperty(e,t.split("%$"));void 0!==n&&internal.model.removeModelBinding(n,!0)}},void 0===window.sf$proxy&&(forProxying.removeModelBinding=internal.model.removeModelBinding),self.bindElement=function(e,t,n,o,i){if(void 0===n){if(void 0!==e.model)return void console.error("Unexpected rebinding",e,"Try wrap the level one {{ mustache }} with an <element/>");if(null!==e.parentNode&&e.parentNode.hasAttribute("sf-lang"))return;if(n=self.extractPreprocess(e,null,t,void 0,i),templateParser(n,t,!0),delete n.addresses,null!==e.parentNode){const o=n.html;e.tagName.includes("-")&&(o.sf$componentIgnore=!0,e.sf$componentIgnore=!0,t.$el[0]=o),e.parentNode.replaceChild(o,e)}e=n.html,delete n.html}let r=n.modelRefRoot_path;for(var s=0;s<r.length;s++)modelToViewBinding(t,r[s],{element:e,template:n});if(void 0!==n.modelRef_path){n.modelRef_path.revalidate&&(delete n.modelRef_path.revalidate,revalidateBindingPath(n.modelRef,n.modelRef_path,o)),r=n.modelRef_path;for(s=0;s<r.length;s++)modelToViewBinding(o,r[s],{element:e,template:n})}};let rejectUntrusted=!1;function eventHandler(that,data,_modelScope,rootHandler,template){const modelKeys=sf.model.modelKeys(_modelScope,!0);let direct=!1,script=data.value;script=avoidQuotes(script,(function(e){return!1===sfRegex.anyOperation.test(e)&&(direct=!0),e.replace(template.modelRefRoot_regex,(e,t,n)=>t+"_modelScope."+n)}));const name_=data.name.slice(1);if(rootHandler){const elementIndex=$.getSelector(that,!0,rootHandler);void 0===rootHandler.sf$listListener&&(rootHandler.sf$listListener={});let withKey=!1;if(void 0!==template.uniqPattern&&(withKey=!0),direct)var func=eval(script);else if(withKey)var func=new Function("event","_model_","_modelScope",template.uniqPattern,script);else var func=new Function("event","_model_","_modelScope",script);let listener=rootHandler.sf$listListener[name_];if(void 0!==listener)return void(!1===listener.set.has(elementIndex.join(""))&&(listener.push([elementIndex,func]),listener.set.add(elementIndex.join(""))));listener=rootHandler.sf$listListener[name_]=[[elementIndex,func]],listener.set=new Set([elementIndex.join("")]);let found=null;const findEventFromList=function(e){e:for(let t=0;t<listener.length;t++){const n=listener[t];if(void 0===e){if(0!==n[0].length)continue;return found=n[0],n[1]}const o=n[0];for(let t=0;t<o.length;t++)if(o[t]!==e[t])continue e;return found=n[0],n[1]}};script=function(e){const t=e.target;if(t!==rootHandler)if(t.sf$elementReferences&&t.sf$elementReferences.template.bindList){void 0!==(n=findEventFromList(void 0))&&n.call(e.target,e,e.target.model,_modelScope,withKey&&e.target.sf$repeatListIndex)}else{const o=findBindListElement(t);if(null===o)return;var n;void 0!==(n=findEventFromList($.getSelector(t,!0,o)))&&n.call($.childIndexes(found,o),e,o.model,_modelScope,withKey&&o.sf$repeatListIndex)}}}else script=direct?eval(script):new Function("_modelScope","event",script).bind(that,_modelScope);let containSingleChar=!1,keys=name_.split("."),eventName=keys.shift();"unfocus"===eventName&&(eventName="blur");for(let e=keys.length-1;e>=0;e--)if(1===keys[e].length){containSingleChar=!0;break}keys=new Set(keys),rejectUntrusted&&keys.add("trusted");const options={};if(keys.has("once")&&(options.once=!0,keys.delete("once")),keys.has("passive")&&(keys.has("prevent")&&console.error("Can't preventDefault when using passive listener",that),options.passive=!0,keys.delete("passive")),keys.has("capture")&&(options.capture=!0,keys.delete("capture")),keys.has("right")&&(eventName.includes("mouse")||eventName.includes("pointer"))&&(rootHandler||that).addEventListener("contextmenu",(function(e){e.preventDefault()}),options),specialEvent[eventName])return void specialEvent[eventName](that,keys,script,_modelScope,rootHandler);let pointerCode=0;keys.has("left")&&(pointerCode|=1,keys.delete("left")),keys.has("middle")&&(pointerCode|=2,keys.delete("middle")),keys.has("right")&&(pointerCode|=4,keys.delete("right")),keys.has("4th")&&(pointerCode|=8,keys.delete("4th")),keys.has("5th")&&(pointerCode|=16,keys.delete("5th"));let modsCode=0;if(keys.has("ctrl")&&(modsCode|=1,keys.delete("ctrl")),keys.has("alt")&&(modsCode|=2,keys.delete("alt")),keys.has("shift")&&(modsCode|=4,keys.delete("shift")),keys.has("meta")&&(modsCode|=8,keys.delete("meta")),direct&&0===keys.size&&0===pointerCode&&0===modsCode)var callback=script;else var callback=function(e){if(!1===e.isTrusted&&keys.has("trusted"))rejectUntrusted&&sf.security.report&&sf.security.report(e);else if(keys.has("stop")?e.stopPropagation():keys.has("stopAll")&&(e.stopImmediatePropagation(),e.stopPropagation()),void 0===e.ctrlKey||0===modsCode||!(1&modsCode&&!0!==e.ctrlKey||2&modsCode&&!0!==e.altKey||4&modsCode&&!0!==e.shiftKey||8&modsCode&&!0!==e.metaKey)){if(e.constructor===KeyboardEvent){if(containSingleChar&&!keys.has(e.key))return;e.preventDefault()}else if(e.constructor===MouseEvent||e.constructor===PointerEvent){if(0!==pointerCode&&!(0===e.buttons?pointerCode&1<<e.which-1:e.buttons===pointerCode))return;e.preventDefault()}else if(e.constructor===TouchEvent){if(containSingleChar&&!keys.has(e.touches.length))return;e.preventDefault()}else keys.has("prevent")&&e.preventDefault();script.call(this,e)}};(rootHandler||that).addEventListener(eventName,callback,options),void 0===options.once&&((rootHandler||that)["sf$eventDestroy_"+eventName]=function(){(rootHandler||that).removeEventListener(eventName,callback,options)}),rootHandler&&(that=null)}sf.security=function(e){1&e&&(rejectUntrusted=!0)};const toDegree=180/Math.PI;var specialEvent=internal.model.specialEvent={taphold(e,t,n,o){const i=new Set;let r=null;function s(){e.removeEventListener("pointerup",f,{once:!0}),e.removeEventListener("pointercancel",f,{once:!0}),c.removeEventListener("pointermove",l),i.delete(r.pointerId),n.call(e,r)}function l(t){(Math.abs(r.clientX-t.clientX)>1||Math.abs(r.clientY-t.clientY)>1)&&(clearTimeout(a),i.delete(t.pointerId),e.removeEventListener("pointerup",f,{once:!0}),e.removeEventListener("pointercancel",f,{once:!0}),c.removeEventListener("pointermove",l),r=null)}var a=0,c=document;function d(t){if(clearTimeout(a),c=t.view.document,i.add(t.pointerId),i.size>1)return t.preventDefault(),t.stopPropagation(),e.removeEventListener("pointerup",f,{once:!0}),e.removeEventListener("pointercancel",f,{once:!0}),void c.removeEventListener("pointermove",l);r=t,a=setTimeout(s,700),e.addEventListener("pointerup",f,{once:!0}),e.addEventListener("pointercancel",f,{once:!0}),c.addEventListener("pointermove",l)}function f(e){c.removeEventListener("pointermove",l),r=null,i.delete(e.pointerId),clearTimeout(a)}e.addEventListener("pointerdown",d),e.sf$eventDestroy_taphold=function(){e.removeEventListener("pointerdown",d)}},gesture(e,t,n,o){touchGesture(e,(function(t){n.call(e,t)}))},dragmove(e,t,n,o){function i(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),n.call(e,t)}function r(e){e.preventDefault()}e.style.touchAction="none";let s=document;const l=function(t){t.preventDefault(),t.stopPropagation(),n.call(e,t),s=t.view.document,s.addEventListener("pointermove",i),s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("pointerup",a,{once:!0}),s.addEventListener("pointercancel",a,{once:!0})},a=function(t){t.preventDefault(),t.stopPropagation(),n.call(e,t),s=t.view.document,s.removeEventListener("pointermove",i),s.removeEventListener("touchmove",r,{passive:!1}),s.removeEventListener("pointercancel",a,{once:!0}),e.addEventListener("pointerdown",l,{once:!0})};e.addEventListener("pointerdown",l),e.sf$eventDestroy_dragmove=function(){e.removeEventListener("pointerdown",l,{once:!0}),document.removeEventListener("pointermove",i),document.removeEventListener("pointercancel",a,{once:!0}),document.removeEventListener("pointerup",a,{once:!0})}},filedrop(e,t,n,o){e.addEventListener("dragover",(function(e){e.preventDefault()})),e.addEventListener("drop",(function(t){if(t.preventDefault(),t.dataTransfer.items){const o=[];for(let e=0;e<t.dataTransfer.items.length;e++)"file"===t.dataTransfer.items[e].kind&&o.push(t.dataTransfer.items[e].getAsFile());n.call(e,o)}else n.call(e,t.dataTransfer.files)})),e.sf$eventDestroy_filedrop=function(){e.removeEventListener("dragover",dragover),e.removeEventListener("drop",drop)}}};function touchGesture(e,t){let n=0,o=0,i=0,r=0,s="",l=!1;const a=[];function c(e,t){for(let n=a.length-1;n>=0;n--)if(a[n].pointerId===t.pointerId)return void(2===e?a.splice(n,1):1===e&&(a[n]=t));0===e&&a.push(t)}let d=document;const f=function(f){if(f.preventDefault(),c(0,f),d=f.view.document,1===a.length&&(l&&a.unshift({pointerId:"custom",clientX:e.offsetLeft+e.offsetWidth/2,clientY:e.offsetTop+e.offsetHeight/2}),s=e.style.touchAction,e.style.touchAction="none",d.addEventListener("pointerup",p),d.addEventListener("pointercancel",p)),2===a.length){f.stopPropagation();const e=a[1].clientX-a[0].clientX,s=a[1].clientY-a[0].clientY;i=n=.01*Math.sqrt(e**2+s**2),r=o=Math.atan2(s,e)*toDegree,f.scale=f.angle=f.totalScale=f.totalAngle=0,t(f),d.addEventListener("pointermove",u)}else d.removeEventListener("pointermove",u)},u=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),c(1,e);const s=a[0],l=a[1],d=l.clientX-s.clientX,f=l.clientY-s.clientY,u=.01*Math.sqrt(d**2+f**2),p=Math.atan2(f,d)*toDegree;e.scale=u-i,e.angle=p-r,e.totalScale=u-n,e.totalAngle=p-o,t(e),i=u,r=p},p=function(l){l.preventDefault(),c(2,l),a.length<=1?(0===a.length&&(d.removeEventListener("pointerup",p),d.removeEventListener("pointercancel",p)),e.style.touchAction=s,d.removeEventListener("pointermove",u),l.scale=l.angle=0,l.totalScale=i-n,l.totalAngle=r-o,t(l)):(d.addEventListener("pointerup",p),d.addEventListener("pointercancel",p),2===a.length&&(d.removeEventListener("pointermove",u),l.scale=l.angle=0,t(l)))};e.addEventListener("pointerdown",f),e.sf$eventDestroy_gesture=function(){e.removeEventListener("pointerdown",f),$(sf.window).off("keydown",m)};const h=function(e){l&&!e.ctrlKey&&(l=!1,a.length=0,d.removeEventListener("pointermove",u),d.removeEventListener("keyup",h))},m=function(e){e.ctrlKey&&(d=e.view.document,l=!0,d.addEventListener("keyup",h))};$(sf.window).on("keydown",m)}let inputBoundRunning=!1;const callInputListener=function(e,t){const n=e.sfModel["v2m$"+e.sfBounded],o=e.sfModel["on$"+e.sfBounded];if(void 0!==n||void 0!==o){let i,r=e.sfModel[e.sfBounded];null!=r&&r.constructor===Array&&(r=r.slice(0));try{void 0!==n&&(i=n.call(e.sfModel,t)),void 0!==o&&(i=o.call(e.sfModel,t,!1),void 0!==i&&(e.sfFeedback=!0))}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}return i}},inputTextBound=function(e){if(!0===e.fromSFFramework)return;const t=inputBoundRunning=e.target;t.viewInputted=!0;const n=t.typeData===Number?Number(t.value):t.value,o=callInputListener(t,n);t.sfFeedback&&(t.sfFeedback=!1,t.value=o),t.sfModel[t.sfBounded]=void 0!==o?o:n},inputFilesBound=function(e){if(!0===e.fromSFFramework)return;const t=e.target,n=callInputListener(t,t.files);if(void 0!==n)if(n&&0!==n.length){const e=new DataTransfer;for(let t=0;t<n.length;t++)e.items.add(n[t]);t.sfModel[t.sfBounded]=e.files,t.sfFeedback&&(t.sfFeedback=!1,t.files=e.files)}else t.value="";else t.sfModel[t.sfBounded]=t.files},inputCheckBoxBound=function(e){if(!0===e.fromSFFramework)return;const t=inputBoundRunning=e.target;t.viewInputted=!0;const n=t.sfModel,{constructor:o}=n[t.sfBounded];let i;o===Boolean||t.typeData===Boolean?i=t.checked:t.typeData===Number?i=Number(t.value):({value:i}=t);const r=callInputListener(t,i);if(void 0!==r&&(i=r,t.sfFeedback&&(t.sfFeedback=!1,assignElementData.checkbox(i,t))),o===Array){const e=n[t.sfBounded].indexOf(i);-1===e&&!0===t.checked?n[t.sfBounded].push(i):-1!==e&&!1===t.checked&&n[t.sfBounded].splice(e,1)}else n[t.sfBounded]=i},inputSelectBound=function(e){if(!0===e.fromSFFramework)return;const t=inputBoundRunning=e.target;t.viewInputted=!0;const{typeData:n}=t;let o=[];if(!0===t.multiple){const e=t.selectedOptions;for(let t=0;t<e.length;t++)o.push(n===Number?Number(e[t].value):e[t].value)}else o=n===Number?Number(t.selectedOptions[0].value):t.selectedOptions[0].value;const i=callInputListener(t,o);void 0!==i?(t.sfFeedback&&(t.sfFeedback=!1,assignElementData.select(i,t)),t.sfModel[t.sfBounded]=i):t.sfModel[t.sfBounded]=o};var assignElementData={select(e,t){const n=t.options,{typeData:o}=t;if(e.constructor!==Array)for(var i=0,r=n.length;i<r;i++)n[i].selected=o===String?n[i].value===e:n[i].value==e;else for(i=0,r=n.length;i<r;i++)n[i].selected=e.includes(o===Number?Number(n[i].value):n[i].value)},checkbox(e,t){e.constructor===Array?t.checked=e.includes(t.typeData===Number?Number(t.value):t.value):e.constructor===Boolean?t.checked=Boolean(e):t.typeData===String?t.checked=t.value===e:t.checked=t.value==e},file(e,t){if(e&&0!==e.length){const n=new DataTransfer;for(let t=0;t<e.length;t++)n.items.add(e[t]);t.files=n.files}else t.value=""}};const inputBoundRun=function(e,t){if(null!=e)for(let n=0;n<t.length;n++){if(inputBoundRunning===t[n])continue;if(1===t.type)t[n].value=e;else if(2===t.type)assignElementData.select(e,t[n]);else if(3===t.type)t[n].checked=e==t[n].value;else if(4===t.type)assignElementData.checkbox(e,t[n]);else if(5===t.type){assignElementData.file(e,t[n]);continue}const o=new Event("change");o.fromSFFramework=!0,t[n].dispatchEvent(o)}};inputBoundRun.inputBoundRun=!0;const triggerInputEvent=function(e){!0!==e.fromSFFramework&&(!0!==e.target.viewInputted?e.target.dispatchEvent(new Event("input")):e.target.viewInputted=!1)},elementBoundChanges=function(e,t,n,o,i,r){void 0===e.sf$bindedKey&&initBindingInformation(e);const s=e[t];var l=0;let a=null;null!=s&&(a=s.constructor);if("number"===(n.getAttribute("typedata")||"").toLowerCase()&&(a=Number),n.typeData=a,$.on(n,"change",triggerInputEvent),"TEXTAREA"===n.tagName)$.on(n,"input",inputTextBound),l=1,!1===o&&(n.value=s);else if(void 0!==n.selectedOptions)$.on(n,"input",inputSelectBound),l=2,assignElementData.select(s,n);else{"radio"===(l=n.type.toLowerCase())?($.on(n,"input",inputTextBound),l=3,n.checked=s==n.value):"checkbox"===l?($.on(n,"input",inputCheckBoxBound),l=4,assignElementData.checkbox(s,n)):"file"===l?($.on(n,"input",inputFilesBound),l=5):($.on(n,"input",inputTextBound),l=1,!1===o&&(n.value=s))}!0!==o&&modelToViewBinding(i,r||t,inputBoundRun,n,l)},bindInput=internal.model.bindInput=function(e,t,n,o){let i,r,s;for(let a=0;a<e.length;a++){if(void 0===e[a].getAttribute?(i=e[a].el,r=1===e[a].id,s=e[a].rule):(i=e[a],r=i.hasAttribute("sf-into"),s=r?i.getAttribute("sf-into"):i.getAttribute("sf-bind"),!1===r?i.removeAttribute("sf-bind"):i.removeAttribute("sf-into")),""===s&&(s=i.getAttribute("name")),null===s){console.error("Property key to be bound wasn't be found",i);continue}let c=t,d=t;void 0!==n&&(0===s.indexOf(n+".")?s=s.replace(/\w+\./,""):d=c=o);let f=null;if(void 0===c[s]){let e=parsePropertyPath(s);if(f=e.slice(),1!==e.length){var l=e.pop();e=deepProperty(c,e)}else e=void 0;if(void 0===e)return void console.error(`Can't get property "${s}" on model`,c);c=e,s=l}i.sfBounded=s,i.sfModel=c,elementBoundChanges(c,s,i,r,d,f)}},dataParser=function(e,t,n,o,i,r){const s=[],l=i.length;return e.replace(sfRegex.dataParser,(function(e,a){a=(a=avoidQuotes(a,(function(e){return e=e.split("&amp;").join("&").split("&lt;").join("<").split("&gt;").join(">"),void 0!==n.modelRef_regex&&(e=e.replace(n.modelRef_regex,(e,t,n)=>t+"_model_"+n)),e.replace(n.modelRefRoot_regex,(e,t,n)=>t+"_modelScope."+n)}))).trim();const c=s.indexOf(a);return-1===c?(s.push(a),!0===r?i.push(a):i.push({type:REF_DIRECT,data:[a,t,o]}),`{{%=${s.length+l-1}%`):`{{%=${c+l}%`}))},uniqueDataParser=function(e,t,n){e=e.replace(sfRegex.allTemplateBracket,(function(e,o){if(!1===sfRegex.anyCurlyBracket.test(o))return`_result_ += '${o.split("\\").join("\\\\").split("'").join("\\'").split("\n").join("\\\n")}'`;const i=[];return`_result_ += (function(){return _escapeParse("${o=dataParser(o,null,t,n,i,!0).split("\\").join("\\\\").split('"').join('\\"').split("\n").join("\\\n")}", [${i.join(",")} ])}).apply(null, arguments);`}));const o=[];return[e.replace(sfRegex.uniqueDataParser,(function(e,i){let r=!1;if(r=(i=avoidQuotes(i,(function(e){return e=e.split("&amp;").join("&").split("&lt;").join("<").split("&gt;").join(">"),void 0!==t.modelRef_regex&&(e=e.replace(t.modelRef_regex,(e,t,n)=>t+"_model_"+n)),e.replace(t.modelRefRoot_regex,(e,t,n)=>t+"_modelScope."+n)}))).split("@if "),1!==r.length){r=r[1].split(":");const e=r.shift(),t=findElse(r);t.type=REF_IF,t.data=[null,n],t.if=[e.trim(),t.if.trim()],null!==t.elseValue&&(t.elseValue=t.elseValue.trim());for(let e=0;e<t.elseIf.length;e++){const n=t.elseIf[e];n[0]=n[0].trim(),n[1]=n[1].trim()}return o.push(t),"{{%%="+(o.length-1)}return r=i.split("@exec"),1!==r.length?(o.push({type:REF_EXEC,data:[r[1],null,n]}),"{{%%="+(o.length-1)):""})),o]};var findElse=function(e){var t=null;2===(t=(e=(e=e.join(":")).split("@elseif "))[e.length-1].split("@else")).length?(e[e.length-1]=t[0],t=(t=t.pop()).substr(t.indexOf(":")+1)):t=null;const n={if:e.shift(),elseValue:t};n.elseIf=new Array(e.length);for(let t=0;t<e.length;t++){const o=e[t].split(":");n.elseIf[t]=[o.shift(),o.join(":")]}return n};function addressAttributes(e,t){const n=e.attributes,o=[];let i=0;for(let s=n.length-1;s>=0;s--){const l=n[s];let a=l.value.includes("{{%=");if("@"===l.name[0]){if(a){console.error("To avoid vulnerability, template can't be used inside event callback",e);continue}t.modelRef_regex&&(l.value=l.value.replace(t.modelRef_regex,(e,t,n)=>t+"_model_"+n)),o.push({name:l.name,value:l.value.trim(),event:!0}),e.removeAttribute(l.name)}if(a){if(":"===l.name[0]){var r={name:l.name.slice(1),value:l.value.trim()};e.removeAttribute(l.name),e.setAttribute(r.name,"")}else{r={name:l.name,value:l.value.trim()};l.value=""}i=[],a=r.value.replace(templateParser_regex,(function(e,t){return i.push(Number(t)),""})),""===a&&1===i.length?r.direct=i[0]:(r.parse_index=i,r.value=r.value.replace(/[\t\r\n]/g,"").replace(/ {2,}/g," ").split(templateParser_regex_split),parseIndexAllocate(r.value)),o.push(r)}}return o}function toObserve(e,t,n){const o="_model_"===t?toObserve.template.modelRef:toObserve.template.modelRefRoot;return void 0===o[n]?(o[n]=[toObserve.template.i],o===toObserve.template.modelRef?toObserve.template.modelRef_path.push(parsePropertyPath(n)):toObserve.template.modelRefRoot_path.push(parsePropertyPath(n))):!1===o[n].includes(toObserve.template.i)&&o[n].push(toObserve.template.i),e}internal.model.templateInjector=function(e,t,n){const o=e.getElementsByTagName("sf-reserved"),i=e.getElementsByTagName("sf-template");if(0!==i.length){if(void 0===(l=window.templates))throw new Error("<sf-template> need `window.templates` to be loaded first");for(var r=i.length-1;r>=0;r--){let t=(a=i[r]).getAttribute("path");null===t&&(t=a.getAttribute("get-path"),null!==t&&(t=deepProperty(window,parsePropertyPath(t)))),null!==t?void 0!==t&&("."===t[0]&&void 0!==e.templatePath&&(t=t.replace("./",e.templatePath)),c=l[t]):(t=a.getAttribute("get-html"),c=deepProperty(window,parsePropertyPath(t))),void 0!==c?(c=toArray($.parseElement(c)),$(c).insertBefore(a.nextSibling||a),a.remove()):(console.log(a,"Template path was not found",t),a.remove())}}let s=0!==o.length;if(!0===n&&!0===s){e.sf$hasReserved=!0,e.sf$componentIgnore=!0;var l=internal.component.skip;internal.component.skip=!0,s=e.cloneNode(!0),internal.component.skip=l}if(0!==o.length)if(void 0===t.sf$reserved)for(r=o.length-1;r>=0;r--)o[r].remove();else for(l=t.sf$reserved,r=o.length-1;r>=0;r--){var a,c;void 0!==(c=l[(a=o[r]).getAttribute("name")])?(c=$.parseElement(c),$(c).insertBefore(a.nextSibling||a),a.remove()):a.remove()}return s};const createModelKeysRegex=internal.model.createModelKeysRegex=function(e,t,n){const o=self.modelKeys(t,!0);if(0===o.length)throw console.error(t,$(e.outerHTML)[0]),new Error("Template model was not found, maybe some script haven't been loaded");const i={};return i.modelRefRoot_regex=RegExp(sfRegex.scopeVar+"("+o+")","g"),null!==n&&(i.modelRef_regex=RegExp(sfRegex.getSingleMask.join(n),"gm")),i.modelRef_regex_mask=n,i};self.extractPreprocess=function(e,t,n,o,i,r,s){if(void 0!==e.model)return console.error("[Violation] element already has a model, template extraction aborted",e,e.model,t,n);const l=e.querySelectorAll("[sf-repeat-this]");for(var a=0;a<l.length;a++){var c=l[a];(b=document.createElement("template")).classList.add("sf-repeat-this-prepare"),c.parentNode.replaceChild(b,c)}let d;d=void 0===i.parse?Object.create(i):{modelRefRoot_regex:i.modelRefRoot_regex,modelRef_regex:i.modelRef_regex,modelRef_regex_mask:i.modelRef_regex_mask},d.modelRef_regex_mask!==t&&(d.modelRef_regex=RegExp(sfRegex.getSingleMask.join(t),"gm"),d.modelRef_regex_mask=t),d.modelRefRoot={},d.modelRefRoot_path=[],null!==t&&(d.modelRef={},d.modelRef_path=[]);let f=e.outerHTML.replace(/[ \t]{2,}/g," ");f=uniqueDataParser(f,d,n);const u=f[1];f=dataParser(f[0],null,d,n,u);const p=internal.component.skip;internal.component.skip=!0,void 0!==o&&(f=`<${o}>${f}</${o}>`),f=$.parseElement(f,!0)[0],void 0!==o&&(f=f.firstElementChild,f.remove()),internal.component.skip=p;const h=f.getElementsByClassName("sf-repeat-this-prepare");for(a=0;a<l.length;a++){(c=h[0]).parentNode.replaceChild(l[a],c)}d.specialElement={repeat:[],input:[]};const m=Array.from(self.queuePreprocess(f,!0,d.specialElement)),v=[];for(a=m.length-1;a>=0;a--){const e={nodeType:(w=m[a]).nodeType};if(1===e.nodeType)e.attributes=addressAttributes(w,d),e.address=$.getSelector(w,!0);else if(3===e.nodeType){let t=w.textContent;var g=[];if(t.replace(/{{%%=([0-9]+)/gm,(function(e,t){g.push(Number(t))})),0!==g.length){t=t.split(/{{%%=[0-9]+/gm);for(var y=0;y<t.length;y++)t[y]=trimIndentation(t[y]).trim();w.textContent=t.shift();const e=w.parentNode,{nextSibling:n}=w;let o=null;0!==g.length&&0!==w.textContent.length?o=$.getSelector(w,!0):null!==w.previousSibling&&(o=$.getSelector(w.previousSibling,!0));const i=v.length;for(y=0;y<g.length;y++){var b=document.createComment("");if(e.insertBefore(b,n),v.push({nodeType:-1,parse_index:g[y],startFlag:o,address:$.getSelector(b,!0)}),t[y]){const i=document.createTextNode(t[y]);e.insertBefore(i,n),y+1<g.length&&(o=$.getSelector(i,!0))}else null!==o&&y+1<g.length&&(o=o.slice(),o[o.length-1]++)}if(""===w.textContent){w.remove();for(y=i;y<v.length;y++){var w;(w=v[y].address)[w.length-1]--}continue}if(-1===w.textContent.search(/{{%=[0-9]+%/))continue}g=[],t=w.textContent.replace(templateParser_regex,(function(e,t){return g.push(Number(t)),""})),""===t&&1===g.length?e.direct=g[0]:(e.value=w.textContent.replace(/[ \t]{2,}/g," ").split(templateParser_regex_split),parseIndexAllocate(e.value),e.parse_index=g),e.address=$.getSelector(w,!0),w.textContent="-"}v.push(e)}if(toObserve.template=d,function(){for(let n=0;n<u.length;n++){const o=u[n];if(o.type!==REF_DIRECT){if(o.type===REF_IF){var e=o.if.join(";");o.if[0]=modelScript(t,o.if[0],s),o.if[1]=modelScript(t,o.if[1],s),null!==o.elseValue&&(e+=";"+o.elseValue,o.elseValue=modelScript(t,o.elseValue,s));for(let n=0;n<o.elseIf.length;n++){const i=o.elseIf[n];e+=i.join(";"),i[0]=modelScript(t,i[0],s),i[1]=modelScript(t,i[1],s)}}else if(o.type===REF_EXEC){e=o.data.shift();o.get=modelScript(t,e,s)}toObserve.template.i=n,e.split('"').join("'").replace(sfRegex.itemsObserve,toObserve)}else toObserve.template.i=n,o.data[0]=o.data[0].replace(sfRegex.itemsObserve,toObserve,d,!0),o.get=modelScript(t,o.data.shift(),s)}}(),delete toObserve.template.i,toObserve.template=void 0,revalidateTemplateRef(d,n),0!==d.specialElement.input.length){const e=d.specialElement.input;for(a=0;a<e.length;a++){var E,M;(R=e[a]).hasAttribute("sf-into")?(E=1,M=R.getAttribute("sf-into"),R.removeAttribute("sf-into")):(E=2,M=R.getAttribute("sf-bind"),R.removeAttribute("sf-bind")),e[a]={addr:$.getSelector(R,!0),rule:M,id:E}}}else delete d.specialElement.input;if(0!==d.specialElement.repeat.length){const e=d.specialElement.repeat;for(a=0;a<e.length;a++){var R=e[a];e[a]={addr:$.getSelector(R,!0),rule:R.getAttribute("sf-repeat-this")},R.removeAttribute("sf-repeat-this")}}else d.specialElement.input?delete d.specialElement.repeat:delete d.specialElement;return d.html=f,d.parse=u,d.addresses=v,void 0===r&&void 0!==i.parse&&(delete d.modelRefRoot_regex,delete d.modelRef_regex,delete d.modelRef_regex_mask),d};let enclosedHTMLParse=!1;const excludes={HTML:1,HEAD:1,STYLE:1,LINK:1,META:1,SCRIPT:1,OBJECT:1,IFRAME:1};function initBindingInformation(e){void 0===e.sf$bindedKey&&Object.defineProperty(e,"sf$bindedKey",{configurable:!0,writable:!0,value:{}})}function revalidateTemplateRef(e,t){revalidateBindingPath(e.modelRefRoot,e.modelRefRoot_path,t),void 0!==e.modelRef_path&&0!==e.modelRef_path.length&&(e.modelRef_path.revalidate=!0,revalidateBindingPath(e.modelRef,e.modelRef_path,t))}function revalidateBindingPath(e,t,n){for(let s=0;s<t.length;s++){const l=t[s],a=deepProperty(n,l.slice(0,-1));if(l.includes("constructor")){for(var o in e)o.includes(".constructor")&&delete e[o];for(var i=s+1;i<t.length;i++)t[i].includes("constructor")&&t.splice(i--,1);return void t.splice(s,1)}if(void 0!==a)if(a.constructor===String||a.constructor===Number){l.length>3&&l[l.length-2].constructor===Number?l.splice(l.length-2):l.splice(l.length-1);e:for(i=s+1;i<t.length;i++){const e=t[i];for(let t=0;t<l.length;t++)if(e[t]!==l[t])continue e;t.splice(i--,1)}var r=stringifyPropertyPath(l);const n=[];for(var o in e)if(0===o.indexOf(r)){const t=e[o];delete e[o];for(i=0;i<t.length;i++)!1===n.includes(t[i])&&n.push(t[i])}e[r]=n}else if(a.constructor===Array&&"length"===l[l.length-1]||a.constructor===Function){r=stringifyPropertyPath(l);for(var o in e)0===o.indexOf(r)&&delete e[o]}}}self.queuePreprocess=function(e,t,n,o){const{childNodes:i}=e;if(void 0===o){o=new Set;for(var r=e.attributes,s=0;s<r.length;s++)if("@"===r[s].name[0]||r[s].value.includes("{{")){o.add(e),e.sf$onlyAttribute=!0;break}}for(let e=i.length-1;e>=0;e--){const l=i[e];if(void 0===excludes[l.nodeName])if(1===l.nodeType){if(!0===enclosedHTMLParse)continue;if("SF-M"===l.tagName||void 0!==l.model)continue;if(void 0!==(r=l.attributes)["sf-repeat-this"]){n.repeat.push(l);continue}if(void 0===r["sf-into"]&&void 0===r["sf-bind"]||n.input.push(l),!1===l.hasAttribute("sf-parse")&&l.tagName.includes("-")&&("SF-PAGE-VIEW"!==l.tagName||!1===l.parentNode.hasAttribute("sf-parse")))continue;for(s=0;s<r.length;s++)if("@"===r[s].name[0]||r[s].value.includes("{{")){o.add(l),l.sf$onlyAttribute=!0;break}0!==l.childNodes.length&&self.queuePreprocess(l,t,n,o)}else if(3===l.nodeType){if(0===l.textContent.trim().length){0===l.textContent.length?l.remove():l.textContent=l.textContent.slice(0,2);continue}const e=l.textContent.indexOf("{[");if(-1!==e)enclosedHTMLParse=!1;else if(!0===enclosedHTMLParse)continue;const n=l.textContent.indexOf("]}");if(-1!==n&&(-1===e||e>n)){enclosedHTMLParse=!0;continue}if(l.textContent.includes("{{")){if(void 0===t){const t=l.parentNode;l.textContent.includes("{{@")||-1!==e?o.add(t):o.add(l),void 0!==t.sf$onlyAttribute&&delete t.sf$onlyAttribute;continue}o.has(l)||(o.add(l),void 0!==l.parentNode.sf$onlyAttribute&&delete l.parentNode.sf$onlyAttribute)}}}return o},self.parsePreprocess=function(e,t,n){const o=new WeakSet;for(let r of e)if(processingElement=r,3!==r.nodeType||!1!==o.has(r.parentNode))if(void 0===r.sf$onlyAttribute)3!==r.nodeType&&self.bindElement(r,t,void 0,void 0,n);else{const e=[],o=Object.create(n);o.parse=e,o.modelRefRoot={},o.modelRefRoot_path=[];const s=r.attributes;for(var i=0;i<s.length;i++){const n=s[i];n.value.includes("{{")&&(n.value=dataParser(n.value,null,o,t,e))}o.addresses=addressAttributes(r,o),toObserve.template=o;for(i=0;i<e.length;i++){const t=e[i];t.type!==REF_DIRECT||(toObserve.template.i=i,t.data[0]=t.data[0].replace(sfRegex.itemsObserve,toObserve),t.get=modelScript(void 0,t.data.shift()))}delete toObserve.template.i,toObserve.template=void 0,revalidateTemplateRef(o,t);const l=templateExec(e,t),a=[];parserForAttribute(r,o.addresses,null,t,l,a,void 0,o),0!==a.length&&(a.template=o,r.sf$elementReferences=a),self.bindElement(r,t,o),delete r.sf$onlyAttribute}else{if("SF-M"===r.parentNode.tagName){const e=document.createElement("span");r.parentNode.insertBefore(e,r),e.appendChild(r)}self.bindElement(r.parentNode,t,void 0,void 0,n),o.add(r.parentNode)}};const repeatedListBinding=internal.model.repeatedListBinding=function(e,t,n,o){let i,r;for(let s=0;s<e.length;s++){if(void 0===e[s].getAttribute)i=e[s].el,r=e[s].rule;else{if(i=e[s],!i.hasAttribute("sf-repeat-this"))continue;r=i.getAttribute("sf-repeat-this"),i.removeAttribute("sf-repeat-this")}i.sf$componentIgnore=!0;let l=r.match(sfRegex.repeatedList);if(null===l){console.error("'",r,"' should match the pattern like `key,val in list`");continue}l=l.slice(1),l[0].includes(",")&&(l[0]=l[0].split(" ").join("").split(","));let a=t[l[1]];if(void 0===a){const e=parsePropertyPath(l[1]);1!==e.length&&(l[1]=e,a=deepProperty(t,e),t.sf$internal&&(t.sf$internal[e.slice(0,-1).join("%$")]=!0)),void 0===a&&(t[l[1]]=a=[])}else void 0===t.sf$bindedKey&&initBindingInformation(t),t.sf$bindedKey[l[1]]=!0;const{constructor:c}=a;c!==Array&&c!==RepeatedList?c!==Object&&c!==RepeatedProperty?console.error(l[1],a,"should be an array or object but got",c):RepeatedProperty.construct(t,i,l,i.parentNode,n,o):RepeatedList.construct(t,i,l,i.parentNode,n,o)}};function prepareRepeated(e,t,n,o,i,r){let s,l,a=n[1];a.constructor!==Array?l=e:(l=deepProperty(e,a.slice(0,-1)),a=a[a.length-1]),s=l["on$"+a]||{};const c=(i||sf.component).registered[t.tagName.toLowerCase()];void 0!==c&&!1===c[3]&&0!==t.childNodes.length&&(c[3]=t);const d=void 0!==c&&c[1],f=new ElementManipulator;if(void 0===this.$EM)hiddenProperty(this,"$EM",f,!0),Object.defineProperty(l,"on$"+a,{configurable:!0,get:()=>s,set(e){Object.assign(s,e)}});else if(this.$EM.constructor===ElementManipulatorProxy)this.$EM.list.push(f);else{const e=[this.$EM,f];this.$EM=new ElementManipulatorProxy,this.$EM.list=e}let u,p,h=n[0];if(h.constructor===Array&&(u=h[0],h=h.pop()),f.asScope=void 0,d)t.hasAttribute("sf-as-scope")&&(f.asScope=!0);else{let n;processingElement=t,"http://www.w3.org/2000/svg"===t.namespaceURI&&"SVG"!==t.tagName&&(n="svg"),p=self.extractPreprocess(t,h,e,n,r,!0,u),p.bindList=this}f.template=d||p,f.list=this,f.parentNode=o,f.modelRef=e,f.isComponent=!!d,f.namespace=i,f.template.mask=h,f.elementRef=new WeakMap,f.callback=s,o.$EM=f,void 0!==u&&(f.template.uniqPattern=u);const{nextSibling:m}=t;if(t.remove(),o.childNodes.length<=1||0===o.textContent.trim().length)return!0;const v=this;return function(){f.bound_end=document.createComment(""),o.insertBefore(f.bound_end,m),void 0!==v.length?f.elements=new Array(v.length):f.elements=[],injectArrayElements(f,o,f.bound_end,v,e,o)}}class RepeatedProperty{static construct(e,t,n,o,i,r){let s=n[1];const l=s.constructor===String?e[s]:deepProperty(e,s);if(l.constructor!==RepeatedProperty){for(let e in l)e.includes("$")&&hiddenProperty(l,e,l[e],!0);let t;hiddenProperty(l,"_list",Object.keys(l)),s.constructor!==Array?t=e:(t=deepProperty(e,s.slice(0,-1)),s=s[s.length-1]),Object.setPrototypeOf(l,RepeatedProperty.prototype),Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>l,set(e){const t=l._list,n=Object.keys(e);for(var o=0;o<t.length&&t[o]===n[o];o++)l[t[o]]=e[t[o]];if(o!==n.length||void 0!==t[o]){for(var i=o;i<t.length;i++)l.delete(t[i]);for(i=o;i<n.length;i++)l.set(n[i],e[n[i]]);l._list=n}}})}const a=prepareRepeated.apply(l,arguments),c=l.$EM.constructor===ElementManipulatorProxy?l.$EM.list[l.$EM.list.length-1]:l.$EM;for(let e in l)ProxyProperty(l,e,!0);!0===a?(c.parentChilds=o.children,injectArrayElements(c,o,void 0,l,e,o,i)):a()}$el(e){const{$EM:t}=this;return t.constructor===ElementManipulatorProxy?t.$el(e):$(queryElements(t.parentChilds||t.elements,e))}getElement(e){let{$EM:t}=this;return t.constructor===ElementManipulatorProxy&&(t=t.list[0]),"object"==typeof this[e]?t.elementRef.get(this[e]):(t.parentChilds||t.elements)[this._list.indexOf(e)]}getElements(e){return this.$EM.constructor===ElementManipulatorProxy?this.$EM.getElement_RP(this,e):[this.getElement(e)]}refresh(){if(this.$EM.constructor===ElementManipulatorProxy)return this.$EM.refresh_RP(this);const e=this.$EM.parentChilds||this.$EM.elements;if(void 0===e)return;const t=this._list;for(let n=0;n<t.length;n++){const o=e[n];if(this[t[n]]!==o.model){const i=this.$EM.createElement(t[n]);this.$EM.parentNode.replaceChild(i,o),void 0!==this.$EM.elements&&(e[n]=i)}}}}function ProxyProperty(e,t,n){if(n||void 0===Object.getOwnPropertyDescriptor(e,t).set){let n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:()=>n,set(o){n=o,e.refresh(t)}})}}function injectArrayElements(e,t,n,o,i,r,s){let l,{isComponent:a,template:c}=e;o.constructor===RepeatedProperty&&(l=o,o=Object.values(o));const d=o.length;let f;for(var u=0;u<d;u++)f=a?new c(o[u],s,e.asScope):templateParser(c,o[u],!1,i,r,void 0,void 0===l?c.uniqPattern&&u:c.uniqPattern&&l._list[u]),"object"==typeof o[u]&&(!1===a&&self.bindElement(f,i,c,o[u]),e.elementRef.set(o[u],f)),void 0===n?t.appendChild(f):!0===n?e.elements[u]=f:(e.elements[u]=f,t.insertBefore(f,n));if(void 0!==l){u=0;for(let e in l)l[e]=o[u++]}}sf.set=function(e,t,n){e[t]!==n&&(void 0!==e.$EM?void 0===e[t]&&(e[t]=n,ProxyProperty(e,t,!1),e.$EM.append(t),e._list.push(t)):e[t]=n)},sf.delete=function(e,t){if(void 0===e.$EM)return void delete e[t];const n=e._list.indexOf(t);-1!==n&&(e.$EM.remove(n),delete e[t],e._list.splice(n,1))};class RepeatedList extends Array{static construct(e,t,n,o,i,r){let s=n[1];const l=s.constructor===String?e[s]:deepProperty(e,s);if(l.constructor!==RepeatedList){let t;s.constructor!==Array?t=e:(t=deepProperty(e,s.slice(0,-1)),s=s[s.length-1]),Object.setPrototypeOf(l,RepeatedList.prototype),Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>l,set(e){0===e.length?l.splice(0):l.remake(e,!0)}})}const a=prepareRepeated.apply(l,arguments),c=l.$EM.constructor===ElementManipulatorProxy?l.$EM.list[l.$EM.list.length-1]:l.$EM,{template:d}=c;o.classList.contains("sf-virtual-list")?(hiddenProperty(l,"$virtual",new VirtualScroll(c)),!0!==a&&console.warn("Virtual list was initialized when the container has another child that was not sf-repeated element.",o),c.elements=new Array(l.length),o.$VSM=c.$VSM=new VirtualScrollManipulator(o,c,d.html),injectArrayElements(c,o,!0,l,e,o,i),c.$VSM.startInjection()):!0===a?(c.parentChilds=o.children,injectArrayElements(c,o,void 0,l,e,o,i)):a(),setTimeout((function(){const e=internal.findScrollerElement(o);if(null===e)return;internal.addScrollerStyle();const t=getComputedStyle(e);"hidden"===t.backfaceVisibility||t.overflow.includes("hidden")||e.classList.add("sf-scroll-element")}),1e3)}$el(e){const{$EM:t}=this;return t.constructor===ElementManipulatorProxy?t.$el(e):$(queryElements(t.parentChilds||t.elements,e))}pop(){return this.$EM.remove(this.length-1),Array.prototype.pop.apply(this,arguments)}push(){const e=this.length;return Array.prototype.push.apply(this,arguments),1===arguments.length?this.$EM.append(e):this.$EM.hardRefresh(e),this.length}splice(){if(0===arguments[0]&&void 0===arguments[1])return this.$EM.clear(0),Array.prototype.splice.apply(this,arguments);const e=this.length,t=Array.prototype.splice.apply(this,arguments);let n=arguments[0];n<0&&(n=e+n);let o=arguments[1];o||0===o||(o=this.length);for(var i=o-1;i>=0;i--)this.$EM.remove(n+i);if(arguments.length>=3){o=arguments.length-2,n>=this.length&&(n=this.length-1);for(i=0;i<o;i++)this.$EM.insertAfter(n+i)}return t}shift(){const e=Array.prototype.shift.apply(this,arguments);return this.$EM.remove(0),e}unshift(){if(Array.prototype.unshift.apply(this,arguments),1===arguments.length)this.$EM.prepend(0);else for(let e=arguments.length-1;e>=0;e--)this.$EM.prepend(e);return this.slice(0,arguments.length)}constructor(e){return new Array(e)}assign(e,t,n,o){if(e.constructor!==Number&&(void 0!==n&&n.constructor!==Boolean||(o=n),void 0!==t&&t.constructor===Object&&(n=t),t=e,e=0),t.constructor!==Array&&(t=[t]),void 0!==n){if(n.constructor===Object){const e={};for(let t in n)if("]"===t.slice(-1)){switch(t.split("[")[1]){case"!]":void 0===e.b&&(e.b=[]),e.b.push({key:t[0],val:n[t]});break;case"<]":void 0===e.c&&(e.c=[]),e.c.push({key:t[0],val:n[t]});break;case"<=]":void 0===e.d&&(e.d=[]),e.d.push({key:t[0],val:n[t]});break;case">]":void 0===e.e&&(e.e=[]),e.e.push({key:t[0],val:n[t]});break;case">=]":void 0===e.f&&(e.f=[]),e.f.push({key:t[0],val:n[t]});break;default:void 0===e.a&&(e.a=[]),e.a.push({key:t[0],val:n[t]})}}else void 0===e.a&&(e.a=[]),e.a.push({key:t[0],val:n[t]});n=e}let a;!0===o&&(a=new WeakSet);e:for(var i=e;i<this.length&&(!0!==o||!a.has(this[i]));i++){if(n.constructor===Object){const e=this[i];if(void 0!==n.a)for(var r=0,s=n.a.length;r<s;r++){if(e[(l=n.a[r]).key]!==l.val)continue e}if(void 0!==n.b)for(r=0,s=n.b.length;r<s;r++){if(e[(l=n.b[r]).key]===l.val)continue e}if(void 0!==n.c)for(r=0,s=n.c.length;r<s;r++){if(e[(l=n.c[r]).key]>=l.val)continue e}if(void 0!==n.d)for(r=0,s=n.d.length;r<s;r++){if(e[(l=n.d[r]).key]>l.val)continue e}if(void 0!==n.e)for(r=0,s=n.e.length;r<s;r++){if(e[(l=n.e[r]).key]<=l.val)continue e}if(void 0!==n.f)for(r=0,s=n.f.length;r<s;r++){var l;if(e[(l=n.f[r]).key]<l.val)continue e}}else if(!n(this[i]))continue;if(0===t.length){this.splice(i--,1);continue}const e=t.shift();this[i]!==e&&Object.assign(this[i],e),!0===o?(a.add(this[i]),this.push(this.splice(i--,1)[0])):!1===o&&this.unshift(this.splice(i,1)[0])}return 0!==t.length&&(!1===o?this.unshift.apply(this,t):this.push.apply(this,t)),this}for(i=0;i<t.length&&i!==this.length;i++)this[i+e]!==t[i]&&Object.assign(this[i+e],t[i]);if(t.length===this.length||0!==e)return this;const a=this.length;return t.length>this.length?(Array.prototype.push.apply(this,t.slice(this.length)),this.$EM.hardRefresh(a),this):t.length<this.length?(Array.prototype.splice.call(this,t.length),this.$EM.removeRange(t.length,a),this):void 0}remake(e,t){const n=this.length;if(e.length>=n&&0!==n){let r=n;for(var o=0;o<n&&e[o]===this[o];o++)r--;if(0===r){if(e.length===n)return;return(i=e.slice(n)).unshift(n,0),void this.splice.apply(this,i)}if(r!==n){if(!0===t)(i=e.slice(o)).unshift(o,n-o),Array.prototype.splice.apply(this,i),this.refresh(o,n);return}}if(0===n)return Array.prototype.push.apply(this,arguments[0]),void this.$EM.hardRefresh(0);var i=[0,n];return Array.prototype.push.apply(i,arguments[0]),Array.prototype.splice.apply(this,i),!0!==arguments[1]?(this.$EM.clear(0),this.$EM.hardRefresh(0)):(this.length<n&&this.$EM.removeRange(this.length,n),this.$EM.hardRefresh(0,this.length)),this}swap(e,t){if(e===t)return;this.$EM.swap(e,t);const n=this[e];this[e]=this[t],this[t]=n}move(e,t,n){if(e===t)return;void 0===n&&(n=1),this.$EM.move(e,t,n);const o=Array.prototype.splice.call(this,e,n);o.unshift(t,0),Array.prototype.splice.apply(this,o)}getElement(e){let{$EM:t}=this;return t.constructor===ElementManipulatorProxy&&(t=t.list[0]),e.constructor===Number?"object"!=typeof this[e]?(t.parentChilds||t.elements)[e]:t.elementRef.get(this[e]):t.elementRef.get(e)}getElements(e){return this.$EM.constructor===ElementManipulatorProxy?this.$EM.getElement_RL(this,e):[this.getElement(e)]}indexOf(e){if(void 0!==e.children&&e.children.constructor===HTMLCollection){if(e.sf$elementReferences&&e.sf$elementReferences.template.bindList||(e=findBindListElement(e)),null===e)return-1;arguments[0]=e.model}return Array.prototype.indexOf.apply(this,arguments)}reverse(){this.$EM.reverse(),Array.prototype.reverse.call(this)}refresh(e,t){void 0===e||e.constructor===String?(e=0,({length:t}=this)):void 0===t?t=e+1:t<0?t=this.length+t:t+=e;const n=this.length-t;if(n<0&&(t+=n),this.$EM.constructor===ElementManipulatorProxy)var o=this.$EM.list[0].parentChilds||this.$EM.list[0].elements;else o=this.$EM.parentChilds||this.$EM.elements;for(let n=e;n<t;n++){if(void 0===o[n])return void this.$EM.hardRefresh(n);if(this.$EM.constructor===ElementManipulatorProxy)var i=this.$EM.list[0].elementRef.get(this[n]);else i=this.$EM.elementRef.get(this[n]);void 0!==i&&o[n].model===i.model||this.$EM.update(n,1)}}}class ElementManipulator{createElement(e){const t=this.list[e];if(void 0===t)return;const{template:n}=this;let o=this.elementRef&&this.elementRef.get(t);return void 0!==o?(void 0===o.model.$el&&(!1===compareObject(o.model,t)?(o=templateParser(n,t,!1,this.modelRef,this.parentNode,void 0,n.uniqPattern&&e),"object"==typeof t&&(!1===this.isComponent&&self.bindElement(o,this.modelRef,n,t),void 0!==this.elementRef&&this.elementRef.set(t,o))):void 0!==o.sf$bindedBackup&&(RE_restoreBindedList(this.modelRef,o.sf$bindedBackup),o.sf$bindedBackup=void 0)),this.$VSM&&this.$VSM.newElementInit(o,e-1),o):(o=n.constructor===Function?new n(t,this.namespace,this.asScope):templateParser(n,t,!1,this.modelRef,this.parentNode,void 0,n.uniqPattern&&e),"object"==typeof t&&(!1===this.isComponent&&self.bindElement(o,this.modelRef,n,t),void 0!==this.elementRef&&this.elementRef.set(t,o)),this.$VSM&&this.$VSM.newElementInit(o,e-1),o)}hardRefresh(e){const{list:t}=this,n=this.parentChilds||this.elements;if(this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(n,e),0===e&&void 0===this.$VSM&&void 0===this.bound_end)this.parentNode.textContent="";else{if(this.parentChilds)for(var o=e,i=n.length;o<i;o++)n[e].remove();else for(o=e;o<n.length;o++)n[o].remove();void 0!==this.elements&&(n.length=e)}void 0!==this.elements&&(n.length=t.length);for(o=e;o<t.length;o++){const e=t[o];let i=this.elementRef.get(e);void 0===i?(i=this.isComponent?new this.template(e,this.namespace,this.asScope):templateParser(this.template,e,!1,this.modelRef,this.parentNode,void 0,this.template.uniqPattern&&o),"object"==typeof e&&(!1===this.isComponent&&self.bindElement(i,this.modelRef,this.template,e),this.elementRef.set(e,i),void 0!==this.elements&&(n[o]=i))):void 0===i.model.$el&&(!1===compareObject(i.model,e)?(i=templateParser(this.template,e,!1,this.modelRef,this.parentNode,void 0,this.template.uniqPattern&&o),"object"==typeof e&&(!1===this.isComponent&&self.bindElement(i,this.modelRef,this.template,e),this.elementRef.set(e,i),void 0!==this.elements&&(n[o]=i))):void 0!==i.sf$bindedBackup&&(RE_restoreBindedList(this.modelRef,i.sf$bindedBackup),i.sf$bindedBackup=void 0)),void 0===this.$VSM?this.parentNode.appendChild(i):(n[o]=i,this.$VSM.newElementInit(i,o-1))}this.$VSM&&this.$VSM.hardRefresh(e)}update(e,t){const n=this.parentChilds||this.elements,{list:o}=this,{template:i}=this;void 0===e?(e=0,t=o.length):void 0===t?t=e+1:t<0?t=o.length+t:t+=e;const r=o.length-t;r<0&&(t+=r),this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(n,e,t);for(let r=e;r<t;r++){const e=n[r];if(void 0===e||void 0===o[r])break;const t=o[r];let s=this.elementRef.get(t);void 0===s?(s=this.isComponent?new i(t,this.namespace,this.asScope):templateParser(i,t,!1,this.modelRef,this.parentNode,void 0,i.uniqPattern&&r),"object"==typeof t&&(!1===this.isComponent&&self.bindElement(s,this.modelRef,i,t),this.elementRef.set(t,s),null!=this.elements&&(n[r]=s))):void 0===s.model.$el&&(!1===compareObject(s.model,t)?(s=templateParser(i,t,!1,this.modelRef,this.parentNode,void 0,i.uniqPattern&&r),"object"==typeof t&&(!1===this.isComponent&&self.bindElement(s,this.modelRef,i,t),this.elementRef.set(t,s),null!=this.elements&&(n[r]=s))):void 0!==s.sf$bindedBackup&&(RE_restoreBindedList(this.modelRef,s.sf$bindedBackup),s.sf$bindedBackup=void 0)),this.$VSM?(this.$VSM.newElementInit(s,r-1),this.$VSM.update(r,s)):(this.parentNode.replaceChild(s,e),null!=this.elements&&(n[r]=s),this.callback.update&&this.callback.update(s,"replace"))}}move(e,t,n){const o=this.parentChilds||this.elements,i=this.list.length-e-n;i<0&&(n+=i);const r=new Array(n);for(var s=0;s<n;s++)(r[s]=o[e+s]).remove();if(void 0===this.$VSM){const e=o[t]||null;for(s=0;s<n;s++)this.parentNode.insertBefore(r[s],e),this.callback.update&&this.callback.update(r[s],"move")}else this.$VSM.move(e,t,n,r);void 0!==this.elements&&(o.splice(e,n),r.unshift(e,0),o.splice.apply(o,r))}swap(e,t){const n=this.parentChilds||this.elements,o=e,i=t;if(e>t){const o=n[t];t=n[e],e=o}else e=n[e],t=n[t];if(void 0!==this.elements){n[o];n[o]=n[i],n[i]=n[o]}if(void 0===this.$VSM){const n=t.nextSibling,o=t.parentNode;e.parentNode.insertBefore(t,e.nextSibling),o.insertBefore(e,n)}else this.$VSM.swap(o,i);this.callback.update&&(this.callback.update(n[t],"swap"),this.callback.update(n[e],"swap"))}remove(e){const t=this.parentChilds||this.elements;if(this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(t,e,e+1),t[e]){const n=t[e];if(this.callback.remove){let e=!1;const t=function(){e||(e=!0,n.remove())};this.callback.remove(n,t)||t()}else n.remove();this.$VSM&&this.$VSM.remove(e),void 0!==this.elements&&t.splice(e,1)}}removeRange(e,t){const n=this.parentChilds||this.elements;for(let o=e;o<t;o++)n[e].remove();this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(n,e,t),this.$VSM?this.$VSM.removeRange(e,t):void 0!==this.elements&&n.splice(e,t-e)}clear(){this.template.modelRefRoot_path&&0!==this.template.modelRefRoot_path.length&&this.clearBinding(this.parentChilds||this.elements,0),this.parentNode.textContent="",void 0!==this.$VSM&&this.$VSM.clear(),void 0!==this.elements&&(this.elements.length=0)}insertAfter(e){const t=this.parentChilds||this.elements,n=this.createElement(e);if(void 0===this.$VSM)if(0===t.length)this.parentNode.insertBefore(n,this.parentNode.lastElementChild);else{const o=t[e-1];o.parentNode.insertBefore(n,o.nextSibling)}void 0!==this.elements&&t.splice(e-1,0,n),this.$VSM&&this.$VSM.insertAfter(e),this.callback.create&&this.callback.create(n)}prepend(e){const t=this.parentChilds||this.elements,n=this.createElement(e);if(void 0===this.$VSM){const e=t[0];void 0!==e?(e.parentNode.insertBefore(n,e),this.callback.create&&this.callback.create(n)):this.parentNode.insertBefore(n,this.parentNode.lastElementChild)}void 0!==this.elements&&t.unshift(n),this.$VSM&&this.$VSM.prepend(e)}append(e){const t=this.parentChilds||this.elements,n=this.createElement(e);void 0!==this.elements&&t.push(n),void 0===this.$VSM?void 0!==this.bound_end?this.parentNode.insertBefore(n,this.bound_end):this.parentNode.appendChild(n):this.$VSM.append(e),this.callback.create&&this.callback.create(n)}reverse(){if(void 0!==this.parentChilds){const t=this.parentChilds.length;if(0===t)return;const n=this.parentChilds[0];for(var e=1;e<t;e++)this.parentNode.insertBefore(this.parentNode.lastElementChild,n)}else{const t=this.elements;if(t.reverse(),this.$VSM)return this.$VSM.reverse();if(void 0===this.bound_end)for(e=0;e<t.length;e++)this.parentNode.appendChild(t[e]);else for(e=0;e<t.length;e++)this.parentNode.insertBefore(t[e],this.bound_end)}}clearBinding(e,t,n){void 0===n&&(n=this.list.length);const o=this.modelRef,i=this.template.modelRefRoot_path;if(e.constructor===Array)for(l=i.length-1;l>=0;l--){if(void 0!==(a=RE_getBindedList(o,i[l])))for(c=a.length-1;c>=0;c--){if(!(-1===(r=e.indexOf(a[c].element))||r<t||r>=n))void 0===(s=a[c].element).sf$bindedBackup&&(s.sf$bindedBackup=[]),s.sf$bindedBackup.push([i[l],a.splice(c,1)[0]])}}else for(var r=t;r<n;r++)for(var s=e.item(r),l=i.length-1;l>=0;l--){var a;if(void 0!==(a=RE_getBindedList(o,i[l])))for(var c=a.length-1;c>=0;c--)a[c].element===s&&(void 0===s.sf$bindedBackup&&(s.sf$bindedBackup=[]),s.sf$bindedBackup.push([i[l],a.splice(c,1)[0]]))}}}class ElementManipulatorProxy{refresh_RP(e){const{list:t}=this,n=e._list;for(let o=0;o<t.length;o++){const i=t[o],r=i.parentChilds||i.elements;if(void 0!==r)for(let t=0;t<n.length;t++){const o=r[t];if(void 0!==o){if(e[n[t]]!==o.model){const e=i.createElement(n[t]);i.parentNode.replaceChild(e,o),void 0!==i.elements&&(r[t]=e)}}else i.append(n[t])}}}getElement_RP(e,t){const{list:n}=this,o=e._list,i=[];for(let r=0;r<n.length;r++){let s;s="object"==typeof this[t]?n[r].elementRef.get(e[t]):(n[r].parentChilds||n[r].elements)[o.indexOf(t)],s&&i.push(s)}return i}getElement_RL(e,t){const{list:n}=this,o=[];for(let i=0;i<n.length;i++){const r=n[i];let s;s=t.constructor===Number?"object"!=typeof e[t]?(r.parentChilds||r.elements)[t]:r.elementRef.get(e[t]):r.elementRef.get(t),s&&o.push(s)}return o}$el(e){const t=[],n=this.list;for(let o=0;o<n.length;o++){const i=n[o];t.push.apply(t,queryElements(i.parentChilds||i.elements,e))}return $(t)}hardRefresh(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].hardRefresh.apply(e[t],arguments)}update(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].update.apply(e[t],arguments)}move(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].move.apply(e[t],arguments)}swap(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].swap.apply(e[t],arguments)}remove(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].remove.apply(e[t],arguments)}removeRange(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].removeRange.apply(e[t],arguments)}clear(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].clear.apply(e[t],arguments)}insertAfter(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].insertAfter.apply(e[t],arguments)}prepend(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].prepend.apply(e[t],arguments)}append(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].append.apply(e[t],arguments)}reverse(){const{list:e}=this;for(let t=0;t<e.length;t++)e[t].reverse.apply(e[t],arguments)}}function RE_restoreBindedList(e,t){for(let n=0;n<t.length;n++){const o=RE_getBindedList(e,t[n][0]);void 0!==o&&o.push(t[n][1])}}function RE_getBindedList(e,t){if(1===t.length)return e.sf$bindedKey[t[0]];const n=deepProperty(e,t.slice(0,-1));return void 0!==n&&void 0!==n.sf$bindedKey?n.sf$bindedKey[t[t.length-1]]:void 0}function elseIfHandle(e,t){const{elseIf:n}=e;for(let e=0;e<n.length;e++)if(n[e][0](t[0],t[1],_escapeParse))return n[e][1](t[0],t[1],_escapeParse);return null===e.elseValue?"":e.elseValue(t[0],t[1],_escapeParse)}internal.EM=ElementManipulator,internal.EMP=ElementManipulatorProxy;const templateParser_regex=/{{%=([0-9]+)%/g,templateParser_regex_split=/{{%=[0-9]+%/g,REF_DIRECT=0,REF_IF=1,REF_EXEC=2,templateExec=function(e,t,n,o,i){if(0===e.length)return e;void 0===o&&(o=new Array(e.length));for(let s=0,l=e.length;s<l;s++){if(void 0!==n&&!1===n.includes(s))continue;const l=e[s],a=l.data;a[0]=t;try{if(l.type===REF_DIRECT){void 0===(r=l.get(a[0],a[1],_escapeParse,i))?r="":r.constructor===Object?r=JSON.stringify(r):r.constructor!==String&&(r=String(r)),o[s]=r;continue}if(l.type===REF_EXEC){o[s]=l.get(a[0],a[1],_escapeParse,i);continue}if(l.type===REF_IF){if(!l.if[0](a[0],a[1],_escapeParse,i)){o[s]=elseIfHandle(l,a,i);continue}o[s]=l.if[1](a[0],a[1],_escapeParse,i)}}catch(e){var r;throw r=(r=(r=(r=(l.get||l.if).toString()).split(") {",2)[1].slice(1,-2)).replace(/(_model_|_modelScope)\./g,"")).replace(/var _model_=.*?;/,""),"Can't continue processing the template"===e.message?(console.groupCollapsed("Click here to open more information.."),console.log("%cError in template's script:\n","color:orange",r)):(console.groupCollapsed("%cError message:","color:orange",e.message,"\nClick here to open more information.."),console.log(e.stack),console.log("%cWhen processing template's script:\n","color:orange",r),console.groupEnd()),new Error("Can't continue processing the template")}}return o};function parserForAttribute(e,t,n,o,i,r,s,l){for(let c=0;c<t.length;c++){const d=t[c];if(d.event){void 0!==s&&void 0!==s.sf$listListenerLock||eventHandler(e,d,o||n,s,l);continue}const f="value"===d.name&&("TEXTAREA"===e.tagName||"INPUT"===e.tagName&&!1===sfRegex.inputAttributeType.test(e.type));var a={ref:d};if("style"===d.name?a.style=e.style:a.attribute=!0===f?e:"class"===d.name?e.classList:e.attributes[d.name],e.hasAttribute("sf-lang")&&(a.sf_lang=e),r.push(a),void 0===d.direct)if("value"===d.name&&!0===f){a=e.value;e.removeAttribute("value"),e.value=applyParseIndex(d.value,d.parse_index,i)}else e.setAttribute(d.name,applyParseIndex(d.value,d.parse_index,i));else{if("value"===d.name&&!0===f){e.value=i[d.direct],e.removeAttribute("value");continue}e.setAttribute(d.name,i[d.direct])}}}const templateParser=internal.model.templateParser=function(e,t,n,o,i,r,s){processingElement=e.html;let l=!0===n?e.html:e.html.cloneNode(!0);const{addresses:a}=e;try{var c=templateExec(e.parse,t,void 0,void 0,s)}catch(n){throw"Can't continue processing the template"===n.message?(console.error("Error when processing:",e.html,t,o),console.groupEnd()):sf.onerror&&sf.onerror(n),n}if(void 0!==e.uniqPattern&&(l.sf$repeatListIndex=s),void 0!==r){const e=l.childNodes;for(var d=0,f=e.length;d<f;d++)r.appendChild(e[0]);const t=l.attributes;for(d=0;d<t.length;d++)r.setAttribute(t[d].name,t[d].value);l=r}const u=[],p=[];u.parsed=c;for(d=0;d<a.length;d++){var h=a[d];const n=$.childIndexes(h.address,l);if(1!==h.nodeType)if(3!==h.nodeType){if(-1===h.nodeType){const e={dynamicFlag:n,direct:h.parse_index,parentNode:n.parentNode,startFlag:h.startFlag&&$.childIndexes(h.startFlag,l)};u.push(e),p.push(e)}}else{const e=n;if(u.push({textContent:e,ref:h}),void 0!==h.direct){e.textContent=c[h.direct];continue}n.textContent=applyParseIndex(h.value,h.parse_index,c)}else parserForAttribute(n,h.attributes,t,o,c,u,i,e)}void 0!==i&&(i.sf$listListenerLock=!0),l.model=t,0!==u.length&&(u.template=e,l.sf$elementReferences=u);for(d=0;d<p.length;d++){let e=c[(h=p[d]).direct];if(1!==e.nodeType){e=$.parseElement(c[h.direct]);var m=0;for(f=e.length;m<f;m++)h.parentNode.insertBefore(e[0],h.dynamicFlag)}else h.parentNode.insertBefore(e,h.dynamicFlag)}if(e.specialElement){if(e.specialElement.input){const n=e.specialElement.input,i=new Array(n.length);for(d=0;d<n.length;d++){h=n[d];i[d]={el:$.childIndexes(h.addr,l),rule:h.rule,id:h.id}}bindInput(i,t,e.mask,o)}if(e.specialElement.repeat){const n=e.specialElement.repeat,o=new Array(n.length);for(d=0;d<n.length;d++){h=n[d];o[d]={el:$.childIndexes(h.addr,l),rule:h.rule}}repeatedListBinding(o,t,void 0,e)}}return l};sf.async=function(e){animFrameMode=!e};var animFrameMode=!1;const syntheticTemplate=internal.model.syntheticTemplate=function(e,t,n,o,i){if(void 0!==n){if(!(r=t.modelRef&&t.modelRef[n]||t.modelRefRoot[n])||0===r.length)return console.log(e,t,n,o),console.error(`Failed to run syntheticTemplate because property '${n}' is not observed`),!1}else{if(0===t.parse.length)return!1;var r=void 0}const s=e.sf$elementReferences;void 0===s.parsed&&(s.parsed=new Array(t.parse.length));const{parsed:l}=s,a=e.sf$repeatListIndex;if(i||templateExec(t.parse,o,r,l,a),!i&&!1===animFrameMode){if(!0===s.async)return;return s.async=!0,void requestAnimationFrame((function(){s.async=!1,animFrameMode=!0,syntheticTemplate(e,t,n,o,!0),animFrameMode=!1}))}let c,d=!1;for(let e=0;e<s.length;e++){const n=s[e];if(void 0===n.dynamicFlag)if(void 0===n.textContent)if(void 0===n.attribute){if(void 0!==n.style){if(void 0!==n.ref.parse_index)c=applyParseIndex(n.ref.value,n.ref.parse_index,l,t.parse,o,a);else{if(!l[n.ref.direct])continue;c=l[n.ref.direct]}if(n.style.cssText===c)continue;n.style.cssText=c,d=!0}}else{if(void 0!==n.ref.parse_index){if(c=applyParseIndex(n.ref.value,n.ref.parse_index,l,t.parse,o,a),n.attribute.value===c)continue}else{if(!l[n.ref.direct])continue;if(c=l[n.ref.direct],n.attribute.value==c)continue}n.attribute.value=c,d=!0}else{if(void 0!==n.ref.parse_index){if(c=applyParseIndex(n.ref.value,n.ref.parse_index,l,t.parse,o,a),n.textContent.textContent===c)continue;n.textContent.textContent=c,d=!0;continue}if(l[n.ref.direct]){if(c=l[n.ref.direct],n.textContent.textContent===c)continue;const e=n.textContent;if(!0===e.sf$haveChilds)for(;e.previousSibling&&e.previousSibling.sf$childRoot===e;)e.previousSibling.remove();e.textContent=c,d=!0}}else if(void 0!==l[n.direct]){const e=Array.from($.parseElement(l[n.direct])),t=$.prevAll(n.dynamicFlag,n.startFlag);let o=!1;for(var f=e.length-1;f>=0;f--){if(void 0===t[f]){o=!0;break}!1===t[f].isEqualNode(e[f])&&n.parentNode.replaceChild(e[f],t[f])}if(o)for(f=0;f<e.length;f++)n.parentNode.insertBefore(e[f],n.dynamicFlag);else for(f=e.length;f<t.length;f++)t[f].remove();d=!0}}return d}}(),$((function(){for(var e in internal.modelPending){for(var t=internal.modelPending[e],n=0;n<t.length;n++)sf.model.init(t[n],t[n].getAttribute("name"));delete internal.modelPending[e]}}));class API{constructor(e){this.url=e,this.accessToken=!1,this.mask=!0}get(e,t){return this.request("GET",this.url+e,t)}post(e,t){return this.request("POST",this.url+e,t)}delete(e,t){return this.request("DELETE",this.url+e,t)}put(e,t){return this.request("PUT",this.url+e,t)}upload(e,t){return t.constructor!==FormData?console.error("Parameter 2 must be a FormData"):this.request("POST",this.url+e,t)}request(e,t,n,o){if(void 0===n&&(n={}),this.mask){var i={receiveType:"JSON"};n.constructor===FormData?n.append("_method",e.toUpperCase()):(i.sendType="JSON",n._method=e.toUpperCase())}else i={};if(this.accessToken){const{accessToken:e}=this;i.beforeSend=function(t){t.setRequestHeader("X-Authorization","Bearer "+e),o&&o(t)}}else void 0!==o&&(i.beforeSend=o);return this.mask?sf.request("POST",t,n,i):sf.request(e,t,n,i)}}sf.API=API,sf.events=function(){function e(t,n){if(t.constructor!==Array){if(void 0!==n&&n.constructor===Boolean){void 0!==e[t]&&e[t]!==n&&console.warn("Events",t,"already has value:",e[t]);const o=function(){const e=self._statusTrigger[t];if(void 0!==e){for(let t=0;t<e.length;t++)try{e[t]()}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}delete self._statusTrigger[t]}};let i=e[t]||n;Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>i,set(e){i!==e&&(i=e,i&&o())}}),i&&o()}else if(void 0===e[t]){e[t]=function(){for(let e=0;e<n.length;e++)try{n[e].apply(null,arguments),!0===n[e].once&&n.splice(e--,1)}catch(e){console.error(e),sf.onerror&&sf.onerror(e)}},void 0===self._listener[t]&&(self._listener[t]=[]);const n=self._listener[t]}n=null}else for(let o=0;o<t.length;o++)e(t[o],n)}return self._listener={},self._statusTrigger={},e.when=function(t,n){if(!0===e[t])return n();void 0===self._statusTrigger[t]&&(self._statusTrigger[t]=[]),self._statusTrigger[t].push(n)},e.once=function(e,t){t.once=!0,self._listener[e].push(t)},e.on=function(e,t){void 0===self._listener[e]&&(self._listener[e]=[]),self._listener[e].push(t)},e.off=function(e,t){if(void 0===self._listener[e])return self._listener[e].length=0;const n=self._listener[e].indexOf(t);-1!==n&&self._listener[e].splice(n,1)},e}(),window.TouchEvent||(window.TouchEvent=void 0);let hotReloadAll=!1,proxyModel,proxySpace,proxyComponent,proxyTemplate,internalProp,backupTemplate,backupCompTempl;!function(){const e=routerEval;sf.hotReload=function(t){1===t?hotReload=!0:2===t&&(hotReloadAll=hotReload=!0),void 0===proxyModel&&(backupTemplate={},backupCompTempl=new WeakMap,proxyModel=new WeakMap,proxyComponent=new WeakMap,proxyTemplate={},proxySpace=new WeakMap,internalProp={},["init","reinit","destroy","$el"].forEach((function(e){internalProp[e]=!0})),$((function(){backupTemplate=Object.assign({},templates),setTimeout((function(){if(void 0!==window.___browserSync___){const{socket:t}=window.___browserSync___;t.on("sf-hot-js",e),t.on("sf-hot-html",e)}else console.error("HotReload: Failed to listen to browserSync")}),1e3)})))}}();const haveLoaded=new WeakSet;function reapplyScope(e,t,n,o,i){function r(t,o){let i=e[t];if(void 0===i&&(i=n[t]&&void 0!==n[t].ref?e[t]=n[t]:e[t]=function(){return i.ref.apply(this,arguments)}),void 0!==i.protoFunc)i.ref=o||i.ref;else{const e=o||n[t];i!==e&&(i.ref=e)}n[t]=i}if(void 0!==o){if(n.hotReloading&&n.hotReloading(n),o.constructor===Function){let e=!0;o(new Proxy(n,{set:(t,n,o)=>!1===e||!0===internalProp[n]?(t[n]=o,!0):(o&&o.constructor===Function?r(n,o):void 0!==t[n]&&!0!==hotReloadAll||(t[n]=o),!0)}),t,n.$el&&n.$el.$item||{}),e=!1}else Object.setPrototypeOf(n,o.class.prototype);haveLoaded.has(n)||i?n.hotReloaded&&n.hotReloaded(n):haveLoaded.add(n)}else for(let e in n)!0!==internalProp[e]&&n[e]&&n[e].constructor===Function&&r(e)}function hotModel(e,t,n){const o=e(t);let i=proxyModel.get(o);void 0!==i&&o||(i={},proxyModel.set(o,i)),reapplyScope(i,e,o,n)}function hotComponentAdd(e,t,n){let o=proxySpace.get(e);void 0===o&&(o={},proxySpace.set(e,o));let i=o[t];void 0===i&&(i=o[t]=[]),i.push(n),o={},proxyComponent.set(n,o),reapplyScope(o,n,n)}function hotComponentRemove(e){const t=proxySpace.get(e.sf$space);if(void 0===t)return;const n=t[e.sf$controlled];n.splice(n.indexOf(e.model),1)}function hotComponentRefresh(e,t,n){let o=proxySpace.get(e);if(void 0!==o&&void 0!==o[t]){o=o[t];for(let t=0;t<o.length;t++){let i=proxyComponent.get(o[t]);void 0===i&&(i={},proxyComponent.set(o[t],i)),reapplyScope(i,e,o[t],n,!0)}}}function hotTemplate(e){const t=sf.views.list,n={};for(let t in e){if(void 0===backupTemplate[t]||backupTemplate[t]===e[t])continue;const o=proxyTemplate[t];if(void 0===o)n[t]=!0;else{const e=o[0],n=o[1],i=e.registered[n];if(void 0!==i&&void 0!==i[3]){const o=i[3].outerHTML;sf.component.html(n,{template:t},e);const r=i[3].outerHTML;(r!==o||backupCompTempl.has(i)&&r!==backupCompTempl.get(i).outerHTML)&&hotComponentTemplate(e,n)}}}for(let o in t){const{routes:i}=t[o],r=$("sf-page-view",t[o].rootDOM);for(let t=0;t<r.length;t++){const o=r[t],i=o.sf$templatePath;if(void 0===i||void 0===n[i])continue;o.innerHTML=e[i],o.routeCached.html=sf.dom.parseElement(`<template>${e[i]}</template>`,!0)[0];const s=o.sf$viewSelector;for(let e in s){const t=o.querySelector(e);t.parentNode.replaceChild(s[e],t)}}}backupTemplate=Object.assign({},e)}function hotComponentTemplate(e,t){const n=e.registered[t],o=n[2].slice(0);for(let e=0;e<o.length;e++){const s=o[e],l=s.$el;for(let e=0;e<l.length;e++){const o=l[e];if(void 0===o.sf$elementReferences)continue;const{parentNode:a}=o,c=o.nextSibling;null!==a&&o.remove(),o.textContent="",internal.model.removeModelBinding(s);let d=n[3];if(n[3].constructor!==Object){var{tempDOM:i}=d;d=prepareComponentTemplate(d,i,t,s,n),({tempDOM:i}=d)}const f=Object.create(d);if(0!==f.parse.length){f.parse=f.parse.slice(0);for(let e=0;e<f.parse.length;e++)f.parse[e]=Object.create(f.parse[e]),f.parse[e].data=[null,s]}if(!0===i)var r=internal.model.templateParser(f,s,void 0,void 0,void 0,o);else{r=internal.model.templateParser(f,s);o.appendChild(r)}o.sf$elementReferences=r.sf$elementReferences,sf.model.bindElement(o,s,f),null!==a&&a.insertBefore(o,c)}s.hotReloadedHTML&&s.hotReloadedHTML()}backupCompTempl.set(n,n[3])}internal.hotTemplate=hotTemplate,function(){const e=sf.lang=function(e){sf.lang.init(e)};e.list={},e.default="en_US",e.serverURL=!1,e.interpolate={},internal.language={},e.add=function(t,n){if(void 0===e.list[t]&&(e.list[t]={}),function e(t,n){for(let o in n)void 0===t[o]?t[o]=n[o]:n[o].constructor===Object&&e(t[o],n[o])}(e.list[t],n),l=!1,0===i.length)return;const o=e.list[e.default];for(let e=0;e<i.length;e++)void 0===i[e].callbackOnly?i[e](d(o,i[e].path)):i[e]();i.length=0},e.changeDefault=function(t){if(e.default=t,!1!==windowDestroyListener&&0!==sf.window.list.length){const e=sf.window.list;for(let n=0;n<e.length;n++)e[n].sf.lang.changeDefault(t)}function n(){const{registered:e}=sf.component;for(let t in e)void 0!==e[t][3]&&v(e[t])}void 0===e.list[t]?(n.callbackOnly=!0,i.push(n)):n(),e.init(document.body);const o=sf.window.list;for(let t in o)e.init(o[t].document.body)};const t=/{(.*?)}/;function n(n,o){let i=!1;return n.replace(t,(function(t,n){return!1!==i||o.constructor!==String&&o.constructor!==Number?void 0!==o[n]?o[n].constructor===Function?o[n]():o[n]:void 0!==e.interpolate[n]?e.interpolate[n].constructor===Function?e.interpolate[n]():e.interpolate[n]:t:(i=!0,o)}))}let o=!1;var i=[];function r(){!1!==l&&!1!==e.serverURL&&(clearTimeout(o),o=setTimeout((function(){!1!==c&&c.abort(),c=sf.request("POST",e.serverURL,{lang:e.default,paths:JSON.stringify(l)},{sendType:"JSON",receiveType:"JSON"}).done((function(t){l=!1,e.add(e.default,t)})).fail(e.onError)}),500))}function s(t,o,s){const a=e.list[e.default];let c={};const f=[];for(var u=0;u<t.length;u++){const e=d(a,t[u]);e?c[t[u]]=e:f.push(t[u])}if(0===f.length)return o&&(c=n(c,o)),void 0===s?c:s(c);!1===l&&(l={});for(u=0;u<f.length;u++)d(l,f[u],1);const p=function(){for(let e=0;e<f.length;e++){const t=d(a,f[e]);d(c,f[e],t)}return s(c)};p.callbackOnly=!0,i.push(p),r()}e.get=function(t,o,a){return void 0!==o&&o.constructor===Function&&(a=o,o=void 0),void 0===e.list[e.default]&&(e.list[e.default]={}),t.constructor===String?function(t,o,s){let a=d(e.list[e.default],t);if(void 0!==a)return o&&(a=n(a,o)),void 0===s?a:s(a);!1===l&&(l={});d(l,t,1),s&&(s.path=t,i.push(s));return r(),t}(t,o,a):s(t,o,a)},e.assign=function(t,n,o,i){void 0===e.list[e.default]&&(e.list[e.default]={}),void 0!==o&&o.constructor===Function&&(i=o,o=void 0);const r=Object.keys(n),l=Object.values(n);s(l,o,(function(e){for(let n=0;n<r.length;n++)t[r[n]]=d(e,l[n]);i&&i()}))};var l=!1;const a=[];var c=!1;function d(e,t,n){const o=t.split(".");for(let t=0,i=o.length-1;t<=i;t++){const r=o[t];if(void 0===n){if(void 0===e[r])return;e=e[r]}else{if(t===i)return void(e[r]=n);e=void 0===e[r]?e[r]={}:e[r]}}return e}function f(t,n){let o=e.list[e.default];const i=new Set;void 0===o&&(o=e.list[e.default]={});const r=new WeakSet;for(let c=t.length-1;c>=0;c--){if(t[c].sf_lang===e.default&&!0===n||t[c].hasAttribute("sf-lang-skip")){t.splice(c,1);continue}var s=t[c];if(r.has(s))continue;if(r.add(s),void 0!==s.sf$elementReferences&&u(s)){i.add(s);continue}{const e=sf(s,!0);if(null!==e){if(i.has(e))continue;if(void 0!==e.sf$elementReferences&&u(e)){i.add(e);continue}if(("INPUT"===s.tagName||"TEXTAREA"===s.tagName)&&!s.hasAttribute("placeholder"))continue}}const f=s.getAttribute("sf-lang"),h=d(o,f);void 0!==h?(!0===n&&t.splice(c,1),s.hasAttribute("placeholder")?s.setAttribute("placeholder",h):"INPUT"!==s.tagName&&"TEXTAREA"!==s.tagName&&p(h,s)):!0!==n&&(!1===l&&(l={}),d(l,f,1),a.push(s))}if(0===i.size)return;const c=new WeakSet;for(var s of i){s.sf_lang=e.default;let{model:t}=s;void 0===t&&(t=sf(s)),void 0!==t.sf$bindedKey&&(c.has(s)||(c.add(s),!1===internal.model.syntheticTemplate(s,s.sf$elementReferences.template,void 0,t)&&(s.sf_lang=void 0)))}}e.onError=console.error,e.init=function(t){const n=t.querySelectorAll("[sf-lang]");if(0!==n.length){if(void 0===e.list[e.default]&&(e.list[e.default]={}),f(n),!1!==l&&!1!==e.serverURL){const e=function(){l=!1,f(a,!0)};e.callbackOnly=!0,i.push(e),r()}!1!==l&&!1===e.serverURL&&console.warn("Some language was not found, and the serverURL was set to false",l)}},internal.language.refreshLang=function(e){if(void 0!==e.hasAttribute){if(e.hasAttribute("sf-lang"))return f([e]);0!==(e=e.querySelectorAll("[sf-lang]")).length&&f(e)}};function u(t){const n=t.sf$elementReferences;let o=!1;const{template:i}=n;void 0===n.parsed&&(n.parsed=new Array(i.parse));for(var r=n.length-1;r>=0;r--){const t=n[r];if(void 0!==t.textContent){if(null===(c=t.textContent.parentElement)||!1===c.hasAttribute("sf-lang"))continue;var s=c.getAttribute("sf-lang")}else{if(void 0===t.sf_lang)continue;var c=t.sf_lang;s=t.sf_lang.getAttribute("sf-lang")}const f=d(e.list[e.default],s);if(void 0===f)return!1===l&&(l={}),d(l,s,1),void a.push(c);if(void 0===t.attribute)n.splice(r,1),p(f,c,i,n)&&(o=!0);else if(h(f,t.ref,i),"value"===t.ref.name){const e=t.ref;t.attribute.value=internal.model.applyParseIndex(e.value,e.parse_index,n.parsed,i.parse)}}for(r=n.length-1;r>=0;r--)n[r].textContent&&!1===n[r].textContent.isConnected&&n.splice(r,1);return o}function p(e,t,n,o){e=e.replace(/%\*&/g,"-");const i=[];e=e.replace(/\[([a-zA-Z0-9\-]+):(.*?)\]/g,(function(e,t,n){return i.push({tag:t.toUpperCase(),val:n}),"%*&"})).split("%*&");const{childNodes:r}=t,s={};for(var l=0,a=r.length;l<a;l++){var c;if(3===(f=r[l]).nodeType)void 0===(c=s._text)&&(c=s._text=[]);else{if(1!==f.nodeType)continue;void 0===(c=s[f.tagName])&&(c=s[f.tagName]=[])}c.push(f)}let d=n&&!0;t.textContent=e[0],null!==t.firstChild&&(d=d&&m(n,o,t.firstChild,t));for(l=1;l<e.length;l++){const r=i[l-1];var f;(f=void 0===(f=s[r.tag])||0===f.length?document.createElement(r.tag):f.pop()).textContent=r.val,t.appendChild(f),d=d&&m(n,o,f.firstChild,t),void 0===(f=s._text)||0===f.length?f=new Text(e[l]):(f=f.pop()).textContent=e[l],t.appendChild(f),d=d&&m(n,o,f,t)}return""===e[l-1]&&f.remove(),!1!==d||!n}function h(e,t,n){const o=[],i=e.replace(/{(.*?)}/g,(function(e,t){if(!1!==isNaN(t))if(void 0!==n.modelRefRoot[t])t=n.modelRefRoot[t][0];else{if(void 0===n.modelRef||void 0===n.modelRef[t])return console.error(`Language can't find existing model binding for '${t}' from`,Object.keys(n.modelRefRoot),n),"";t=n.modelRef[t][0]}return o.push(t),"%*&"}));return 0!==o.length&&(t.parse_index=o,t.value=i.split("%*&"),internal.model.parseIndexAllocate(t.value),!0)}function m(e,t,n,o){const i={textContent:n,ref:{address:$.getSelector(n,!0,o),nodeType:3}};return h(n.textContent,i.ref,e)&&t.push(i),!0}function v(t){t[2];const n=t[3],{addresses:o}=n;if(void 0===o)return;let r=!1;for(let s=o.length-1;s>=0;s--){if(o[s].skipSFLang||void 0===o[s].value)continue;const l=$.childIndexes(o[s].address,n.html).parentNode;if(!1===l.hasAttribute("sf-lang"))continue;r=!0;const a=d(e.list[e.default],l.getAttribute("sf-lang"));if(void 0===a){console.error(`Can't found '${l.getAttribute("sf-lang")}' for ${e.default}, in`,e.list[e.default],", maybe the language wasn't fully loaded");const n=function(){v(t)};return n.callbackOnly=!0,void i.push(n)}o.splice(s,1);const c=[];p(a,l,n,c);for(let e=0;e<c.length;e++){const{ref:t}=c[e];t.address=$.getSelector($.childIndexes(t.address,l),!0,n.html),o.push(t)}}!1===r&&(n.skipSFLang=!0)}}(),void 0!==Element.prototype.remove&&void 0!==CharacterData.prototype.remove&&void 0!==DocumentType.prototype.remove||function(){const e=[Element.prototype,CharacterData.prototype,DocumentType.prototype];for(let t=0;t<e.length;t++){if(e[t].hasOwnProperty("remove"))return;e[t].remove=function(){null!==this.parentNode&&this.parentNode.removeChild(this)}}}(),void 0===Element.prototype.matches&&(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),void 0===Element.prototype.closest&&(Element.prototype.closest=function(e){let t=this;do{if(t===document)return null;if(!0===t.matches(e))return t;t=t.parentNode}while(null!==t);return null}),$.get=(e,t,n,o)=>custom("GET",e,t,n,o),$.post=(e,t,n,o)=>custom("POST",e,t,n,o),$.getJSON=(e,t,n,o)=>custom("getJSON",e,t,n,o),$.postJSON=(e,t,n,o)=>custom("postJSON",e,t,n,o),sf.request=custom;const statusCode=sf.request.statusCode={};function custom(e,t,n,o,i){return n&&n.constructor===Function&&(i=n,n=void 0),o&&o.constructor===Function&&(i=o,o=void 0),void 0===o&&(o={}),"getJSON"===e&&(o.receiveType="JSON",e="GET"),"postJSON"===e&&(o.sendType="JSON",e="POST"),request(e,t,n,o,i)}function request(e,t,n,o,i){const r=new XMLHttpRequest;if(o.beforeOpen&&o.beforeOpen(r),"GET"!==e&&"HEAD"!==e&&"OPTIONS"!==e&&"DELETE"!==e||(t+=(!1===t.includes("?")?"?":"")+serializeQuery(n),n=null),r.open(e,t,o.async||!0,o.user,o.password),o.headers)for(var s in o.headers)r.setRequestHeader(s,o.headers[s]);if("object"==typeof n&&null!==n&&n.constructor!==FormData)if("JSON"===o.sendType)r.setRequestHeader("Content-Type","application/json"),n=JSON.stringify(n);else{const e=n;for(var s in n=new FormData,e){const t=e[s];if(t.constructor!==Array)if(t.constructor!==Object)n.append(s,t);else for(let e in t)n.append(s+"["+e+"]",t[e]);else for(let e=0;e<t.length;e++)n.append(s+"[]",t[e])}}return i&&i.constructor===Object||(i={done:i}),r.fail=function(e){return i.fail=e,r},r.done=function(e){return i.done=e,r},r.always=function(e){return i.always=e,r},r.progress=function(e){return r.onprogress=r.onloadstart=e,r},r.uploadProgress=function(e){return r.upload.onprogress=r.upload.onloadstart=e,r},r.onerror=function(){sf.request.onerror&&sf.request.onerror(r),i.fail&&i.fail(r.status),i.always&&i.always("error")},r.onload=function(){if(r.status>=200&&r.status<300||0===r.status)if("JSON"===o.receiveType){let e=void 0;try{e=JSON.parse(r.responseText)}catch(e){i.fail&&i.fail("parseerror",r.responseText)}void 0!==e&&(i.done&&i.done(JSON.parse(r.responseText),r.status),sf.request.onsuccess&&sf.request.onsuccess(r))}else i.done&&i.done(r.responseText||r.response,r.status),sf.request.onsuccess&&sf.request.onsuccess(r);else if(i.fail)if("JSON"===o.receiveType)try{i.fail(r.status,JSON.parse(r.responseText))}catch(e){i.fail(r.status,r.responseText)}else i.fail(r.status,r.responseText);statusCode[r.status]&&statusCode[r.status](r),i.always&&i.always(r.status)},o.beforeSend&&o.beforeSend(r),r.send(n),r}function serializeQuery(e){const t=[];for(let n in e){const o=e[n];if(o.constructor!==Array)if(o.constructor!==Object)t.push(n+"="+encodeURIComponent(o));else for(let e in o)t.push(n+"["+e+"]="+encodeURIComponent(o[e]));else for(let e=0;e<o.length;e++)t.push(n+"[]="+encodeURIComponent(o[e]))}return t.join("&")}sf.request.onerror=null,sf.request.onsuccess=null,function(){const e=sf.url=function(){let n="";for(let e in t)"/"!==t[e]&&(n+=`#${e}${t[e]}`);const o="|"+e.data.join("|");return e.paths+n+(1!==o.length?o:"")};let t=e.hashes={};e.data=[],e.paths="/",e.push=function(){window.history.pushState((window.history.state||0)+1,"",e())},e.replace=function(){window.history.replaceState(window.history.state,"",e())},e.get=function(n,o){return e.parse(),n.constructor===Number?e.paths.split("/")[n+1]:void 0!==t[n]?t[n].split("/")[o+1]:void 0},e.parse=function(n){if(void 0!==n){const e={hashes:{}};e.data=n.split("|");for(var o=e.data.shift().split("#"),i=1;i<o.length;i++){var r=o[i].split("/");e.hashes[r.shift()]="/"+r.join("/")}return e.paths=n.split("#")[0],e}e.data=window.location.hash.split("|");o=e.data.shift().split("#");t=e.hashes={};for(i=1;i<o.length;i++){r=o[i].split("/");t[r.shift()]="/"+r.join("/")}return e.paths=window.location.pathname,e},e.parse()}(),function(){const e=routerEval;routerEval=void 0;const t=/<html/;let n=!1,o=1,i=window.history.state||1,r=!1;window.addEventListener("popstate",(function(e){if(n)return n=!1,void(i-=o);r=!0,o=window.history.state>=i?1:-1,i+=o,l.goto(),r=!1}),!1);const s={};internal.router={},internal.router.parseRoutes=function(e,t){const n=[],o=/\/:([^/]+)/g,i=/^(path|url|template|templateURL|html|on|routes|beforeRoute|defaultData|cache)$/;return e.constructor!==Array&&(e=[e]),function e(r,s,l,a){""!==l&&(l+=" ");for(let d=0;d<r.length;d++){const f=r[d];let u=s+f.path;void 0!==f.routes&&e(f.routes,u,l,a),u=u.split("//").join("/");var c=[];const p=u.replace(o,(function(e,t){return c.push(t),"/([^/]+)"})),h=RegExp(`^${p}$`);if(void 0!==f.url)h.url=f.url;else if(void 0!==f.templateURL)h.templateURL=f.templateURL;else if(void 0!==f.template)h.template=f.template;else if(void 0!==f.html){const e=h.html=document.createElement("sf-page-view");internal.component.skip=!0,f.html.constructor===String?(h.html=sf.dom.parseElement(`<template>${f.html}</template>`,!0)[0],internal.component.skip=!1):e.appendChild(f.html),internal.component.skip=!1,e.classList.add("page-prepare")}h.keys=c,h.beforeRoute=f.beforeRoute,h.defaultData=f.defaultData||{},""!==l&&(h.selector=t.indexOf(l),-1===h.selector&&(h.selector=t.length,t.push(l.trim()))),void 0!==a&&(h.parent=a),void 0!==f.on&&(h.on=f.on),f.cache&&(h.cache=!0);const m=[];for(var c in f)if(!i.test(c)){m.push(c),e(f[c],u,c,h);break}0!==m.length&&(h.hasChild=m,h.forChild=RegExp(p)),n.push(h)}}(e,"",""),n},internal.router.findRoute=function(e){for(let t=0;t<this.length;t++){const n=e.match(this[t]);if(null!==n){const{keys:e}=this[t];if(void 0!==e){const o=this[t].data={};n.shift();for(let t=0;t<e.length;t++)o[e[t]]=n[t]}return this[t]}}return!1};const l=sf.views=function(i,l){void 0===l&&(l="/");const a=this;l&&(sf.views.list[l]=a);let c=!1;"/"===l?a.currentPath=sf.url.paths:!1===l?a.currentPath="":(a.currentPath="",c=!0);let d=!1,f=!1;a.lastPath="/",a.lastDOM=null,a.currentDOM=null,a.relatedDOM=[],a.data={},a.maxCache=4;let u=a.rootDOM={};function p(e,t,n){let o=(t||(u.isConnected?u:document.body)).getElementsByTagName(e||i);if(0===o.length)return!1;if(o=o[0],o.sf$viewInitialized)return!1;d=!0,null===y&&(y=o.getElementsByTagName("sf-page-view"));let r=null;if(0!==o.childNodes.length)if(1===o.childNodes.length&&"#text"===o.firstChild.nodeName&&""===o.firstChild.textContent.trim())o.firstChild.remove();else{r=document.createElement("sf-page-view"),o.insertBefore(r,o.firstChild);for(let e=1,t=o.childNodes.length;e<t;e++)r.appendChild(o.childNodes[1]);r.routePath=n||a.currentPath,r.routeCached=m.findRoute(r.routePath),r.classList.add("page-current"),o.defaultViewContent=r}return o.sf$viewInitialized=!0,t?o:(a.currentDOM=r,u=a.rootDOM=o,!0)}const h=[i];var m=a.routes=[];m.findRoute=internal.router.findRoute,internal.router.enabled=!0;const v={start:[],finish:[],loading:[],loaded:[],error:[]};a.on=function(e,t){if(e.includes(" ")){e=e.split(" ");for(let n=0;n<e.length;n++)a.on(e[n],t);return a}return void 0===v[e]?console.error(`Event '${e}' was not exist`):(!1===v[e].includes(t)&&v[e].push(t),a)},a.off=function(e,t){if(e.includes(" ")){e=e.split(" ");for(var n=0;n<e.length;n++)a.off(e[n],t);return a}return void 0===v[e]?console.error(`Event '${e}' was not exist`):void 0===t?(v[e].length=0,a):(-1===(n=v[e].indexOf(t))||v[e].splice(n,1),a)},a.addRoute=function(e){return m.push.apply(m,internal.router.parseRoutes(e,h)),d||p(),!f&&l&&$((function(){f||("/"!==l||u.childElementCount||(a.currentPath="",f=a.goto(sf.url.paths)),c&&(f=void 0!==sf.url.hashes[l]?a.goto(sf.url.hashes[l]):a.goto("/"),f&&(c=!1)))})),a};let g=!1;var y=null;function b(e,t){const n=v.error;if(0!==n.length)for(let o=0;o<n.length;o++)n[o](e,t);else console.error("Unhandled router error:",e,t)}function w(e,t){e.aborted||(n=!0,g=!1,b(e.status,t),window.history.go(-1*o))}function E(e,t,n,o){const i=[e];let r=e.parentNode;for(;r!==u&&null!==r;)"SF-PAGE-VIEW"===r.nodeName&&i.unshift(r),r=r.parentNode;let s=null,l=null;for(var c=0;c<a.relatedDOM.length;c++)!1===i.includes(a.relatedDOM[c])&&(null===s&&(s=a.relatedDOM[c],l=s.parentNode),a.relatedDOM[c].classList.remove("page-current"));let d=null;for(c=0;c<i.length;c++)null===d&&i[c].parentNode===l&&(d=i[c]),i[c].classList.add("page-current");a.showedSibling=d,a.lastSibling=s,e.classList.add("page-current"),a.relatedDOM=i}a.removeRoute=function(e){const t=m.findRoute(e);if(!1!==t){for(var n=0;n<u.children.length;n++)u.children[n].routePath.match(t)&&u.children[n].remove();-1!==(n=m.indexOf(t))&&m.splice(n,1)}};let M=0;return a.goto=function(o,f,$,R,P){if(a.currentPath===o)return;if(!1===d&&(p(),!1===d))return console.error("sf.views haven't finished initializing, and waiting for related parent element");if(void 0===P){for(var x=0;x<v.start.length;x++)if(v.start[x](a.currentPath,o))return;a.lastPath=a.currentPath}void 0!==f&&f.constructor===Function&&(R=f,f=void 0),void 0!==$&&$.constructor===Function&&(R=$,$=void 0);let C=!1;f instanceof HTMLElement&&(C=f,f=void 0),$ instanceof HTMLElement&&(C=$,$=void 0),c=!1;const S=m.findRoute(o);if(!S)return b(404,{path:o,message:"Path was not found"});if(void 0!==S.beforeRoute&&S.beforeRoute(S.data))return;if("/"===l?sf.url.paths=o:l&&(sf.url.hashes[l]=o),r||void 0!==P||!1===l||sf.url.push(),!1===u.isConnected&&(void 0!==u.nodeType&&(u={}),!1===p()))return console.error(l,"can't route to",o,`because element with selector '${i}' was not found`);if(g&&g.abort(),!1===C&&function(e){let t=!1;function n(n){if(null===n)return!1;if(t=function(e){for(let t=y.length-1;t>=0;t--)if(e===y[t].routePath)return y[t];return!1}(e),t)return!0;const o=n.children;for(let n=0;n<o.length;n++)if(o[n].routePath===e)return t=o[n],!0;return!1}if(!1===n(u))for(var o=0;o<h.length&&!n(u.querySelector(h[o]));o++);if(!1===t)return!1;a.lastDOM=a.currentDOM,void 0!==a.currentDOM.routeCached.on&&a.currentDOM.routeCached.on.leaving&&a.currentDOM.routeCached.on.leaving();if(a.currentDOM=t,t.routerData)a.data=t.routerData;else if(null!==t.parentElement){const e=t.parentElement.closest("sf-page-view");null!==e&&(a.data=e.routerData)}void 0!==a.currentDOM.routeCached.on&&a.currentDOM.routeCached.on.coming&&a.currentDOM.routeCached.on.coming(a.data);a.currentPath=a.currentDOM.routePath,E(t);for(o=0;o<v.finish.length;o++)v.finish[o](a.lastPath,a.currentPath);void 0!==a.currentDOM.routeCached.on&&a.currentDOM.routeCached.on.showed&&a.currentDOM.routeCached.on.showed(a.data);void 0!==a.lastDOM.routeCached.on&&a.lastDOM.routeCached.on.hidden&&a.lastDOM.routeCached.on.hidden();return!0}(o))return!0;if(void 0===P){M=1;let e=S.parent;for(;void 0!==e;)M++,e=e.parent}const O=a.data=S.data;function L(t,i,r){i.routerData={},"#comment"===i.firstChild.nodeName&&0===i.firstChild.textContent.indexOf(" SF-View-Data")&&(i.routerData=JSON.parse(i.firstChild.textContent.slice(14)),i.firstChild.remove(),Object.assign(a.data,i.routerData));const s=M+1-(P||1);for(var l=0;l<v.loaded.length;l++)if(v.loaded[l](s,M,i))return;if(t.insertAdjacentElement("beforeend",i),!1!==a.dynamicScript){const t=i.getElementsByTagName("script");for(l=0;l<t.length;l++)e(t[l].text)}const c=a.currentDOM;a.lastDOM=c,a.currentDOM=i,a.currentPath=o,void 0!==S.on&&S.on.coming&&S.on.coming(a.data),S.cache&&(i.routeNoRemove=!0),E(i),void 0!==r&&a.relatedDOM.push.apply(a.relatedDOM,r),null!==c&&c.routeCached&&void 0!==c.routeCached.on&&c.routeCached.on.leaving&&c.routeCached.on.leaving(o,S),i.routeCached=S,i.routePath=o,i.classList.remove("page-prepare"),n=!1,function(e){const t=e.parentNode;void 0===t.sf$cachedDOM&&(t.sf$cachedDOM=[]);const n=t.sf$cachedDOM.indexOf(e);-1===n?t.sf$cachedDOM.push(e):t.sf$cachedDOM.push(t.sf$cachedDOM.splice(n,1)[0]),a.maxCache<t.sf$cachedDOM.length&&t.sf$cachedDOM.shift().remove()}(i),void 0!==S.on&&S.on.showed&&S.on.showed(a.data),null!==c&&c.routeCached&&void 0!==c.routeCached.on&&c.routeCached.on.hidden&&c.routeCached.on.hidden(o,S)}const _=function(e){if(S.selector||S.hasChild){var t=e.sf$viewSelector;void 0===t&&(t=e.sf$viewSelector={})}if(hotReload&&void 0!==S.template&&(e.sf$templatePath=S.template),S.hasChild){for(var n=[],i=0;i<S.hasChild.length;i++){t[S.hasChild[i]]=p(S.hasChild[i],e,o);const r=t[S.hasChild[i]].firstElementChild;r&&n.unshift(r)}0===n.length&&(n=void 0)}else n=void 0;if(void 0===S.selector)var r=u;else{const t=h[S.selector];r=null;const n=function(e){const t=[];for(let n=0;n<y.length;n++)0===e.indexOf(y[n].routePath)&&t.push(y[n]);return t}(o);for(i=0;i<n.length;i++){const e=n[i].sf$viewSelector;void 0!==e&&void 0!==e[t]&&(r=e[t])}if(!r||!1===r.isConnected){if(void 0===S.parent)return e.remove(),w({status:0},{path:o,target:e,message:"Parent element was not found while adding this element. Maybe it was disconnected from the DOM."});{const n=o.match(S.parent.forChild)[0];return a.goto(n,!1,$,(function(n){if(r=n.sf$viewSelector[t],O!==a.data&&(a.data=Object.assign(O,a.data)),L(r,e),R)return R(e);if(e.routerData)a.data=e.routerData;else if(null!==e.parentElement){const t=e.parentElement.closest("sf-page-view");null!==t&&(a.data=t.routerData)}for(let e=0;e<v.finish.length;e++)v.finish[e](a.lastPath,o);const{defaultViewContent:i}=e.parentNode;void 0!==i&&i.routePath!==o&&i.classList.remove("page-current")}),P+1||2)}}}if(L(r,e,n),R)return R(e);if(e.routerData)a.data=e.routerData;else if(null!==e.parentElement){const t=e.parentElement.closest("sf-page-view");null!==t&&(a.data=t.routerData)}for(i=0;i<v.finish.length;i++)v.finish[i](a.lastPath,o)};if(!1!==C)return _(C),!0;if(void 0!==S.templateURL&&void 0!==s[S.templateURL])return _(s[S.templateURL].cloneNode(!0)),!0;if(S.template&&void 0===S.html){if(void 0===window.templates)return console.error("`window.templates` was not found");S.html=sf.dom.parseElement(`<template>${window.templates[S.template+".html"]}</template>`,!0)[0],hotReload&&(S.template=S.template+".html")}if(S.html){if("TEMPLATE"===S.html.nodeName){const e=document.createElement("sf-page-view");e.classList.add("page-prepare");const t=S.html.cloneNode(!0).content.childNodes;for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[0],null);return _(e),!0}return _(S.html.cloneNode(!0)),!0}let k=S.templateURL||S.url||o;"/"!==k[0]&&(k="/"+k);for(x=0;x<v.loading.length;x++)if(v.loading[x](P||1,M))return;return g=sf.request($||"GET",window.location.origin+k,Object.assign(f||S.defaultData,{_sf_view:void 0===S.selector?i:h[S.selector].split(" ").pop()})).done((function(e){if(t.test(e))return w({status:403},{path:o,requestURL:window.location.origin+k,message:"Views request was received <html> while it was disallowed. Please check http response from Network Tab."});const n=document.createElement("sf-page-view");n.classList.add("page-prepare");for(var i=0,r=(l=sf.dom.parseElement(e)).length;i<r;i++)n.insertBefore(l[0],null);if(void 0!==S.templateURL){internal.component.skip=!0;const t=document.createElement("sf-page-view");t.classList.add("page-prepare");var l;for(i=0,r=(l=sf.dom.parseElement(e)).length;i<r;i++)t.insertBefore(l[0],null);s[S.templateURL]=t,internal.component.skip=!1}_(n)})).fail(w),!0},a};l.list={},l.goto=function(e){const t=sf.url.parse(e);sf.url.data=t.data;const n=l.list;for(let e in l.list)"/"!==e?t.hashes[e]!==n[e].currentPath&&n[e].goto(t.hashes[e]||"/"):n["/"].currentPath!==t.paths&&n["/"].goto(t.paths)},$((function(){void 0===sf.views.onCrossing&&(sf.views.onCrossing=function(e,t){console.error("Unhandled crossing URL origin",e,t),console.warn("Handle it by make your custom function like `sf.views.onCrossing = func(){}`")}),$.on(document.body,"click","a[href]",(function(e){e.preventDefault();const t=this.getAttribute("href");if("@"===t[0]){const e=this.getAttribute("target");return void(e?window.open(t.slice(1),e):window.location=t.slice(1))}this.href.replace(window.location.origin,"").includes("//")?sf.views.onCrossing(this.href,this.getAttribute("target")):l.goto(t)}),!0)}))}();const ElementManipulatorProxy=internal.EMP,ElementManipulator=internal.EM,VSM_Threshold=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1];class VirtualScrollManipulator{waitMap=new Set;existMap=new WeakSet;observeMap=new WeakSet;waitingMap=!1;dynamicSize=!1;firstCursor=0;lastCursor=0;bottomHeight=1;topHeight=1;prepareSize=6;totalHeight=0;constructor(e,t,n){this.$EM=t,this.elList=t.elements,this.list=t.list,this.iTop=document.createElement(n.tagName),this.iTop.classList.add("virtual-spacer"),this.iRoot=e,this.iBottom=this.iTop.cloneNode(),e.insertBefore(this.iTop,null),e.appendChild(this.iBottom),e.insertBefore(n,this.iBottom);const o=window.getComputedStyle(n);this.elMargin=Number(o.marginBottom.slice(0,-2))+Number(o.marginTop.slice(0,-2)),this.elMaxHeight=this.elHeight=n.offsetHeight+this.elMargin,n.remove();const i=this;requestAnimationFrame((function(){setTimeout((function(){if(!e.isConnected)return;let t=internal.findScrollerElement(e);null===t?(t=e,console.warn("Virtual List need scrollable container",e)):t.classList.add("sf-scroll-element"),i.iScroller=t,i.rootHeight=i.iScroller.offsetHeight,e.classList.contains("sf-list-dynamic")&&(i.dynamicSize=!0),i.init()}),500)}))}init(){this.listSize=this.prepareSize+Math.round(this.rootHeight/this.elMaxHeight);const e=this;function t(){const t=e.lastEntries;e.lastEntries=void 0;let n=!1;for(let o=t.length-1;o>=0;o--){const i=t[o];if(!(i.intersectionRect.height<=1))if(i.target===e.iTop||i.target===e.iBottom){if(!1===i.isIntersecting||n)continue;n=!0,e.recalculateScrollPosition()}else e.observeMap.has(i.target)&&e.waitObservedElement(i.target,i.intersectionRatio)}}this.observer=new IntersectionObserver((function(n){void 0===e.lastEntries&&requestAnimationFrame(t),e.lastEntries=n}),{root:e.iScroller,threshold:VSM_Threshold}),this.observer.observe(this.iTop),this.observer.observe(this.iBottom),this.dynamicSize?(this.rObserver=new ResizeObserver((function(t){const{elList:n}=e;let o=n.length;for(var i=0;i<t.length;i++){const s=(r=t[i].target).offsetHeight+e.elMargin;if(r.sf$heightPos!==s){e.totalHeight-=r.sf$heightPos,e.totalHeight+=s,r.sf$heightPos=s;const t=n.indexOf(r);-1!==t&&o>t&&(o=t),s>e.elMaxHeight&&(e.elMaxHeight=s)}}e.listSize=e.prepareSize+Math.round(e.rootHeight/e.elMaxHeight),0===o&&(n[o++].sf$scrollPos=1);for(i=o;i<n.length;i++){const e=n[i-1];var r=n[i];void 0!==e?r.sf$scrollPos=e.sf$scrollPos+e.sf$heightPos:r.sf$scrollPos=1}if(e.lastCursor!==n.length){r=n[e.lastCursor];e.bottomHeight=e.totalHeight-(r.sf$scrollPos+r.sf$heightPos),e.bottomHeight<0&&(e.bottomHeight=2)}else e.bottomHeight=1;e.iBottom.style.height=e.bottomHeight+"px"})),this.bottomHeight=2):this.bottomHeight=this.elMaxHeight*this.elList.length,this.iTop.style.height=this.topHeight+"px",this.iBottom.style.height=this.bottomHeight+"px"}waitObservedElement(e,t){t<.7?(this.waitMap.delete(e),this.existMap.has(e)&&(this.existMap.delete(e),this.list.visibilityCallback(elList.indexOf(e),!1))):this.existMap.has(e)||this.waitMap.add(e),!1===this.waitingMap&&(setTimeout(this.waitObservedFinish,1e3),this.waitingMap=!0)}waitObservedFinish(){const e=this.iScroller.scrollTop,t=e+this.iScroller.offsetHeight;for(let n of waitMap)n.sf$scrollPos<e||n.sf$scrollPos>t||(this.existMap.add(n),this.list.visibilityCallback(elList.indexOf(el),!0));this.waitMap.clear(),this.waitingMap=!1}recalculateScrollPosition(){if(void 0===this.listSize)return;const{scrollTop:e}=this.iScroller,{elList:t}=this;for(var n=Math.floor(e/this.elMaxHeight);n<t.length;n++){const o=t[n].sf$scrollPos;if(void 0===o||o>=e)break}(n-=this.prepareSize)<0?n=0:n>t.length&&(n=t.length-this.listSize);let o=n+this.listSize+this.prepareSize;if(o>t.length&&(o=t.length),n>=o)return void(this.iBottom.style.height=this.bottomHeight+"px");this.firstCursor=n;const i=t[n]||null;let r,s=this.iTop.nextElementSibling;for(;s!==i;){if(r=s,r.sf$removed=!0,s=r.nextElementSibling,s!==this.iBottom){s=this.iTop;break}r.remove(),this.dynamicSize&&this.rObserver.unobserve(r)}for(this.topHeight=i.sf$scrollPos;n<o;n++)r=t[n],s.insertAdjacentElement("afterEnd",r),r.sf$removed&&this.dynamicSize&&this.rObserver.observe(r),r.sf$removed=!1,s=r;for(s=s.nextElementSibling;s!==this.iBottom;)r=s,r.sf$removed=!0,s=r.nextElementSibling,r.remove(),this.dynamicSize&&this.rObserver.unobserve(r);r=t[o],this.lastCursor=o,n===t.length?this.bottomHeight=1:this.bottomHeight=this.totalHeight-(r.sf$scrollPos+r.sf$heightPos),this.bottomHeight<0&&(this.bottomHeight=2),this.iTop.style.height=this.topHeight+"px",this.iBottom.style.height=this.bottomHeight+"px"}observeVisibility(e){this.observer.observe(this.elList[e]),this.observeMap.add(this.elList[e])}unobserveVisibility(e){this.observer.unobserve(this.elList[e]),this.observeMap.delete(this.elList[e])}scrollTo(e){const t=this.elList[e];t&&(this.iScroller.scrollTop=t.sf$scrollPos)}offsetTo(e){return this.elList[e]?this.elList[e].sf$scrollPos:-1}}Object.assign(VirtualScrollManipulator.prototype,{startInjection(){const{elList:e}=this;let t=this.listSize;t>e.length&&(t=e.length);for(let n=0;n<t;n++)this.iRoot.insertBefore(e[n],this.iBottom),this.newElementInit(e[n],n-1);this.firstCursor=0,this.lastCursor=t,e.length===t?this.bottomHeight=1:this.bottomHeight=2,this.topHeight=1},newElementInit(e,t){void 0===e.sf$heightPos&&(e.sf$heightPos=this.elHeight+this.elMargin),0===t?e.sf$scrollPos=1:(t=this.elList[t],e.sf$scrollPos=void 0!==t?t.sf$scrollPos+t.sf$heightPos:1),this.dynamicSize&&this.rObserver.observe(e),this.totalHeight+=e.sf$heightPos},clear(){this.topHeight=this.bottomHeight=1,this.totalHeight=this.lastCursor=this.firstCursor=0,this.dynamicSize&&this.rObserver.disconnect(),this.waitMap.clear(),this.iRoot.appendChild(this.iTop),this.iRoot.appendChild(this.iBottom)},append(e){this.recalculateScrollPosition()},prepend(e){this.recalculateElementData(e),this.recalculateScrollPosition()},move(e,t,n,o){t<e&&(e=t),this.recalculateElementData(e),this.recalculateScrollPosition()},swap(e,t){t<e&&(e=t),this.recalculateElementData(e),this.recalculateScrollPosition()},remove(e){this.totalHeight-=this.elList[e].sf$heightPos,this.recalculateElementData(e),this.recalculateScrollPosition()},removeRange(e,t){for(let n=e;n<t;n++)this.totalHeight-=this.elList[n].sf$heightPos;this.elList.splice(e,t-e),this.recalculateElementData(e),this.recalculateScrollPosition()},insertAfter(e){this.totalHeight-=this.elList[e].sf$heightPos,this.recalculateScrollPosition()},update(e,t){this.recalculateScrollPosition()},hardRefresh(e){this.recalculateElementData(e),this.recalculateScrollPosition()},reverse(){this.recalculateElementData(0),this.recalculateScrollPosition()},recalculateElementData(e){const{elList:t}=this;for(let n=e+1;n<t.length;n++){const e=t[n-1];t[n].sf$scrollPos=e.sf$scrollPos+e.sf$heightPos}}});class VirtualScroll{constructor(e){this.$EM=e}visibilityCallback=function(){console.log('Please set "visibilityCallback" property when using "observeVisibility"')};_proxying(e,t){if(this.$EM.constructor===ElementManipulatorProxy){const{list:n}=this.$EM;let o;for(let i=0;i<n.length;i++)o=VirtualScrollManipulator.prototype[e].apply(n[i].$VSM,t);return o}return VirtualScrollManipulator.prototype[e].apply(this.$EM.$VSM,t)}observeVisibility(e){this._proxying("observeVisibility",arguments)}unobserveVisibility(e){this._proxying("unobserveVisibility",arguments)}scrollTo(e){this._proxying("scrollTo",arguments)}offsetTo(e){return this._proxying("offsetTo",arguments)}destroy(){}}!function(){let e=!1;internal.addScrollerStyle=function(){if(!1===e){let t=document.getElementById("sf-styles");t||(t=document.createElement("style"),t.id="sf-styles",document.head.appendChild(t)),t.sheet.insertRule(".sf-virtual-list .virtual-spacer{visibility: hidden !important;position: relative !important;transform-origin: 0 0 !important;width: 1px !important;margin: 0 !important;padding: 0 !important;background: none !important;border: none !important;box-shadow: none !important;transition: none !important;}",t.sheet.cssRules.length),t.sheet.insertRule(".sf-scroll-element {backface-visibility: hidden;}",t.sheet.cssRules.length),e=!0}};const t=/auto|scroll|overlay|hidden/;internal.findScrollerElement=function(e){const n=e.ownerDocument,o=n.defaultView;if(!o)return null;for(;null!==e&&!1===t.test(o.getComputedStyle(e).overflow);)if((e=e.parentNode)===n.body)return null;return e}}();let headerTags="",windowDestroyListener=!1;function winDestroy(e){const t=e.winOptions;if(t.onclose&&!1===t.onclose())return ev.preventDefault(),!1;e.destroying=!0,delete sf.window.list[t.id],e.document.body.remove(),e.close(),console.log(`%c[${t.title}]`,"color: #9bff82","Closed!")}const reqAnimFrame=window.requestAnimationFrame;function firstInitSFWindow(){window.addEventListener("focus",(function(){window.requestAnimationFrame=reqAnimFrame}))}sf.window={list:{},destroy(e){if(void 0!==e)winDestroy(this.list[e]);else{const{list:e}=this;for(let t in e)winDestroy(e[t])}window.requestAnimationFrame=reqAnimFrame},create(e,t){void 0===e&&(e={}),void 0===e.id&&(e.id=Math.round(1e3*Math.random())+String(Date.now()).slice(3));const n=e.id;let o;if(!1===windowDestroyListener&&(windowDestroyListener=!0,window.addEventListener("beforeunload",(function(){sf.window.destroy()}))),e.templateHTML?o=e.templateHTML:e.templatePath?o=window.templates[e.templatePath]:e.templateURL?console.log("Haven't been implemented"):console.error("The options must have a template (templatePath | templateHTML | templateURL)"),void 0===o)return console.error("Template not found")&&!1;const i=`width=${e.width||500},height=${e.height||400}`,r=window.open(window.location.origin+(e.route||""),"",i);if(null===r)return console.error("It seems the popup was blocked by the browser")&&!1;if(""===headerTags){headerTags=$('script[src*="scarletsframe"]')[0].outerHTML;const e=$("link, style");for(let t=0;t<e.length;t++)headerTags+=e[t].outerHTML}r.winOptions=e;const s=this.list;return r.loaded=function(){s[n]=r,r.sf.space.list=sf.space.list,r.sf.model.root=sf.model.root,r.sf.model.init=sf.model.init,r.sf.component.new=sf.component.new,r.sf.lang.init=sf.lang.init,r.sf.lang.changeDefault=sf.lang.changeDefault,portComponentDefinition(r,sf.component.registered,r.sf.component.registered);const e=sf.space.list;for(let t in e){const n=e[t],o=new r.sf.space(t,{templatePath:n.templatePath});for(let e in n.list)o.list[e].root=n[e].root;portComponentDefinition(r,n.default.registered,o.default.registered)}r.document.body.textContent="",$(r.document.body).append(o),r.sf$proxy.sfLoaderTrigger(),firstInitSFWindow&&(firstInitSFWindow(),firstInitSFWindow=void 0),!1===document.hasFocus()&&(window.requestAnimationFrame=r.requestAnimationFrame),r.addEventListener("focus",(function(){window.requestAnimationFrame=r.requestAnimationFrame})),t&&t({views:r.sf.views,url:r.sf.url}),sf.lang.init(r.document.body);for(let e in windowEv){const t=windowEv[e];for(let n=0;n<t.length;n++){const o=t[n];r.addEventListener(e,o,o.options)}}},void 0===e.title&&(e.title="Untitled Space"),r.console.log=function(){console.log(`%c[${e.title}]`,"color: #9bff82",...arguments)},r.console.warn=function(){console.warn(`%c[${e.title}]`,"color: #9bff82",...arguments)},r.console.error=function(){console.error(`%c[${e.title}]`,"color: #9bff82",...arguments)},r.sf$proxy=forProxying,r.onerror=r.onmessageerror=r.console.error,r.document.write(`<html><head><title>${e.title}</title>${headerTags}</head><body><script>setTimeout(loaded,1000)<\/script></body></html>`),r.addEventListener("beforeunload",(function(e){sf.window.destroy(n)})),!0},source(e,t){if(void 0===t&&(t=window.event),void 0===t)throw new Error("Can't capture event, please add event data on parameter 2 of sf.window.source");if(void 0===e)return e.view;const n=t.view.document;for(let t=0;t<e.length;t++)if(e[t].ownerDocument===n)return e[t];return null}};var windowEv={};function portComponentDefinition(e,t,n){for(let o in t){const i=n[o]=t[o].slice(0);if(void 0!==i[3])if(i[3].constructor===Object){const e=Object.create(i[3]);i[3]=e,e.html=$.parseElement(e.html.outerHTML)[0]}else{const{tempDOM:e}=i[3];i[3]=$.parseElement(i[3].outerHTML)[0],i[3].tempDOM=e}i[1]=e.sf$defineComponent(o)}}return sf}));
//# sourceMappingURL=scarletsframe.hot.js.map
